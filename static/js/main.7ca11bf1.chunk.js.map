{"version":3,"sources":["state/kuralIndex/index.ts","state/kuralIndex/reducer.ts","state/kuralIndex/actions.ts","state/settings/index.ts","lib/hooks/useNavigation.tsx","lib/hooks/useSubCategory.tsx","lib/hooks/useBaseItem.tsx","views/components/common/AnimatedExpandedIcon.tsx","views/components/category-viewer/category-list-item.tsx","views/components/category-viewer/category-viewer.tsx","views/components/category-viewer/category-viewer-container.tsx","views/components/kural/KuralCard.tsx","views/components/kural/KuralDetail.tsx","lib/hooks/useKuralDetail.tsx","views/components/kural/RouteViewer.tsx","views/components/kural/KuralDetailViewer.tsx","views/components/kural/ListKuralCard.tsx","views/components/kural/ListKuralsOfChapter.tsx","views/components/kural/KuralsByChapterViewer.tsx","views/pages/settings/RankTransliteratorSetting.tsx","views/components/common/HideOnScroll.tsx","views/components/common/MyAppBar.tsx","views/components/common/ListView.tsx","views/components/favourite-viewer/chapter-fav-list.tsx","views/components/favourite-viewer/kural-fav-list.tsx","views/components/favourite-viewer/index.tsx","views/pages/home/index.tsx","views/pages/list/index.tsx","state/title/index.ts","views/components/common/MyBottomNavigationBar.tsx","views/components/kural/KuralActionBar.tsx","views/pages/main/main.tsx","views/components/kural/KuralSearch.tsx","state/search/index.ts","views/pages/search/SearchChips.tsx","views/pages/search/search.tsx","views/pages/settings/BackgroundPicker.tsx","views/pages/settings/ColorPicker.tsx","views/components/common/DiscreteSlider.tsx","views/pages/settings/FontSizePicker.tsx","views/pages/settings/LanguagePicker.tsx","views/pages/settings/SettingItem.tsx","views/pages/settings/index.tsx","routes.tsx","lib/hooks/useRoute.tsx","lib/hooks/useKuralSearch.ts","lib/hooks/useLongPress.tsx","lib/hooks/useIdbKeyStore.tsx","lib/hooks/useUserPreference.tsx","App.tsx","state/reducers.ts","state/store.ts","state/test.tsx","state/index.tsx","firebase.ts","serviceWorker.js","views/styles/theme.ts","index.tsx","lib/api/types.ts","lib/api/category.ts","lib/api/firestore.ts","lib/api/common.ts","lib/api/kural.ts","lib/api/transilterator.ts","lib/api/preference.ts","lib/api/util.ts","lib/api/route.ts","lib/api/user.ts","lib/api/index.ts"],"names":["defaultState","chapter","section","literature","transliterator","index","kurals","KuralIndexReducer","state","action","type","payload","thunkInitKuralIndexMapAndUserPref","firestore","dispatch","a","getUserPreferences","user","primary","preference","language","getKuralIndex","kuralIndex","toBaseTypeMap","getAllSections","sectionMap","getAllLiterature","literatureMap","getAllChapter","chapterMap","getAllTransliterators","transliteratorMap","reduce","oldVal","t1","id","Object","getKurals","kuralsMap","entries","k","v","value","setUser","updateUserFSAsync","updateUserPreference","applyPreference","pref","DEFAULT_COLORS","DEFAULT_BACKGROUND","label","color","ANONYOMOUS_USER","favorites","display","background","secondary","fontSizeType","FontSizeType","MEDIUM","PreferenceReducer","settings","useNavigation","history","useHistory","route","push","useSubCategory","category","resultCategory","Error","isCategoryValidErr","React","useState","result","setResult","KURAL_INDEX","useSelector","st","kuralIndexMap","getLiteraturesBySection","useCallback","sectionId","LITERATURE_MAP","INDEX_MAP","fillRange","litIndex","map","getChaptersFromLiterature","litId","CHAPTER_MAP","litChapMap","c","useEffect","getKuralIdsOfChapter","kId","length","useBaseItem","items","itemNo","categoryId","getCategoryIds","useStyles","makeStyles","theme","icon","transform","transition","AnimatedExpandedIcon","isExpanded","className","style","classes","ExpandMore","clsx","listItem","cursor","position","borderRadius","spacing","WebkitTapHighlightColor","border","paddingLeft","palette","main","listIcon","justifyContent","alignItems","TreeListItem","level","hasNodes","isOpen","toggleNode","focused","onClick","active","ListItem","ev","ListItemText","treeMenuContainer","outlineStyle","list","padding","CategoryViewer","props","debug","List","key","itemProps","CategoryViewerContainer","chapterQueryParam","URLSearchParams","location","search","get","routeKey","pathname","replace","RegExp","ROUTE_CONSTANTS","LIST_CATEGORY","sections","getChaptersByLiterature","TREE_DATA","values","s","sIndex","toString","nodes","lit","ch","chIndex","initialActiveKey","initialFocusKey","initialOpenNodes","split","it","substring","indexOf","getInitialOpenNodes","onClickItem","item","newRoute","lastItemSeparator","lastIndexOf","literatureRoute","currentRoute","data","hasSearch","flexDirection","userSelect","breakpoints","up","badgeContainer","height","fontSize","lineHeight","minWidth","kuralWrapper","width","KuralCard","kural","root","component","componentType","showBadge","dangerouslySetInnerHTML","__html","transliteratorList","only","minHeight","marginBottom","borderBottom","fontWeight","transliteration","paddingTop","paddingBottom","textAlign","WebkitTextStrokeWidth","WebkitTextStroke","letterSpacing","KuralDetail","kuralInput","useFirestore","PRIMARY_LANG","TRANSLITERATORS","KURALS","setKural","kuralDetail","setKuralDetail","getUserTransliterators","userPreferedTranslits","getKuralDetail","useKuralDetail","transliterators","transliteratorId","name","Chip","size","routeContainer","flexWrap","chipRoot","margin","maxWidth","favoriteIcon","RouteChip","onLongPress","navigateTo","longPressEventHandlers","useLongPress","isFavourite","Favorite","backgroundColor","RouteViewer","useRoute","routes","toggleRouteFavourite","renderRight","SwiperCore","use","Virtual","Keyboard","KuralDetailViewer","params","useParams","KURAL_NO","parseInt","activeKuralNo","setActiveKuralNo","slideKuralIds","Array","from","ITEMS_COUNT_MAP","keys","i","LIST","findCategoryRouteMapString","isCategoryValid","Container","disableGutters","autoHeight","keyboard","grabCursor","initialSlide","spaceBetween","slidesPerView","allowSlideNext","virtual","onTransitionEnd","swiper","activeIndex","virtualIndex","renderSlide","kuralCard","ListKuralCard","openKuralDetail","ListKuralsOfChapter","chapterNo","TransliteratorSectionType","chapterKuralsList","HideOnScroll","children","window","trigger","useScrollTrigger","target","undefined","Slide","appear","direction","in","toolbar","avatar","marginLeft","actionsGroup","iconButton","MyAppBar","AppBar","elevation","Toolbar","actions","gridTemplateColumns","idWrap","opacity","left","labelWrap","ListView","divider","showDivider","onItemSelected","chapFavorites","paddingRight","ChapterFavList","getChapter","chapterIds","sort","filter","KuralFavList","chapterKuralMap","setchapterKuralMap","onKuralSelected","chapMap","kuralIds","chap","findChapterNoFromKuralNo","chapId","chapterInfo","disablePadding","ListSubheader","disableSticky","collapsableGroup","listItemTitle","favCount","FavoritesViewer","filterFav","KURAL_IDS","CHAPTER_IDS","useIdbKeyStore","expanded","visiblity","setVisiblity","noRecordsFound","GroupTitleMaker","isVisible","title","collapseContent","selected","button","inset","Collapse","timeout","marginTop","favoriteCard","Home","Card","variant","CardHeader","CardContent","defalutTitle","flexGrow","appBar","bottom","top","boxShadow","borderTop","actionItem","MyBottomNavigationBar","BottomNavigation","onChange","_","BottomNavigationAction","ActionBarItems","KuralActionBar","homePath","useRouteMatch","listPath","useLocation","useDispatch","initRoute","isExact","setRoute","find","Main","renderRoutes","createStyles","borderColor","fade","grey","searchicon","clearIcon","input","flex","light","KuralSearch","inputRef","useRef","useKuralSearch","setSearchKey","debounced","useDebouncedCallback","keyword","setKeyword","focus","setFocus","callback","current","querySelector","InputBase","autoFocus","ref","placeholder","inputProps","e","text","onFocus","onSearchTap","onBlur","Fade","trim","sortSearchResults","SortValueMap","b","status","results","filters","userSelections","detail","searchFilter","SearchChips","setFilters","hasStartsWith","f","startsWith","filterOptions","SearchCategoryLabelMap","all","isShow","Set","r","isSelected","CATEGORY_COLORS","selection","searchbar","marginRight","kuralSearchItem","searchItem","searchItemAvatar","SearchResultItem","innerContent","Avatar","charAt","toUpperCase","Search","getOnClickRoute","isResultOfType","renderItem","colorItemContainer","gridTemplateRows","gridGap","colorItem","justifySelf","itemIcon","BackgroundOption","itemSelected","setItemSelection","onSelect","ListItemIcon","Radio","checkedIcon","Check","checked","BackgroundPicker","useFirestoreConnect","COLLECTION_NAME_MAP","DISPLAY","DISPLAY_CONFIG","USER_BG_COLOR","CONFIG","userPreference","updateUserDisplayColor","ICON_MAP","Grade","Whatshot","ColorItem","ColorPicker","USER_COLOR","COLORS","colors","splice","getColors","StyledSlider","withStyles","thumb","track","rail","mark","right","content","markActive","Slider","DiscreteSlider","aria-labelledby","valueLabelDisplay","sliderWrapper","sliderRoot","FontSizePicker","FONT_SIZE_MAP","marks","aria-label","step","min","TINY","max","BIG","fontType","languageItem","languageItemText","itemCheckbox","LanguagePicker","useUserPreference","updateUserPref","LANGUAGE","SECONDARY_LANGS","languageMap","getOrderedLangIds","sortedIds","l","toLocaleLowerCase","orderedLangIds","setOrderdLangIds","isLangActive","langId","onDragEnd","source","destination","reordered","droppableId","provided","snapshot","isDraggingOver","droppableProps","innerRef","draggableId","console","log","toggleLang","isDragging","draggableProps","dragHandleProps","Checkbox","disableTypography","subList","subHeader","subListItem","subListItemText","TransliteratorLabel","inactive","toUserLikedTranslitsMap","RankTransliteratorSetting","userTransLits","setUserTransLits","updateState","reorderedTransliterors","JSON","parse","stringify","srcList","ACTIVE","INACTIVE","transilterators","t","subheader","tItem","DragIndicator","itemLabel","itemChild","listItemIcon","SettingItem","showExpandIcon","isItemExpanded","toggleItem","suffix","container","unmountOnExit","Divider","IDB_USER_PROFILE","itemText","formControl","fontSizePicker","SettingsLabel","MenuItemIcon","Settings","setUserToLS","Language","People","FormatSize","Palette","Colorize","ROOT","SEARCH","FAVOURITE","SETTINGS","path","exact","SettingsViewer","CHAPTER_NO","activeChapterNo","setActiveChapterNo","slideChapterIds","chId","render","match","url","ROUTE_REGEX","test","to","getRoutes","categories","favourites","includes","default","inputFilter","setInputFilter","routeMap","setRouteMap","findFilters","LITERATURE_NO","SECTION_NO","KURALS_CHAPTER","options","rootCategoryFinder","sectionRoute","matchPath","chapterRoute","kuralRoute","newFilter","Number","listen","getRouteValue","output","shouldAddToList","favIndex","findIndex","datetime","Date","addResults","searchTypes","forEach","kuralNo","literatureNo","sectionNo","setSearchKeyword","types","isInteger","searchNumber","findSuitableSearchTypes","setSearchStatus","ms","startLongPress","setStartLongPress","timerId","setTimeout","clearTimeout","start","stop","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","defaultValue","setItem","then","set","userPref","injectUserStyles","bodyStyles","document","body","setProperty","App","lsUser","remoteUser","isEqual","rootReducers","combineReducers","concat","firebase","firebaseReducer","firestoreReducer","devToolsEnhancer","composeWithDevTools","trace","AppStore","createStore","applyMiddleware","thunk","middleware","StoreProvider","configureStore","store","process","REACT_APP_API_KEY","REACT_APP_AUTH_DOMAIN","REACT_APP_DB_URL","REACT_APP_PROJECT_ID","REACT_APP_STORAGE_BUCKET","REACT_APP_MESSAGING_SENDER_ID","REACT_APP_FB_APP_ID","REACT_APP_MESUREMENT_ID","FIREBASE_CONFIG","apiKey","projectId","databaseURL","authDomain","storageBucket","messagingSenderId","appId","measurementId","initializeApp","enablePersistence","synchronizeTabs","catch","err","code","error","REDUX_FIREBASE_CONF","createFirestoreInstance","config","userProfile","useFirestoreForProfile","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","createMuiTheme","setLevel","ReactDOM","ThemeProvider","AppTheme","getElementById","URL","href","origin","addEventListener","fetch","headers","response","contentType","ready","unregister","reload","checkValidServiceWorker","getLiteratureNoFromChapterNo","isItemInRange","getSectionNoByLiteratureNo","secId","firestoreGetCacheFirst","empty","collection","indexSnapshot","getDocData","docs","doc","getAllBaseItems","lang","collectionKey","sectionSnapshot","Math","ceil","resType","LARGE","SMALL","KURAL","kuralSnapshotRef","KURAL_DETAIL","startKuralNo","TRANSLITERATOR","transliteratorSnapRef","userId","USER","where","FieldPath","documentId","limit","userDocRef","range","out","findCategoryRouteMap","join","convertCategoryRouteMapToString","transliteratorsMap","tMap","userLangs","getUserPreferedLanguages","userTMap","some","userLikedTransliterators","allowedTransliteratorIds","SECTION","USER_FAVOURITES","USER_SEARCH_HISTORY","LITERATURE","CHAPTER"],"mappings":"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","file":"static/js/main.7ca11bf1.chunk.js","sourcesContent":["export * from './reducer';\nexport * from './types';\nexport * from './actions';\n","import { InitIndexMapAction, KuralIndexMap } from './types';\n\nconst defaultState: KuralIndexMap = {\n  chapter: {},\n  section: {},\n  literature: {},\n  transliterator: {},\n  index: null,\n  kurals: {},\n};\n\nexport const KuralIndexReducer = (\n  state: KuralIndexMap = defaultState,\n  action: InitIndexMapAction\n): KuralIndexMap => {\n  if (action.type === 'init') {\n    return action.payload;\n  }\n  return state;\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\nimport { ThunkAction } from 'redux-thunk';\nimport {\n  getAllChapter,\n  getAllLiterature,\n  getAllSections,\n  getAllTransliterators,\n  getKuralIndex,\n  getKurals,\n  getUserPreferences,\n  Kural,\n  toBaseTypeMap,\n  Transliterator,\n} from 'src/lib/api';\n\nimport { AppState } from '../reducers';\nimport { setUser, SetUserAction } from './../settings';\nimport { InitIndexMapAction } from './types';\n\nexport const thunkInitKuralIndexMapAndUserPref = (\n  firestore: ExtendedFirestoreInstance\n): ThunkAction<void, AppState, unknown, InitIndexMapAction | SetUserAction> => {\n  return async (dispatch): Promise<void> => {\n    // TODO: fetch data only in userPrimary Language\n    // TODO: add userPreferences separate snapshot listener\n    const user = await getUserPreferences(firestore, 'rajeshsundaram');\n    const { primary } = user.preference.language;\n    const kuralIndex = await getKuralIndex(firestore);\n\n    const sectionMap = toBaseTypeMap(await getAllSections(firestore, primary));\n    const literatureMap = toBaseTypeMap(\n      await getAllLiterature(firestore, primary)\n    );\n    const chapterMap = toBaseTypeMap(await getAllChapter(firestore, primary));\n    const transliteratorMap = (await getAllTransliterators(firestore)).reduce(\n      (oldVal, t1) => ({ ...oldVal, [t1.id]: t1 }),\n      {}\n    ) as Record<number, Transliterator>;\n    const kuralsMap = Object.entries(\n      await getKurals(firestore, primary)\n    ).reduce(\n      (oldVal, [k, v]) => ({\n        ...oldVal,\n        [k]: ({ id: k, value: v } as unknown) as Kural,\n      }),\n      {}\n    ) as Record<number, Kural>;\n    dispatch(setUser(user));\n    dispatch({\n      type: 'init',\n      payload: {\n        section: sectionMap,\n        chapter: chapterMap,\n        literature: literatureMap,\n        index: kuralIndex,\n        transliterator: transliteratorMap,\n        kurals: kuralsMap,\n      },\n    });\n  };\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\nimport { ThunkAction } from 'redux-thunk';\nimport {\n  BackgroundColorItem,\n  FontSizeType,\n  updateUserPreference,\n  User,\n  UserPreference,\n} from 'src/lib/api';\n\nimport { AppState } from '../reducers';\n\nexport type SetUserAction = { type: 'SetUser'; payload: User };\nexport type UpdateSettingsAction = {\n  type: 'UpdateSettings';\n  payload: Partial<UserPreference>;\n};\ntype SettingsActionTypes = SetUserAction | UpdateSettingsAction;\nexport const SETTINGS_STORAGE = 'settings';\n\nexport const updateUserFSAsync = (\n  firestore: ExtendedFirestoreInstance,\n  user: User\n): ThunkAction<void, AppState, unknown, SetUserAction> => {\n  return async (dispatch) => {\n    dispatch(setUser(user));\n    await updateUserPreference(firestore, user);\n  };\n};\n\nexport const setUser = (user: User): SetUserAction => ({\n  type: 'SetUser',\n  payload: user,\n});\n\nexport const applyPreference = (\n  pref: Partial<UserPreference>\n): UpdateSettingsAction => {\n  return {\n    type: 'UpdateSettings',\n    payload: pref,\n  };\n};\n\nexport const DEFAULT_COLORS: string[] = [\n  'rgb(29, 161, 242)',\n  'rgb(224, 36, 94)',\n  'rgb(23, 191, 99)',\n];\nexport const DEFAULT_BACKGROUND: BackgroundColorItem[] = [\n  {\n    label: 'Default',\n    color: 'rgba(255,255,255,1.00)',\n  },\n  {\n    label: 'Dim',\n    color: 'rgb(21, 32, 43)',\n  },\n  {\n    label: 'Lights out',\n    color: 'rgb(0, 0, 0)',\n  },\n];\n\nexport const ANONYOMOUS_USER: User = {\n  id: 'anonymous',\n  favorites: [],\n  preference: {\n    display: {\n      color: DEFAULT_COLORS[0],\n      background: DEFAULT_BACKGROUND[0],\n    },\n    language: {\n      primary: 'ta',\n      secondary: [],\n    },\n    fontSizeType: FontSizeType.MEDIUM,\n  },\n};\nexport const PreferenceReducer = (\n  settings = ANONYOMOUS_USER,\n  action: SettingsActionTypes\n): User => {\n  switch (action.type) {\n    case 'SetUser':\n      return action.payload;\n    case 'UpdateSettings':\n      return {\n        ...settings,\n        preference: { ...settings.preference, ...action.payload },\n      };\n    default:\n      return settings;\n  }\n};\n","import { useHistory } from 'react-router-dom';\n\ntype useNavigationType = () => [(route: string) => () => void];\n\nexport const useNavigation: useNavigationType = () => {\n  const history = useHistory();\n  const navigateTo = (route: string) => {\n    return (): void => {\n      history.push(route);\n    };\n  };\n  return [navigateTo];\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport React from 'react';\n\nimport { useSelector } from 'react-redux';\n\nimport { AppState } from '../../state';\nimport {\n  BaseType,\n  Category,\n  fillRange,\n  getKuralIdsOfChapter,\n  isCategoryValidErr,\n  RootCategory,\n} from '../api';\n\ntype useSubCategoryType = (\n  category?: RootCategory,\n  id?: number,\n  resultCategory?: Category\n) => [BaseType[], (id: number) => BaseType[], (id: number) => BaseType[]];\nexport const useSubCategory: useSubCategoryType = (\n  category,\n  id,\n  resultCategory\n) => {\n  if (id && category && resultCategory) {\n    if (category === resultCategory) {\n      throw new Error('Bad input');\n    }\n    isCategoryValidErr(category, id);\n  }\n  const [result, setResult] = React.useState<BaseType[]>([]);\n  const KURAL_INDEX = useSelector((st: AppState) => st.kuralIndexMap);\n\n  const getLiteraturesBySection = React.useCallback(\n    (sectionId: number): BaseType[] => {\n      const { literature: LITERATURE_MAP, index: INDEX_MAP } = KURAL_INDEX;\n      isCategoryValidErr('section', sectionId);\n      return fillRange(INDEX_MAP!!.section[sectionId].litIndex).map(\n        (k) => LITERATURE_MAP[k]\n      );\n    },\n    [KURAL_INDEX]\n  );\n\n  const getChaptersFromLiterature = React.useCallback(\n    (litId: number): BaseType[] => {\n      const { chapter: CHAPTER_MAP, index: INDEX_MAP } = KURAL_INDEX;\n      isCategoryValidErr('literature', litId);\n      return fillRange(INDEX_MAP!!.litChapMap[litId]).map(\n        (c) => CHAPTER_MAP[c]\n      );\n    },\n    [KURAL_INDEX]\n  );\n\n  React.useEffect(() => {\n    if (id && category === 'chapter' && resultCategory === 'kural') {\n      setResult(getKuralIdsOfChapter(id).map((kId) => KURAL_INDEX.kurals[kId]));\n    }\n  }, [KURAL_INDEX.kurals, category, id, resultCategory]);\n\n  React.useEffect(() => {\n    if (!result.length && id && resultCategory !== 'kural') {\n      const { index: INDEX_MAP } = KURAL_INDEX;\n      if (INDEX_MAP) {\n        if (category === 'literature' && resultCategory === 'chapter') {\n          setResult(getChaptersFromLiterature(id));\n        } else if (category === 'section' && resultCategory === 'literature') {\n          setResult(getLiteraturesBySection(id));\n        }\n      }\n    }\n  }, [\n    result.length,\n    category,\n    resultCategory,\n    id,\n    KURAL_INDEX,\n    getLiteraturesBySection,\n    getChaptersFromLiterature,\n  ]);\n\n  return [result, getLiteraturesBySection, getChaptersFromLiterature];\n};\n","/* eslint-disable no-fallthrough */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { useSelector } from 'react-redux';\n\nimport { AppState } from '../../state';\nimport { RootCategory, BaseType, getCategoryIds } from '../api';\n\ntype getItemType = (chapterNo: number) => BaseType | null;\ntype getCategoryIdsType = (\n  key: number\n) => Partial<Record<RootCategory, number>>;\nexport type useItemType = (\n  category: RootCategory\n) => [getItemType, getCategoryIdsType];\n\nexport const useBaseItem: useItemType = (category) => {\n  const { [category]: items, index: INDEX_MAP } = useSelector(\n    (st: AppState) => st.kuralIndexMap\n  );\n  const getItem: getItemType = (itemNo) => items[itemNo] || null;\n  const getCategoryRoute: getCategoryIdsType = (categoryId) =>\n    getCategoryIds(INDEX_MAP!!, category, categoryId);\n  return [getItem, getCategoryRoute];\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport { ExpandMore } from '@material-ui/icons';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    color: 'inherit',\n    transform: 'rotate(0deg)',\n    transition: 'all 0.2s ease',\n    '&.is-expanded': {\n      transform: 'rotate(-180deg)',\n    },\n  },\n}));\n\ntype ExpandedIconProps = {\n  className?: string;\n  isExpanded?: boolean;\n  style?: React.CSSProperties;\n};\n\nexport const AnimatedExpandedIcon: React.FC<ExpandedIconProps> = ({\n  isExpanded,\n  className,\n  style,\n}: ExpandedIconProps) => {\n  const classes = useStyles();\n  return (\n    <ExpandMore\n      style={style}\n      className={clsx(classes.icon, isExpanded && 'is-expanded', className)}\n    />\n  );\n};\n","import * as React from 'react';\n\nimport { ListItem, ListItemText, makeStyles } from '@material-ui/core';\nimport { TreeMenuItem } from 'react-simple-tree-menu';\n\nimport { AnimatedExpandedIcon } from '../common/AnimatedExpandedIcon';\n\nconst useStyles = makeStyles((theme) => ({\n  listItem: {\n    cursor: 'pointer',\n    position: 'relative',\n    borderRadius: theme.spacing(2),\n    WebkitTapHighlightColor: 'transparent',\n    border: 'none',\n    '&.level-0': {\n      paddingLeft: theme.spacing(2),\n    },\n    '&.level-1': {\n      paddingLeft: theme.spacing(3),\n    },\n    '&.level-2': {\n      paddingLeft: theme.spacing(4),\n    },\n    '&.on-focus': {\n      color: theme.palette.secondary.main,\n    },\n    '&.is-active': {\n      color: theme.palette.primary.main,\n      border: '2px solid',\n    },\n  },\n  listIcon: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n}));\n\nexport const TreeListItem: React.FC<TreeMenuItem> = ({\n  level = 0,\n  hasNodes,\n  isOpen,\n  label,\n  toggleNode,\n  focused,\n  onClick,\n  active,\n  ...props\n}: TreeMenuItem) => {\n  const classes = useStyles();\n\n  const toggleCategory = (ev: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    hasNodes && toggleNode && toggleNode();\n    onClick(ev);\n  };\n  return (\n    <ListItem\n      onClick={toggleCategory}\n      className={`${classes.listItem} level-${level} ${focused && 'on-focus'} ${\n        active && 'is-active'\n      }`}>\n      <ListItemText primary={label}></ListItemText>\n      {hasNodes && (\n        <div className={classes.listIcon}>\n          <AnimatedExpandedIcon isExpanded={isOpen} />\n        </div>\n      )}\n    </ListItem>\n  );\n};\n","/* eslint-disable react/prop-types */\nimport React from 'react';\n\nimport { List, makeStyles } from '@material-ui/core';\nimport { debug } from 'loglevel';\nimport TreeMenu, { TreeMenuProps } from 'react-simple-tree-menu';\n\nimport { TreeListItem } from './category-list-item';\n\nconst useStyles = makeStyles((theme) => ({\n  treeMenuContainer: {\n    '&>div': {\n      outlineStyle: 'none',\n    },\n  },\n  list: {\n    padding: `0px ${theme.spacing(1)}px`,\n  },\n  listItem: {\n    cursor: 'pointer',\n    position: 'relative',\n    borderRadius: theme.spacing(2),\n    WebkitTapHighlightColor: 'transparent',\n    border: 'none',\n    '&.level-0': {\n      paddingLeft: theme.spacing(2),\n    },\n    '&.level-1': {\n      paddingLeft: theme.spacing(3),\n    },\n    '&.level-2': {\n      paddingLeft: theme.spacing(4),\n    },\n    '&.on-focus': {\n      color: theme.palette.secondary.main,\n    },\n    '&.is-active': {\n      color: theme.palette.primary.main,\n      border: '2px solid',\n    },\n  },\n  listIcon: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    transition: 'all 0.2s ease',\n    transform: 'rotate(0deg)',\n    '&.is-open': {\n      transform: 'rotate(-180deg)',\n    },\n  },\n}));\n\ntype CategoryViewerProps = {\n  className?: string;\n} & TreeMenuProps;\n\nexport const CategoryViewer: React.FC<CategoryViewerProps> = ({\n  className,\n  ...props\n}: CategoryViewerProps) => {\n  const classes = useStyles();\n  debug('CategoryViewer renders');\n  return (\n    <div className={classes.treeMenuContainer}>\n      <TreeMenu {...props}>\n        {({ items }) => (\n          <List className={classes.list}>\n            {items.map(({ key, ...itemProps }) => (\n              <TreeListItem key={key} {...itemProps} />\n            ))}\n          </List>\n        )}\n      </TreeMenu>\n    </div>\n  );\n};\n","/* eslint-disable react/prop-types */\nimport React from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { TreeNodeInArray, Item } from 'react-simple-tree-menu';\n\nimport { useSubCategory } from '../../../lib/hooks';\nimport { ROUTE_CONSTANTS } from '../../../routes';\nimport { AppState } from '../../../state';\nimport { CategoryViewer } from './category-viewer';\n\ntype CategoryViewerContainerProps = {\n  className?: string;\n};\n\nexport const CategoryViewerContainer: React.FC<CategoryViewerContainerProps> = (\n  props: CategoryViewerContainerProps\n) => {\n  const history = useHistory();\n  const queryParams = new URLSearchParams(history.location.search);\n  const chapterQueryParam = queryParams.get('chapter');\n  const routeKey = history.location.pathname.replace(\n    // eslint-disable-next-line no-useless-escape\n    new RegExp(`${ROUTE_CONSTANTS.LIST_CATEGORY}(\\/)?`),\n    ''\n  );\n  const getInitialOpenNodes = () => {\n    const nodes = routeKey\n      .split('/')\n      .map((it) => routeKey.substring(0, routeKey.indexOf(it) + it.length));\n    if (nodes.length === 2 && nodes[0] === nodes[1]) {\n      nodes[1] = `${nodes[0]}/${nodes[1]}`;\n    }\n    return nodes;\n  };\n\n  const sections = useSelector((st: AppState) => st.kuralIndexMap.section);\n  const [, getLiteraturesBySection, getChaptersByLiterature] = useSubCategory();\n  const TREE_DATA: TreeNodeInArray[] = Object.values(sections).map(\n    (s, sIndex) => ({\n      key: s.id.toString(),\n      label: s.value,\n      index: sIndex,\n      nodes: getLiteraturesBySection(s.id).map((lit, litIndex) => ({\n        key: lit.id.toString(),\n        label: lit.value,\n        index: litIndex,\n        nodes: getChaptersByLiterature(lit.id).map((ch, chIndex) => ({\n          key: ch.id.toString(),\n          label: ch.value,\n          index: chIndex,\n        })),\n      })),\n    })\n  );\n  const onItemClick = (item: Item) => {\n    const newRoute = `${ROUTE_CONSTANTS.LIST_CATEGORY}/${item.key}`;\n    if (!item.hasNodes) {\n      const lastItemSeparator = item.key.lastIndexOf('/');\n      const chapter = item.key.substring(lastItemSeparator + 1);\n      const literatureRoute = item.key.substring(0, lastItemSeparator);\n      const currentRoute = `${ROUTE_CONSTANTS.LIST_CATEGORY}/${literatureRoute}?chapter=${chapter}`;\n      history.replace(currentRoute);\n      history.push(newRoute);\n    } else {\n      history.replace(newRoute);\n    }\n  };\n  return (\n    <CategoryViewer\n      initialActiveKey={routeKey}\n      initialFocusKey={\n        chapterQueryParam ? `${routeKey}/${chapterQueryParam}` : routeKey\n      }\n      initialOpenNodes={getInitialOpenNodes()}\n      onClickItem={onItemClick}\n      data={TREE_DATA}\n      hasSearch={false}\n    />\n  );\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport ListItem from '@material-ui/core/ListItem';\nimport clsx from 'clsx';\nimport { Kural } from 'src/lib/api';\n\nconst useStyles = makeStyles((theme) => ({\n  listItem: {\n    display: 'flex',\n    flexDirection: 'column',\n    userSelect: 'none',\n    alignItems: 'start',\n    [theme.breakpoints.up('sm')]: {\n      cursor: 'pointer',\n    },\n  },\n  badgeContainer: {\n    background: theme.palette.primary.main,\n    color: 'white',\n    height: '1em',\n    fontSize: '0.6em',\n    lineHeight: '0.8em',\n    borderRadius: '1em',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: '2px 6px',\n    minWidth: '1em',\n  },\n  kuralWrapper: {\n    width: '100%',\n  },\n}));\n\ntype KuralCardProps = {\n  kural: Kural;\n  onClick?: (kural: Kural) => void;\n  className?: string;\n  showBadge?: boolean;\n  /**\n   * The component used for the root node.\n   * e.g) a, li\n   */\n  componentType?: 'div' | 'span';\n};\nconst KuralCard: React.FC<KuralCardProps> = (props: KuralCardProps) => {\n  const classes = useStyles();\n\n  if (!props.kural || !props.kural.value) {\n    return null;\n  }\n  return (\n    <ListItem\n      className={props.className}\n      classes={{ root: clsx(classes.listItem) }}\n      component={props.componentType || 'li'}>\n      {props.showBadge && (\n        <div className={classes.badgeContainer}>{props.kural.id}</div>\n      )}\n      <div\n        onClick={(): void => props.onClick && props.onClick(props.kural)}\n        className={classes.kuralWrapper}\n        dangerouslySetInnerHTML={{\n          __html: props.kural.value.replace('\\n', '<br>'),\n        }}></div>\n    </ListItem>\n  );\n};\n\nexport default KuralCard;\n","import React from 'react';\n\nimport { makeStyles, ListItem, Chip, List } from '@material-ui/core';\nimport { Kural } from 'src/lib/api';\nimport { useKuralDetail } from 'src/lib/hooks';\n\nimport KuralCard from './KuralCard';\n\nconst useStyles = makeStyles((theme) => ({\n  transliteratorList: {\n    cursor: 'grab',\n    userSelect: 'none',\n    padding: theme.spacing(1),\n    [theme.breakpoints.only('xs')]: {\n      minHeight: 400,\n    },\n    '& li:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  kural: {\n    padding: theme.spacing(1),\n    borderBottom: 'unset',\n    color: 'brown',\n    fontWeight: 600,\n    '& .kural-badge': {\n      display: 'none',\n    },\n  },\n  transliteration: {\n    padding: 0,\n    flexDirection: 'column',\n    alignItems: 'self-end',\n\n    '& .transliterator-name': {\n      fontSize: '0.7em',\n      height: '1.5em',\n    },\n    '& .content': {\n      fontSize: '0.9em',\n      paddingTop: theme.spacing(0.5),\n      paddingBottom: theme.spacing(0.5),\n      textAlign: 'justify',\n      WebkitTextStrokeWidth: '0.2px',\n      WebkitTextStroke: 'thin',\n      letterSpacing: 1,\n    },\n  },\n}));\n\ntype KuralDetailProps = {\n  className?: string;\n  kural: Kural | number;\n};\n\nconst KuralDetail: React.FC<KuralDetailProps> = (props: KuralDetailProps) => {\n  const classes = useStyles();\n  const [kural, kuralDetail, transliterators] = useKuralDetail(props.kural);\n  return (\n    <>\n      {kural && (\n        <KuralCard\n          kural={kural}\n          className={classes.kural}\n          componentType='div'></KuralCard>\n      )}\n      <List\n        className={props.className}\n        classes={{ root: classes.transliteratorList }}\n        {...props}>\n        {kuralDetail &&\n          transliterators.map(({ id: transliteratorId, name }) => (\n            <ListItem\n              key={transliteratorId}\n              className={classes.transliteration}>\n              <Chip\n                size='small'\n                label={name}\n                color={'primary'}\n                className={'transliterator-name'}\n              />\n              <div className={'content'}>{kuralDetail[transliteratorId]}</div>\n            </ListItem>\n          ))}\n      </List>\n    </>\n  );\n};\n\nexport default KuralDetail;\n","import * as React from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { AppState } from 'src/state';\n\nimport { getUserTransliterators, isCategoryValidErr, Kural } from '../api';\nimport { getKuralDetail, KuralDetail, Transliterator } from '../api';\n\ntype useKuralDetailType = (\n  kural: Kural | number\n) => [Kural | null, KuralDetail | null, Transliterator[]];\n\nexport const useKuralDetail: useKuralDetailType = (kuralInput) => {\n  const firestore = useFirestore();\n  const user = useSelector((st: AppState) => st.user);\n  const { primary: PRIMARY_LANG } = user.preference.language;\n  const TRANSLITERATORS = useSelector(\n    (st: AppState) => st.kuralIndexMap.transliterator\n  );\n  const KURALS = useSelector((st: AppState) => st.kuralIndexMap.kurals);\n  const [kural, setKural] = React.useState<Kural | null>(null);\n  const [kuralDetail, setKuralDetail] = React.useState<KuralDetail | null>(\n    null\n  );\n  const [userPreferedTranslits] = getUserTransliterators(user, TRANSLITERATORS);\n\n  React.useEffect(() => {\n    (async (): Promise<void> => {\n      if (typeof kuralInput === 'number') {\n        isCategoryValidErr('kural', kuralInput);\n        setKural(KURALS[kuralInput]);\n        setKuralDetail(await getKuralDetail(firestore, kuralInput));\n      } else {\n        setKural(kuralInput);\n        setKuralDetail(await getKuralDetail(firestore, kuralInput.id));\n      }\n    })();\n  }, [firestore, kuralInput, PRIMARY_LANG, KURALS]);\n  return [kural, kuralDetail, userPreferedTranslits];\n};\n","import React from 'react';\n\nimport { makeStyles, Chip } from '@material-ui/core';\nimport { Favorite } from '@material-ui/icons';\nimport clsx from 'clsx';\nimport {\n  useRoute,\n  useNavigation,\n  useLongPress,\n  RouteProp,\n} from 'src/lib/hooks';\n\nconst useStyles = makeStyles((theme) => ({\n  routeContainer: {\n    display: 'flex',\n  },\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'start',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  chipRoot: {\n    padding: '0px 0.6em',\n    fontSize: '0.7rem',\n    height: '1.3rem',\n    margin: `0 ${theme.spacing(1 / 2)}px ${theme.spacing(1 / 2)}px 0`,\n    [theme.breakpoints.up('sm')]: {\n      maxWidth: 200,\n    },\n  },\n  favoriteIcon: {\n    width: '1rem',\n    height: '1rem',\n    margin: 0,\n  },\n}));\n\nexport type KuralChipItem = {\n  label: string;\n  navRoute: string;\n  color: 'default' | 'primary' | 'secondary';\n};\ntype RouteViewerProps = {\n  className?: string;\n  renderRight?: React.ReactNode;\n};\n\ntype RouteChipProps = {\n  route: RouteProp;\n  onLongPress?: (route: RouteProp) => void;\n};\n\nconst RouteChip: React.FC<RouteChipProps> = ({\n  route,\n  onLongPress,\n}: RouteChipProps) => {\n  const classes = useStyles();\n  const [navigateTo] = useNavigation();\n  const longPressEventHandlers = useLongPress(() => {\n    onLongPress && onLongPress(route);\n  });\n  // TODO: longpress should not trigger click event\n  return (\n    <Chip\n      {...(route.isFavourite\n        ? { icon: <Favorite className={classes.favoriteIcon} /> }\n        : {})}\n      {...longPressEventHandlers}\n      size='small'\n      label={route.value}\n      color={'primary'}\n      onClick={(): void => {\n        route.route && navigateTo(route.route)();\n      }}\n      style={{ backgroundColor: route.color }}\n      classes={{ root: classes.chipRoot }}\n    />\n  );\n};\n\nconst RouteViewer: React.FC<RouteViewerProps> = (props: RouteViewerProps) => {\n  const classes = useStyles();\n  const [, routes, toggleRouteFavourite] = useRoute({});\n  return (\n    <div className={clsx(classes.routeContainer, props.className)}>\n      <div className={classes.root}>\n        {routes.map((item, index) => (\n          <RouteChip\n            route={item}\n            key={index}\n            onLongPress={(route: RouteProp) => toggleRouteFavourite(route)}\n          />\n        ))}\n      </div>\n      {props.renderRight}\n    </div>\n  );\n};\n\nexport default RouteViewer;\n","import React from 'react';\n\nimport { Container, makeStyles } from '@material-ui/core';\nimport { debug } from 'loglevel';\nimport { useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport {\n  findCategoryRouteMapString,\n  isCategoryValid,\n  ITEMS_COUNT_MAP,\n} from 'src/lib/api';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\nimport SwiperCore, { Virtual, Keyboard } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport 'swiper/swiper.scss';\n\nimport KuralDetail from './KuralDetail';\nimport RouteViewer from './RouteViewer';\n\nSwiperCore.use([Virtual, Keyboard]);\n\ntype KuralDetailViewerProps = {\n  className?: string;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  routes: {\n    padding: theme.spacing(1),\n  },\n}));\n\nconst KuralDetailViewer: React.FC<KuralDetailViewerProps> = (\n  props: KuralDetailViewerProps\n) => {\n  const history = useHistory();\n  const classes = useStyles();\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const params = useParams<{ kural: string }>();\n  const KURAL_NO = parseInt(params.kural);\n  const [activeKuralNo, setActiveKuralNo] = React.useState(KURAL_NO);\n  const slideKuralIds = Array.from(Array(ITEMS_COUNT_MAP.kural).keys()).map(\n    (i) => i + 1\n  );\n  const renderSlide = (kId: number, index: number) => (\n    <SwiperSlide key={kId} virtualIndex={index}>\n      <KuralDetail kural={kId} />\n    </SwiperSlide>\n  );\n\n  React.useEffect(() => {\n    if (INDEX_MAP) {\n      const newRoute = `${\n        ROUTE_CONSTANTS.LIST\n      }/${findCategoryRouteMapString(INDEX_MAP, { kural: activeKuralNo })}`;\n      debug('replace route to => ', newRoute);\n      history.replace(newRoute);\n    }\n  }, [INDEX_MAP, activeKuralNo, history]);\n\n  if (!isCategoryValid('kural', KURAL_NO)) {\n    return null;\n  }\n  return (\n    <>\n      <Container disableGutters className={classes.routes}>\n        <RouteViewer />\n      </Container>\n      <Swiper\n        autoHeight={true}\n        keyboard={true}\n        grabCursor={true}\n        initialSlide={KURAL_NO - 1}\n        spaceBetween={10}\n        slidesPerView={1}\n        allowSlideNext={\n          slideKuralIds[slideKuralIds.length - 1] !== activeKuralNo\n        }\n        virtual\n        onTransitionEnd={(swiper) => {\n          setActiveKuralNo(swiper.activeIndex + 1);\n        }}>\n        {slideKuralIds.map((kId, index) => renderSlide(kId, index))}\n      </Swiper>\n    </>\n  );\n};\n\nexport default KuralDetailViewer;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport List from '@material-ui/core/List';\nimport { useSelector } from 'react-redux';\nimport { findCategoryRouteMapString, Kural } from 'src/lib/api';\nimport { useNavigation } from 'src/lib/hooks';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\n\nimport KuralCard from './KuralCard';\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    padding: theme.spacing(1),\n    paddingTop: '0px',\n    '& li:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  kuralCard: {\n    padding: 0,\n  },\n}));\n\ntype ListKuralCardProps = {\n  kurals: Kural[];\n};\n\nexport const ListKuralCard: React.FC<ListKuralCardProps> = (\n  props: ListKuralCardProps\n) => {\n  const classes = useStyles();\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const [navigateTo] = useNavigation();\n  const openKuralDetail = (kural: Kural): void =>\n    navigateTo(\n      `${ROUTE_CONSTANTS.LIST}/${findCategoryRouteMapString(INDEX_MAP!!, {\n        kural: kural.id,\n      })}`\n    )();\n  return (\n    <List className={classes.list}>\n      {props.kurals.map((k, i) => (\n        <KuralCard\n          showBadge={true}\n          className={classes.kuralCard}\n          key={i}\n          kural={k}\n          onClick={openKuralDetail}\n        />\n      ))}\n    </List>\n  );\n};\n","import React from 'react';\n\nimport { useSubCategory } from '../../../lib/hooks';\nimport { ListKuralCard } from './ListKuralCard';\n\ntype ListKuralsOfChapterProps = {\n  className?: string;\n  chapterNo: number;\n};\n\nexport const ListKuralsOfChapter: React.FC<ListKuralsOfChapterProps> = (\n  props: ListKuralsOfChapterProps\n) => {\n  const [kurals] = useSubCategory('chapter', props.chapterNo, 'kural');\n  return <ListKuralCard kurals={kurals} />;\n};\n","import React from 'react';\n\nimport { Container, makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { debug } from 'loglevel';\nimport { useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { findCategoryRouteMapString, ITEMS_COUNT_MAP } from 'src/lib/api';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\nimport SwiperCore, { Virtual, Keyboard } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport 'swiper/swiper.scss';\n\nimport { ListKuralsOfChapter } from './ListKuralsOfChapter';\nimport RouteViewer from './RouteViewer';\n\nSwiperCore.use([Virtual, Keyboard]);\n\nconst useStyles = makeStyles((theme) => ({\n  routes: {\n    padding: theme.spacing(1),\n  },\n  chapterKuralsList: {},\n}));\n\ntype KuralListSwipeableProps = {\n  className?: string;\n};\n\nexport const KuralListSwipeable: React.FC<KuralListSwipeableProps> = (\n  props: KuralListSwipeableProps\n) => {\n  const classes = useStyles();\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const history = useHistory();\n  const { chapter } = useParams<{ chapter: string }>();\n  const CHAPTER_NO = parseInt(chapter);\n  const [activeChapterNo, setActiveChapterNo] = React.useState(CHAPTER_NO);\n  const slideChapterIds = Array.from(Array(ITEMS_COUNT_MAP.chapter).keys()).map(\n    (i) => i + 1\n  );\n  React.useEffect(() => {\n    if (INDEX_MAP) {\n      const newRoute = `${\n        ROUTE_CONSTANTS.LIST\n      }/${findCategoryRouteMapString(INDEX_MAP, { chapter: activeChapterNo })}`;\n      debug('replace route to => ', newRoute);\n      history.replace(newRoute);\n    }\n  }, [INDEX_MAP, activeChapterNo, history]);\n  const renderSlide = (chId: number, index: number) => (\n    <SwiperSlide key={chId} virtualIndex={index}>\n      <ListKuralsOfChapter chapterNo={chId} />\n    </SwiperSlide>\n  );\n  return (\n    <div className={clsx(classes.chapterKuralsList, props.className)}>\n      <Container disableGutters className={classes.routes}>\n        <RouteViewer />\n      </Container>\n      <Swiper\n        keyboard={true}\n        grabCursor={true}\n        initialSlide={CHAPTER_NO!! - 1}\n        spaceBetween={10}\n        slidesPerView={1}\n        allowSlideNext={\n          slideChapterIds[slideChapterIds.length - 1] !== activeChapterNo\n        }\n        virtual\n        onTransitionEnd={(swiper) => {\n          setActiveChapterNo(swiper.activeIndex + 1);\n        }}>\n        {slideChapterIds.map((chId, index) => renderSlide(chId, index))}\n      </Swiper>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  makeStyles,\n} from '@material-ui/core';\nimport { DragIndicator } from '@material-ui/icons';\nimport clsx from 'clsx';\nimport {\n  DragDropContext,\n  Droppable,\n  Draggable,\n  DropResult,\n  ResponderProvided,\n} from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport {\n  getUserTransliterators,\n  Transliterator,\n  User,\n  updateUserPreference,\n} from 'src/lib/api';\nimport { AppState } from 'src/state';\nimport { applyPreference } from 'src/state/settings';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  subList: {\n    '&.dragging-over': {\n      backgroundColor: 'lightblue',\n    },\n  },\n  subHeader: {\n    textAlign: 'left',\n    lineHeight: '1.5em',\n  },\n  subListItem: {\n    '&.is-dragging': {\n      backgroundColor: 'red',\n    },\n  },\n  subListItemText: {\n    fontSize: '0.8em',\n  },\n}));\n\ntype RankTransliteratorSettingProps = {\n  user: User;\n  className?: string;\n};\n\nenum TransliteratorSectionType {\n  ACTIVE = 'active',\n  INACTIVE = 'inactive',\n}\ntype TransliteratorSectionMapType = Record<\n  TransliteratorSectionType,\n  Transliterator[]\n>;\n\nconst TransliteratorLabel: Record<TransliteratorSectionType, string> = {\n  active: 'Active',\n  inactive: 'InActive',\n};\n\nconst toUserLikedTranslitsMap = (\n  user: User,\n  transliterators: Record<number, Transliterator>\n): TransliteratorSectionMapType => {\n  const [activeList, inActiveList] = getUserTransliterators(\n    user,\n    transliterators\n  );\n  return { active: activeList, inactive: inActiveList };\n};\n\nexport const RankTransliteratorSetting: React.FC<RankTransliteratorSettingProps> = (\n  props: RankTransliteratorSettingProps\n) => {\n  const classes = useStyles();\n  const firestore = useFirestore();\n  const dispatch = useDispatch();\n  const transliterators = useSelector(\n    (st: AppState) => st.kuralIndexMap.transliterator\n  );\n  const [userTransLits, setUserTransLits] = React.useState(\n    toUserLikedTranslitsMap(props.user, transliterators)\n  );\n  React.useEffect(() => {\n    setUserTransLits(toUserLikedTranslitsMap(props.user, transliterators));\n  }, [props.user, transliterators]);\n\n  const onDragEnd = (\n    { source, destination }: DropResult,\n    _: ResponderProvided\n  ): void => {\n    if (!destination) {\n      return;\n    }\n    let updateState = false;\n    const reorderedTransliterors = JSON.parse(\n      JSON.stringify(userTransLits)\n    ) as TransliteratorSectionMapType;\n    const srcList =\n      reorderedTransliterors[source.droppableId as TransliteratorSectionType];\n    if (\n      srcList.length <= 1 &&\n      source.droppableId === TransliteratorSectionType.ACTIVE &&\n      destination.droppableId === TransliteratorSectionType.INACTIVE\n    ) {\n      // Note: Don't allow active transliterators to go empty.\n      return;\n    }\n\n    if (source.droppableId !== destination.droppableId) {\n      const destList =\n        reorderedTransliterors[\n          destination.droppableId as TransliteratorSectionType\n        ];\n      destList.splice(destination.index, 0, srcList[source.index]);\n      srcList.splice(source.index, 1);\n      updateState = true;\n    } else if (source.index !== destination.index) {\n      srcList.splice(destination.index, 0, ...srcList.splice(source.index, 1));\n      updateState = true;\n    }\n    if (updateState) {\n      const userPreference = {\n        ...props.user.preference,\n        transilterators: reorderedTransliterors.active.map((t) => t.id),\n      };\n      dispatch(applyPreference(userPreference));\n      updateUserPreference(firestore, {\n        ...props.user,\n        preference: userPreference,\n      });\n    }\n  };\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      {Object.entries(userTransLits).map(([key, list]) => (\n        <Droppable droppableId={key} key={key}>\n          {(provided, snapshot) => (\n            <List\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              className={clsx(\n                classes.subList,\n                snapshot.isDraggingOver && 'dragging-over'\n              )}\n              subheader={\n                <ListSubheader component='div' className={classes.subHeader}>\n                  {TransliteratorLabel[key as TransliteratorSectionType]}\n                </ListSubheader>\n              }>\n              {list.map((tItem, index) => (\n                <Draggable\n                  key={tItem.id}\n                  draggableId={tItem.id.toString()}\n                  index={index}>\n                  {(provided, snapshot) => (\n                    <ListItem\n                      className={clsx(\n                        classes.subListItem,\n                        snapshot.isDragging && 'is-dragging'\n                      )}\n                      style={provided.draggableProps.style}\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}>\n                      <ListItemIcon>\n                        <DragIndicator className='is-app-color' />\n                      </ListItemIcon>\n                      <ListItemText\n                        disableTypography\n                        primary={tItem.name}\n                        className={classes.subListItemText}\n                      />\n                    </ListItem>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </List>\n          )}\n        </Droppable>\n      ))}\n    </DragDropContext>\n  );\n};\n","import React from 'react';\n\nimport { useScrollTrigger, Slide } from '@material-ui/core';\n\ntype HideOnScrollProps = {\n  direction: 'left' | 'right' | 'up' | 'down';\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  window?: any;\n  children: React.ReactElement;\n};\n\nconst HideOnScroll: React.FC<HideOnScrollProps> = ({\n  children,\n  window,\n}: HideOnScrollProps) => {\n  const trigger = useScrollTrigger({ target: window ? window() : undefined });\n  return (\n    <Slide appear={false} direction='down' in={!trigger}>\n      {children}\n    </Slide>\n  );\n};\n\nexport default HideOnScroll;\n","import * as React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { debug } from 'loglevel';\n\nimport HideOnScroll from './HideOnScroll';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbar: {\n    padding: 0,\n    justifyContent: 'center',\n  },\n  avatar: {\n    color: 'white',\n    marginLeft: theme.spacing(1),\n    backgroundColor: theme.palette.primary.main,\n  },\n  actionsGroup: {},\n\n  iconButton: {\n    padding: '6px',\n    '& svg': {\n      fontSize: '2rem',\n    },\n  },\n}));\n\ntype MyAppBarProps = {\n  actions?: React.ReactNode;\n};\n\nconst MyAppBar: React.FC<MyAppBarProps> = (props: MyAppBarProps) => {\n  debug('MyAppBar');\n  const classes = useStyles();\n  return (\n    <>\n      <HideOnScroll direction='down' {...props}>\n        <AppBar color='transparent' elevation={0}>\n          <Toolbar className={classes.toolbar}>\n            {/* {renderLeftIcon()} */}\n            Kural\n            <div className={classes.actionsGroup}>{props.actions}</div>\n          </Toolbar>\n        </AppBar>\n      </HideOnScroll>\n      <Toolbar />\n    </>\n  );\n};\nexport default MyAppBar;\n","import React from 'react';\n\nimport { List, ListItem, makeStyles } from '@material-ui/core';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\n\nimport { BaseType } from '../../../lib/api';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  listItem: {\n    cursor: 'pointer',\n    display: 'grid',\n    gridTemplateColumns: '3em auto',\n  },\n  idWrap: {\n    display: 'flex',\n    alignItems: 'center',\n\n    color: theme.palette.primary.main,\n    '& > span': {\n      minWidth: '2em',\n      opacity: 0.5,\n      textAlign: 'center',\n    },\n    '& svg': {\n      position: 'relative',\n      left: '-4px',\n    },\n  },\n  labelWrap: {\n    fontSize: '1.2em',\n    paddingLeft: theme.spacing(1),\n    color: 'cadetblue',\n  },\n}));\n\ntype ListViewProps = {\n  className?: string;\n  items: BaseType[];\n  showDivider?: boolean;\n  onItemSelected: (item: BaseType) => void;\n};\n\nconst ListView: React.FC<ListViewProps> = (props: ListViewProps) => {\n  const classes = useStyles();\n  return (\n    <List className={props.className}>\n      {props.items.map((item) => (\n        <ListItem\n          classes={{ root: classes.listItem }}\n          divider={props.showDivider}\n          key={item.id}\n          onClick={(): void => props.onItemSelected(item)}>\n          <div className={classes.idWrap}>\n            <span>{item.id}</span>\n            <ArrowForwardIosIcon />\n          </div>\n          <div className={classes.labelWrap}>{item.value}</div>\n        </ListItem>\n      ))}\n    </List>\n  );\n};\n\nexport default ListView;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { BaseType, findCategoryRouteMapString } from '../../../lib/api';\nimport { useBaseItem, useNavigation } from '../../../lib/hooks';\nimport { ROUTE_CONSTANTS } from '../../../routes';\nimport { AppState } from '../../../state';\nimport ListView from '../common/ListView';\n\nconst useStyles = makeStyles((theme) => ({\n  chapFavorites: {\n    padding: 0,\n    '& li': {\n      paddingLeft: theme.spacing(0.5),\n      paddingRight: theme.spacing(0.5),\n    },\n  },\n}));\n\nexport interface ChapterFavListProps {\n  chapterIds: number[];\n}\n\nexport const ChapterFavList: React.FC<ChapterFavListProps> = (\n  props: ChapterFavListProps\n) => {\n  const classes = useStyles();\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const [getChapter] = useBaseItem('chapter');\n  const [navigateTo] = useNavigation();\n\n  const onChapterSelected = (item: BaseType): void => {\n    if (INDEX_MAP) {\n      navigateTo(\n        `${ROUTE_CONSTANTS.LIST}/${findCategoryRouteMapString(INDEX_MAP, {\n          chapter: item.id,\n        })}`\n      )();\n    }\n  };\n\n  return (\n    <>\n      {props.chapterIds.length && (\n        <ListView\n          className={classes.chapFavorites}\n          items={\n            props.chapterIds\n              .sort()\n              .map((ch) => getChapter(ch))\n              .filter((ch) => ch !== null) as BaseType[]\n          }\n          onItemSelected={onChapterSelected}\n        />\n      )}\n    </>\n  );\n};\n","import React from 'react';\n\nimport { List, ListSubheader, makeStyles } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport {\n  BaseType,\n  findCategoryRouteMapString,\n  findChapterNoFromKuralNo,\n} from '../../../lib/api';\nimport { useBaseItem, useNavigation } from '../../../lib/hooks';\nimport { ROUTE_CONSTANTS } from '../../../routes';\nimport { AppState } from '../../../state';\nimport KuralCard from './../kural/KuralCard';\n\nconst useStyles = makeStyles((theme) => ({\n  kural: {\n    padding: `0 0 0 ${theme.spacing(1)}px`,\n    '&:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n}));\n\nexport interface KuralFavListProps {\n  kuralIds: number[];\n}\n\nexport const KuralFavList: React.FC<KuralFavListProps> = (\n  props: KuralFavListProps\n) => {\n  const classes = useStyles();\n  const KURALS = useSelector((st: AppState) => st.kuralIndexMap.kurals);\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const [getChapter] = useBaseItem('chapter');\n  const [navigateTo] = useNavigation();\n  const [chapterKuralMap, setchapterKuralMap] = React.useState<\n    Record<number, BaseType[]>\n  >({});\n\n  const onChapterSelected = (item: BaseType): void => {\n    if (INDEX_MAP) {\n      navigateTo(\n        `${ROUTE_CONSTANTS.LIST}/${findCategoryRouteMapString(INDEX_MAP, {\n          chapter: item.id,\n        })}`\n      )();\n    }\n  };\n\n  const onKuralSelected = (item: BaseType): void => {\n    if (INDEX_MAP) {\n      navigateTo(\n        `${ROUTE_CONSTANTS.LIST}/${findCategoryRouteMapString(INDEX_MAP, {\n          kural: item.id,\n        })}`\n      )();\n    }\n  };\n\n  React.useEffect(() => {\n    const chapMap = props.kuralIds.reduce((chapMap, kId) => {\n      const chap = findChapterNoFromKuralNo(kId);\n      if (KURALS[kId] !== undefined) {\n        return {\n          ...chapMap,\n          [chap]: [...(chapMap[chap] || []), KURALS[kId]],\n        };\n      }\n      return chapMap;\n    }, {} as Record<number, BaseType[]>);\n    setchapterKuralMap(chapMap);\n  }, [props.kuralIds, KURALS]);\n\n  return (\n    <>\n      {Object.keys(chapterKuralMap).map((chapId) => {\n        const chapterInfo = getChapter(parseInt(chapId));\n        return (\n          <List\n            component='div'\n            className='sub-list'\n            key={chapId}\n            disablePadding>\n            {chapterInfo && (\n              <ListSubheader\n                className='sub-header'\n                disableSticky\n                onClick={(): void => onChapterSelected(chapterInfo)}>\n                {chapterInfo.value}\n              </ListSubheader>\n            )}\n\n            {chapterKuralMap[parseInt(chapId)].map((item: BaseType) => (\n              <KuralCard\n                className={classes.kural}\n                key={item.id}\n                kural={item}\n                onClick={onKuralSelected}\n              />\n            ))}\n          </List>\n        );\n      })}\n    </>\n  );\n};\n","import React from 'react';\n\nimport {\n  makeStyles,\n  List,\n  ListItem,\n  Collapse,\n  ListItemText,\n} from '@material-ui/core';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { useIdbKeyStore } from 'src/lib/hooks';\n\nimport { AppState } from '../../../state';\nimport { AnimatedExpandedIcon } from '../common/AnimatedExpandedIcon';\nimport { ChapterFavList } from './chapter-fav-list';\nimport { KuralFavList } from './kural-fav-list';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  collapsableGroup: {},\n  list: {\n    '& .sub-header': {\n      textAlign: 'left',\n      color: 'brown',\n      lineHeight: '2rem',\n      padding: `0px 0 0 ${theme.spacing(0.5)}px`,\n    },\n  },\n  listItemTitle: {\n    '& .toggle-icon-container': {\n      marginLeft: theme.spacing(1.5),\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n  },\n  favCount: {\n    fontSize: '0.8rem',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n}));\n\ntype FavoritesViewerProps = {\n  className?: string;\n  expanded?: boolean;\n};\n\nconst IDB_FAV_TOGGLE_STATE = 'IDB_FAV_TOGGLE';\ntype VisibilityState = {\n  kural: boolean;\n  chapter: boolean;\n};\n\nexport const FavoritesViewer: React.FC<FavoritesViewerProps> = (\n  props: FavoritesViewerProps\n) => {\n  const classes = useStyles();\n  const favorites = useSelector((st: AppState) => st.user.favorites);\n  const filterFav = (category: 'kural' | 'chapter') =>\n    (favorites || [])\n      .filter((it) => it.category === category)\n      .map((it) => it.id);\n  const KURAL_IDS = filterFav('kural');\n  const CHAPTER_IDS = filterFav('chapter');\n  const [visiblity, setVisiblity] = useIdbKeyStore<VisibilityState>(\n    IDB_FAV_TOGGLE_STATE,\n    props.expanded\n      ? { kural: true, chapter: true }\n      : { kural: false, chapter: false }\n  );\n\n  const noRecordsFound = <h1>None Found</h1>;\n\n  const GroupTitleMaker = (\n    isVisible: boolean,\n    onClick: () => void,\n    title: React.ReactNode,\n    favCount: React.ReactNode,\n    collapseContent?: React.ReactNode\n  ) => (\n    <>\n      <ListItem\n        selected={isVisible}\n        className={classes.listItemTitle}\n        button\n        onClick={onClick}>\n        <ListItemText inset={true} primary={title} />\n        {!isVisible && <span className={classes.favCount}>{favCount}</span>}\n        <div className={`toggle-icon-container`}>\n          <AnimatedExpandedIcon isExpanded={isVisible} />\n        </div>\n      </ListItem>\n      <Collapse\n        in={isVisible}\n        style={{ paddingBottom: isVisible ? 8 : 0 }}\n        className={classes.collapsableGroup}\n        timeout='auto'>\n        {collapseContent || noRecordsFound}\n      </Collapse>\n    </>\n  );\n  return (\n    <div className={clsx(props.className, classes.root)}>\n      <List className={classes.list} disablePadding>\n        {GroupTitleMaker(\n          visiblity.kural,\n          () => {\n            setVisiblity({ ...visiblity, kural: !visiblity.kural });\n          },\n          'Kurals',\n          KURAL_IDS.length ? KURAL_IDS.length : null,\n          KURAL_IDS.length && <KuralFavList kuralIds={KURAL_IDS} />\n        )}\n        {GroupTitleMaker(\n          visiblity.chapter,\n          () => {\n            setVisiblity({ ...visiblity, chapter: !visiblity.chapter });\n          },\n          'Chapters',\n          CHAPTER_IDS.length ? CHAPTER_IDS.length : null,\n          CHAPTER_IDS.length && <ChapterFavList chapterIds={CHAPTER_IDS} />\n        )}\n      </List>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles, Card, CardContent, CardHeader } from '@material-ui/core';\nimport MyAppBar from 'src/views/components/common/MyAppBar';\n\nimport { FavoritesViewer } from '../../components/favourite-viewer';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: theme.spacing(2),\n    '& .card-header': {\n      padding: theme.spacing(1),\n    },\n    '& .card-content': {\n      padding: theme.spacing(0.5),\n    },\n  },\n  favoriteCard: {\n    margin: theme.spacing(1),\n    background: 'inherit',\n    color: 'inherit',\n  },\n}));\n\nconst Home: React.FC = () => {\n  const classes = useStyles();\n  return (\n    <>\n      <MyAppBar />\n      <div className={classes.root}>\n        <Card variant='outlined' className={classes.favoriteCard}>\n          {/* <LoadingSpinnerWithBackdrop show={true} /> */}\n          <CardHeader title='Favorites' className='card-header' />\n          <CardContent className='card-content'>\n            <FavoritesViewer expanded={false} />\n          </CardContent>\n        </Card>\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport { renderRoutes, RouteConfigComponentProps } from 'react-router-config';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n}));\n\ntype ListWithRouteViewerProps = RouteConfigComponentProps;\n\nexport const ListCategoryViewer: React.FC<ListWithRouteViewerProps> = ({\n  route,\n}: ListWithRouteViewerProps) => {\n  const classes = useStyles();\n  return <div className={classes.root}>{renderRoutes(route?.routes)}</div>;\n};\n","type SetTitleAction = { type: 'SetTitle'; payload: string };\ntype SetDefaultTitleAction = { type: 'DefaultTitle' };\ntype SetAppendTitleAction = { type: 'AppendTitle'; payload: string };\ntype TitleActionTypes =\n  | SetTitleAction\n  | SetDefaultTitleAction\n  | SetAppendTitleAction;\n\nexport const setTitle = (title: string): SetTitleAction => {\n  return {\n    type: 'SetTitle',\n    payload: title,\n  };\n};\nexport const appendTitle = (suffix: string): SetAppendTitleAction => {\n  return {\n    type: 'AppendTitle',\n    payload: suffix,\n  };\n};\n\nexport const setDefaultTitle = (): SetDefaultTitleAction => {\n  return { type: 'DefaultTitle' };\n};\nconst defalutTitle = 'Thirukural';\nexport const TitleReducer = (\n  title = defalutTitle,\n  action: TitleActionTypes\n): string => {\n  switch (action.type) {\n    case 'SetTitle':\n      return action.payload;\n    case 'AppendTitle':\n      return defalutTitle.concat(`-${action.payload}`);\n    case 'DefaultTitle':\n      return defalutTitle;\n    default:\n      return title;\n  }\n};\n","import * as React from 'react';\n\nimport {\n  makeStyles,\n  BottomNavigation,\n  BottomNavigationAction,\n} from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    background: 'inherit',\n  },\n  appBar: {\n    bottom: 0,\n    top: 'auto',\n    boxShadow: 'none',\n    borderTop: '1px solid rgba(0, 0, 0, 0.12)',\n    background: 'inherit',\n  },\n  actionItem: {\n    color: 'inherit',\n  },\n}));\n\nexport type MyBottomNavigationBarItemsType = {\n  icon: React.ReactNode;\n  label: string;\n  route: string;\n};\nexport type MyBottomNavigationBarProps = {\n  items: Array<MyBottomNavigationBarItemsType>;\n  currentRoute: string;\n  className?: string;\n  onChange: (route: string) => void;\n};\n\nconst MyBottomNavigationBar: React.FC<MyBottomNavigationBarProps> = (\n  props: MyBottomNavigationBarProps\n) => {\n  const classes = useStyles();\n  return (\n    <div className={clsx(classes.root, props.className)}>\n      <AppBar position='fixed' color='inherit' className={classes.appBar}>\n        <BottomNavigation\n          value={props.currentRoute}\n          onChange={(_, value: string): void => props.onChange(value)}\n          className={classes.root}>\n          {props.items.map((item, index) => (\n            <BottomNavigationAction\n              label={item.label}\n              value={item.route}\n              icon={item.icon}\n              key={index}\n              className={classes.actionItem}\n            />\n          ))}\n        </BottomNavigation>\n      </AppBar>\n      <Toolbar />\n    </div>\n  );\n};\n\nexport default MyBottomNavigationBar;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport { Search, Settings } from '@material-ui/icons';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ListIcon from '@material-ui/icons/List';\nimport { useDispatch } from 'react-redux';\nimport { useLocation, useRouteMatch } from 'react-router-dom';\nimport { useNavigation } from 'src/lib/hooks';\nimport { setDefaultTitle, setTitle } from 'src/state/title';\n\nimport MyBottomNavigationBar from './../common/MyBottomNavigationBar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n}));\n\ntype KuralActionBarProps = Record<string, unknown>;\nconst ActionBarItems = [\n  {\n    icon: <HomeIcon />,\n    route: '/',\n    label: 'Home',\n  },\n  {\n    icon: <ListIcon />,\n    route: '/list',\n    label: 'List',\n  },\n  {\n    icon: <Search />,\n    route: '/search',\n    label: 'Search',\n  },\n  {\n    icon: <Settings />,\n    route: '/settings',\n    label: 'Settings',\n  },\n];\n\nconst KuralActionBar: React.FC<KuralActionBarProps> = (\n  props: KuralActionBarProps\n) => {\n  const homePath = useRouteMatch('/');\n  const listPath = useRouteMatch('/list*');\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  const initRoute = React.useCallback(\n    (): string =>\n      homePath?.isExact\n        ? ActionBarItems[0].route\n        : listPath?.isExact\n        ? ActionBarItems[1].route\n        : location.pathname,\n    [homePath, listPath, location.pathname]\n  );\n  const [route, setRoute] = React.useState(initRoute());\n  React.useEffect(() => {\n    setRoute(initRoute());\n  }, [initRoute, location]);\n  const classes = useStyles();\n  const [navigateTo] = useNavigation();\n  const navigateBar = (route: string): void => {\n    setRoute(route);\n    navigateTo(route)();\n    if (ActionBarItems[0].route === route) {\n      dispatch(setDefaultTitle());\n    } else {\n      const label = ActionBarItems.find((it) => it.route === route)?.label;\n      if (label) {\n        dispatch(setTitle(label));\n      }\n    }\n  };\n  return (\n    <MyBottomNavigationBar\n      items={ActionBarItems}\n      currentRoute={route}\n      onChange={navigateBar}\n      className={classes.root}\n    />\n  );\n};\n\nexport default KuralActionBar;\n","import React from 'react';\n\nimport { renderRoutes, RouteConfigComponentProps } from 'react-router-config';\n\nimport KuralActionBar from '../../components/kural/KuralActionBar';\n\nconst Main: React.FC<RouteConfigComponentProps> = (\n  props: RouteConfigComponentProps\n) => {\n  return (\n    <>\n      {renderRoutes(props.route?.routes)}\n      <KuralActionBar />\n    </>\n  );\n};\n\nexport default Main;\n","import React from 'react';\n\nimport { Fade } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  fade,\n} from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport SearchIcon from '@material-ui/icons/Search';\nimport clsx from 'clsx';\nimport { debug } from 'loglevel';\nimport { matchPath, useHistory } from 'react-router-dom';\nimport { useDebouncedCallback } from 'use-debounce';\n\nimport { useKuralSearch } from '../../../lib/hooks';\n\nconst SEARCH_ROUTE = '/search';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      maxWidth: 400,\n      border: '1px solid',\n      borderRadius: '25px',\n      borderColor: fade(theme.palette.grey[500], 0.5),\n      padding: '0.2em 0.5em',\n      color: theme.palette.primary.main,\n      height: '1.6rem',\n      '&.focus': {\n        borderColor: theme.palette.primary.main,\n        '& .search-icon, & .searchbar': {\n          color: theme.palette.primary.main,\n        },\n      },\n    },\n    searchicon: {\n      color: fade(theme.palette.grey[500], 0.5),\n      cursor: 'pointer',\n    },\n    clearIcon: {\n      cursor: 'pointer',\n    },\n    input: {\n      flex: 1,\n      padding: '0px 6px',\n      width: '100%',\n      color: theme.palette.primary.light,\n    },\n  })\n);\n\ntype KuralSearchProps = {\n  className?: string;\n  onSearchTap?: () => void;\n};\n\nconst KuralSearch: React.FC<KuralSearchProps> = (props: KuralSearchProps) => {\n  debug('KuralSearch');\n  const classes = useStyles();\n  const inputRef = React.useRef<HTMLDivElement>(null);\n  const [setSearchKey] = useKuralSearch();\n  const debounced = useDebouncedCallback((value: string) => {\n    setSearchKey(value);\n  }, 500);\n  const [keyword, setKeyword] = React.useState('');\n  const isKeywordEmpty = (): boolean => keyword.trim().length === 0;\n  const [focus, setFocus] = React.useState(false);\n\n  React.useEffect(() => {\n    debounced.callback(keyword);\n  }, [debounced, keyword]);\n\n  return (\n    <div className={clsx(classes.root, props.className, focus && 'focus')}>\n      <SearchIcon\n        onClick={() => {\n          inputRef.current?.querySelector('input')?.focus();\n        }}\n        className={clsx(classes.searchicon, 'search-icon')}\n      />\n      <InputBase\n        autoFocus\n        ref={inputRef}\n        className={`searchbar ${classes.input}`}\n        placeholder='Search 43, agara'\n        inputProps={{ 'aria-label': 'Search' }}\n        onChange={(e): void => {\n          const text = e.target.value;\n          setKeyword(text);\n        }}\n        value={keyword}\n        onFocus={(): void => {\n          setFocus(true);\n          props.onSearchTap && props.onSearchTap();\n        }}\n        onBlur={() => setFocus(false)}\n      />\n      <Fade in={!isKeywordEmpty()}>\n        <CancelIcon\n          className={classes.clearIcon}\n          onClick={(): void => {\n            setKeyword('');\n          }}\n        />\n      </Fade>\n    </div>\n  );\n};\n\nexport default KuralSearch;\n","import {\n  SearchResult,\n  SearchTypes,\n  Category,\n  SearchCategoryTypes,\n} from 'src/lib/api';\n\n// ACTION TYPES\ntype SetSearchResults = 'SetSearchResults';\ntype AddSearchResults = 'AddSearchResults';\ntype SetSearchFilters = 'SetSearchFilters';\ntype SetUserSelection = 'SetUserSelection';\ntype SetAllUserSelection = 'SetAllUserSelection';\ntype SetSearchKeyword = 'SetSearchKeyword';\ntype SetSearchStatus = 'SetSearchStatus';\n\ntype SetSearchResultAction = {\n  type: SetSearchResults;\n  payload: SearchResult[];\n};\ntype AddSearchResultsAction = {\n  type: AddSearchResults;\n  payload: SearchResult[];\n};\ntype SetSearchFilterAction = {\n  type: SetSearchFilters;\n  payload: SearchTypes[];\n};\ntype SetUserSelectionAction = {\n  type: SetUserSelection;\n  payload: [UserSelectionTypes, boolean];\n};\ntype SetAllUserSelectionAction = {\n  type: SetAllUserSelection;\n  payload: boolean;\n};\ntype SetSearchStatusAction = {\n  type: SetSearchStatus;\n  payload: boolean;\n};\n\ntype SetSearchKeywordAction = {\n  type: SetSearchKeyword;\n  payload: string;\n};\n\ntype SearchStateAction =\n  | SetSearchKeywordAction\n  | SetSearchStatusAction\n  | SetSearchResultAction\n  | SetSearchFilterAction\n  | AddSearchResultsAction\n  | SetAllUserSelectionAction\n  | SetUserSelectionAction;\n\ntype UserSelectionTypes = Exclude<SearchCategoryTypes, 'all'>;\n\n// Actions\n\nexport const setSearchStatus = (status: boolean): SetSearchStatusAction => ({\n  type: 'SetSearchStatus',\n  payload: status,\n});\nexport const clearSearchResults = (): SetSearchResultAction => {\n  return { type: 'SetSearchResults', payload: [] };\n};\nexport const appendSearchResults = (\n  results: SearchResult[]\n): AddSearchResultsAction => {\n  return { type: 'AddSearchResults', payload: results };\n};\n\nexport const setUserSelection = (\n  category: UserSelectionTypes,\n  selection: boolean\n): SetUserSelectionAction => {\n  return { type: 'SetUserSelection', payload: [category, selection] };\n};\n\nexport const setAllUserSelections = (\n  state: boolean\n): SetAllUserSelectionAction => {\n  return { type: 'SetAllUserSelection', payload: state };\n};\n\nexport const setSearchFilters = (\n  results: SearchTypes[]\n): SetSearchFilterAction => {\n  return { type: 'SetSearchFilters', payload: results };\n};\n\nexport const setSearchKeyword = (keyword: string): SetSearchKeywordAction => {\n  return { type: 'SetSearchKeyword', payload: keyword };\n};\n\nconst sortSearchResults = (items: SearchResult[]) => {\n  const SortValueMap: Record<Category, number> = {\n    kural: 1,\n    chapter: 2,\n    literature: 3,\n    section: 4,\n  };\n  return items.sort(\n    (a, b) => SortValueMap[a.category] - SortValueMap[b.category]\n  );\n};\n\n// reducer\ntype SearchState = {\n  /** show search bar */\n  status: boolean;\n  keyword: string;\n  results: SearchResult[];\n  filters: SearchTypes[];\n  userSelections: Record<UserSelectionTypes, boolean>;\n};\nconst defaultState: SearchState = {\n  status: false,\n  keyword: '',\n  results: [],\n  filters: [],\n  userSelections: {\n    chapter: true,\n    kural: true,\n    section: true,\n    literature: true,\n    detail: true,\n  },\n};\nexport const SearchStateReducer = (\n  state = defaultState,\n  action: SearchStateAction\n): SearchState => {\n  if (action.type === 'SetSearchKeyword' && action.payload !== state.keyword) {\n    return { ...state, keyword: action.payload, results: [] };\n  } else if (action.type === 'AddSearchResults') {\n    return {\n      ...state,\n      results: sortSearchResults([...state.results, ...action.payload]),\n    };\n  } else if (action.type === 'SetSearchResults') {\n    return {\n      ...state,\n      results: sortSearchResults(action.payload as SearchResult[]),\n    };\n  } else if (action.type === 'SetSearchFilters') {\n    return { ...state, filters: action.payload as SearchTypes[] };\n  } else if (action.type === 'SetUserSelection') {\n    const [category, status] = action.payload as [Category, boolean];\n    return {\n      ...state,\n      userSelections: {\n        ...state.userSelections,\n        [category]: status,\n      },\n    };\n  } else if (action.type === 'SetAllUserSelection') {\n    const status = action.payload as boolean;\n    return {\n      ...state,\n      userSelections: {\n        chapter: status,\n        kural: status,\n        section: status,\n        literature: status,\n        detail: status,\n      },\n    };\n  } else if (action.type === 'SetSearchStatus') {\n    return { ...state, status: action.payload };\n  }\n  return state;\n};\n","import React from 'react';\n\nimport { Chip, makeStyles } from '@material-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { setAllUserSelections, setUserSelection } from '../../../state/search';\nimport {\n  CATEGORY_COLORS,\n  SearchCategoryLabelMap,\n  SearchCategoryTypes,\n} from './../../../lib/api';\nimport { AppState } from './../../../state';\n\ntype SearchChipsProps = unknown;\ntype FiltersType = {\n  label: string;\n  type: SearchCategoryTypes;\n  isShow: boolean;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  searchFilter: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n    textAlign: 'start',\n    '& .search-chip': {\n      height: '2em',\n      margin: '0 1vw 4px 0',\n      fontSize: '0.7em',\n      minWidth: '15vw',\n      '& svg': {\n        width: '1rem',\n        height: '1rem',\n        [theme.breakpoints.up('sm')]: {\n          width: '1.5rem',\n          height: '1.5rem',\n        },\n      },\n    },\n  },\n}));\n\nexport const SearchChips: React.FC<SearchChipsProps> = (\n  props: SearchChipsProps\n) => {\n  const classes = useStyles();\n  const [filters, setFilters] = React.useState<FiltersType[]>([]);\n  const search = useSelector((st: AppState) => st.search);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    const hasStartsWith = (keyword: string): boolean =>\n      search.filters.filter((f) => f.startsWith(keyword)).length > 0;\n    const filterOptions: FiltersType[] = [\n      {\n        label: SearchCategoryLabelMap.all,\n        type: 'all',\n        isShow: new Set(search.results.map((r) => r.type)).size > 1,\n      },\n      {\n        label: SearchCategoryLabelMap.section,\n        type: 'section',\n        isShow: hasStartsWith('BySection'),\n      },\n      {\n        label: SearchCategoryLabelMap.literature,\n        type: 'literature',\n        isShow: hasStartsWith('ByLiterature'),\n      },\n      {\n        label: SearchCategoryLabelMap.chapter,\n        type: 'chapter',\n        isShow: hasStartsWith('ByChapter'),\n      },\n      {\n        label: SearchCategoryLabelMap.kural,\n        type: 'kural',\n        isShow: hasStartsWith('ByKural'),\n      },\n      {\n        label: SearchCategoryLabelMap.detail,\n        type: 'detail',\n        isShow: hasStartsWith('ByKuralDetail'),\n      },\n    ];\n    setFilters(filterOptions);\n  }, [search]);\n  const isSelected = (type: SearchCategoryTypes): boolean => {\n    if (type === 'all') {\n      return (\n        search.userSelections['section'] &&\n        search.userSelections['literature'] &&\n        search.userSelections['chapter'] &&\n        search.userSelections['kural'] &&\n        search.userSelections['detail']\n      );\n    } else {\n      return search.userSelections[type];\n    }\n  };\n\n  const onClick = (type: SearchCategoryTypes): void => {\n    if (type !== 'all') {\n      dispatch(setUserSelection(type, !search.userSelections[type]));\n    } else {\n      dispatch(setAllUserSelections(!isSelected('all')));\n    }\n  };\n  return (\n    <div className={classes.searchFilter}>\n      {filters\n        .filter((f) => f.isShow)\n        .map((f, i) => (\n          <Chip\n            key={i}\n            size='small'\n            className='search-chip'\n            label={f.label}\n            color={'primary'}\n            style={{\n              backgroundColor:\n                CATEGORY_COLORS[\n                  f.type === 'all' || f.type === 'detail' ? 'default' : f.type\n                ],\n            }}\n            variant={isSelected(f.type) ? 'default' : 'outlined'}\n            onClick={(e): void => onClick(f.type)}\n          />\n        ))}\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles, ListItem, List, Avatar } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport {\n  isResultOfType,\n  SearchResult,\n  CATEGORY_COLORS,\n  Category,\n  findCategoryRouteMapString,\n} from 'src/lib/api';\nimport { useNavigation } from 'src/lib/hooks';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state/reducers';\nimport KuralCard from 'src/views/components/kural/KuralCard';\nimport KuralSearch from 'src/views/components/kural/KuralSearch';\n\nimport { SearchChips } from './SearchChips';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(1),\n  },\n  searchbar: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    flexGrow: 1,\n  },\n  kuralSearchItem: {\n    margin: 0,\n    padding: 0,\n    borderBottom: 'none',\n  },\n  searchItem: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    cursor: 'pointer',\n  },\n  searchItemAvatar: {\n    width: '2rem',\n    height: '2rem',\n    textAlign: 'center',\n    fontSize: '1rem',\n    marginRight: '0.5rem',\n  },\n}));\n\ntype SearchProps = {\n  className?: string;\n};\n\ntype SearchResultItemProps = {\n  component?: React.ReactNode;\n  result: SearchResult;\n  label: string;\n  onClick?: () => void;\n};\nconst SearchResultItem: React.FC<SearchResultItemProps> = ({\n  result,\n  label,\n  onClick,\n  component,\n}: SearchResultItemProps) => {\n  const classes = useStyles();\n  const innerContent = component ? component : <div>{result.item.value}</div>;\n  return (\n    <ListItem\n      key={`${label}${result.item.id}`}\n      onClick={onClick}\n      className={classes.searchItem}>\n      <Avatar\n        className={classes.searchItemAvatar}\n        style={{ backgroundColor: CATEGORY_COLORS[result.category] }}>\n        {label.charAt(0).toUpperCase()}\n      </Avatar>\n      {innerContent}\n    </ListItem>\n  );\n};\n\nconst Search: React.FC<SearchProps> = (props: SearchProps) => {\n  const classes = useStyles();\n  const search = useSelector((st: AppState) => st.search);\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const getOnClickRoute = React.useCallback(\n    (category: Category, id: number) => {\n      let route = ROUTE_CONSTANTS.LIST_CATEGORY;\n      if (INDEX_MAP) {\n        route += `/${findCategoryRouteMapString(INDEX_MAP, {\n          [category]: id,\n        })}`;\n      }\n      return route;\n    },\n    [INDEX_MAP]\n  );\n  const [navigateTo] = useNavigation();\n  const renderItem = (\n    item: SearchResult,\n    index: number\n  ): React.ReactElement | null => {\n    if (isResultOfType(item, 'kural') && search.userSelections.kural) {\n      return (\n        <SearchResultItem\n          key={index}\n          result={item}\n          label='k'\n          onClick={navigateTo(getOnClickRoute('kural', item.item.id))}\n          component={\n            <KuralCard\n              componentType='span'\n              key={item.item.id}\n              kural={item.item}\n              className={classes.kuralSearchItem}\n            />\n          }\n        />\n      );\n    }\n    if (isResultOfType(item, 'chapter') && search.userSelections.chapter) {\n      return (\n        <SearchResultItem\n          key={index}\n          label='ch'\n          onClick={navigateTo(getOnClickRoute('chapter', item.item.id))}\n          result={item}\n        />\n      );\n    }\n    if (\n      isResultOfType(item, 'literature') &&\n      search.userSelections.literature\n    ) {\n      return (\n        <SearchResultItem\n          key={index}\n          label='lit'\n          onClick={navigateTo(getOnClickRoute('literature', item.item.id))}\n          result={item}\n        />\n      );\n    }\n    if (isResultOfType(item, 'section') && search.userSelections.section) {\n      return (\n        <SearchResultItem\n          key={index}\n          label='sec'\n          onClick={navigateTo(getOnClickRoute('section', item.item.id))}\n          result={item}\n        />\n      );\n    }\n    return null;\n  };\n  return (\n    <div className={clsx(props.className, classes.root)}>\n      <KuralSearch className={classes.searchbar} />\n      <SearchChips />\n      <List>{search.results.map((item, i) => renderItem(item, i))}</List>\n    </div>\n  );\n};\n\nexport default Search;\n","import React from 'react';\n\nimport {\n  Card,\n  CardContent,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Radio,\n} from '@material-ui/core';\nimport { Check } from '@material-ui/icons';\nimport clsx from 'clsx';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore, useFirestoreConnect } from 'react-redux-firebase';\nimport { AppState } from 'src/state';\nimport { applyPreference, DEFAULT_BACKGROUND } from 'src/state/settings';\n\nimport {\n  User,\n  COLLECTION_NAME_MAP,\n  updateUserPreference,\n  BackgroundColorItem,\n} from '../../../lib/api';\nimport { CommonComponentProps } from '../../components';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  colorItemContainer: {\n    display: 'grid',\n    gridTemplateRows: 'repeat(3, auto)',\n    gridGap: '1em',\n  },\n  colorItem: {\n    width: '90%',\n    borderRadius: 10,\n    justifySelf: 'center',\n    border: '2px solid var(--app-color)',\n    '& .radio': { color: 'var(--app-color)' },\n    '&.item1': {\n      color: 'rgb(0,0,0)',\n    },\n    '&.item2': { color: 'white' },\n    '&.item3': { color: 'white' },\n    '& .item': {\n      padding: 0,\n    },\n    '& .text': {\n      color: 'inherit',\n    },\n  },\n  itemIcon: {\n    minWidth: 'none',\n  },\n}));\n\ninterface ColorItemProps {\n  color: string;\n  label: string;\n  isSelected?: boolean;\n  onSelect?: () => void;\n  className?: string;\n}\n\nconst BackgroundOption: React.FC<ColorItemProps> = ({\n  isSelected = false,\n  ...props\n}: ColorItemProps) => {\n  const classes = useStyles();\n  const [itemSelected, setItemSelection] = React.useState(isSelected);\n  React.useEffect(() => {\n    setItemSelection(isSelected);\n  }, [isSelected]);\n  const onItemSelection = () => {\n    setItemSelection(true);\n    props.onSelect && props.onSelect();\n  };\n  return (\n    <div\n      className={clsx(classes.colorItem, props.className)}\n      style={{ backgroundColor: props.color }}\n      onClick={onItemSelection}>\n      <ListItem component='div' classes={{ root: 'item' }}>\n        <ListItemIcon className={classes.itemIcon}>\n          <Radio\n            checkedIcon={<Check />}\n            checked={itemSelected}\n            classes={{ root: 'radio' }}\n          />\n        </ListItemIcon>\n        <ListItemText classes={{ root: 'text' }} primary={props.label} />\n      </ListItem>\n    </div>\n  );\n};\n\nexport interface BackgroundPickerProps extends Partial<CommonComponentProps> {\n  user: User;\n}\n\nexport const BackgroundPicker: React.FC<BackgroundPickerProps> = (\n  props: BackgroundPickerProps\n) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  useFirestoreConnect([COLLECTION_NAME_MAP.DISPLAY]);\n  const firestore = useFirestore();\n  const DISPLAY_CONFIG = useSelector(\n    (st: AppState) => st.firestore.data[COLLECTION_NAME_MAP.DISPLAY]\n  );\n  const USER_BG_COLOR = props.user.preference.display.background;\n  const getColors = (): BackgroundColorItem[] => {\n    const BG_COLORS = [\n      ...(DISPLAY_CONFIG && DISPLAY_CONFIG.CONFIG\n        ? (DISPLAY_CONFIG.CONFIG.background as BackgroundColorItem[])\n        : DEFAULT_BACKGROUND),\n    ];\n    return BG_COLORS;\n  };\n  const updateUserDisplayColor = (item: BackgroundColorItem) => {\n    const userPreference = {\n      ...props.user.preference,\n      display: {\n        ...props.user.preference.display,\n        background: item,\n      },\n    };\n    dispatch(applyPreference(userPreference));\n    updateUserPreference(firestore, {\n      ...props.user,\n      preference: userPreference,\n    });\n  };\n  return (\n    <Card variant={'outlined'} className={clsx(props.className, classes.root)}>\n      <CardContent className={classes.colorItemContainer}>\n        {getColors().map((item: BackgroundColorItem, i: number) => {\n          return (\n            <BackgroundOption\n              key={i}\n              color={item.color}\n              label={item.label}\n              className={`item${i + 1}`}\n              isSelected={USER_BG_COLOR.color === item.color}\n              onSelect={() => updateUserDisplayColor(item)}\n            />\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default BackgroundPicker;\n","import React from 'react';\n\nimport { Card, CardContent, makeStyles } from '@material-ui/core';\nimport {\n  Check,\n  Favorite,\n  Grade,\n  SvgIconComponent,\n  Whatshot,\n} from '@material-ui/icons';\nimport clsx from 'clsx';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore, useFirestoreConnect } from 'react-redux-firebase';\nimport { AppState } from 'src/state';\nimport { applyPreference, DEFAULT_COLORS } from 'src/state/settings';\n\nimport {\n  User,\n  COLLECTION_NAME_MAP,\n  updateUserPreference,\n} from '../../../lib/api';\nimport { CommonComponentProps } from './../../components';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  colorItemContainer: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, auto)',\n    gridGap: '1em',\n  },\n  colorItem: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    '& .circle': {\n      height: '2.5rem',\n      width: '2.5rem',\n      borderRadius: '50%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      '& svg': {\n        color: 'white',\n      },\n    },\n    '& .icon': {\n      marginTop: '0.5em',\n    },\n  },\n}));\n\nconst ICON_MAP: SvgIconComponent[] = [Favorite, Grade, Whatshot];\n\ninterface ColorItemProps {\n  color: string;\n  icon: SvgIconComponent;\n  isSelected?: boolean;\n  onSelect?: () => void;\n}\n\nconst ColorItem: React.FC<ColorItemProps> = ({\n  isSelected = false,\n  ...props\n}: ColorItemProps) => {\n  const classes = useStyles();\n  const [itemSelected, setItemSelection] = React.useState(isSelected);\n  React.useEffect(() => {\n    setItemSelection(isSelected);\n  }, [isSelected]);\n  const onItemSelection = () => {\n    setItemSelection(!itemSelected);\n    props.onSelect && props.onSelect();\n  };\n  return (\n    <div className={classes.colorItem}>\n      <div\n        className='circle'\n        style={{ backgroundColor: props.color }}\n        onClick={onItemSelection}>\n        {itemSelected && <Check />}\n      </div>\n      <div className='icon'>\n        {<props.icon style={{ color: props.color }} />}\n      </div>\n    </div>\n  );\n};\n\nexport interface ColorPickerProps extends Partial<CommonComponentProps> {\n  user: User;\n}\n\nexport const ColorPicker: React.FC<ColorPickerProps> = (\n  props: ColorPickerProps\n) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  useFirestoreConnect([COLLECTION_NAME_MAP.DISPLAY]);\n  const firestore = useFirestore();\n  const DISPLAY_CONFIG = useSelector(\n    (st: AppState) => st.firestore.data[COLLECTION_NAME_MAP.DISPLAY]\n  );\n  const USER_COLOR = props.user.preference.display.color;\n  const getColors = (): string[] => {\n    const COLORS = [\n      ...(DISPLAY_CONFIG && DISPLAY_CONFIG.CONFIG\n        ? DISPLAY_CONFIG.CONFIG.colors\n        : DEFAULT_COLORS),\n    ];\n    if (USER_COLOR && COLORS.indexOf(USER_COLOR) === -1) {\n      COLORS.splice(0, 1, USER_COLOR);\n    }\n    return COLORS;\n  };\n  const updateUserDisplayColor = (color: string) => {\n    const userPreference = {\n      ...props.user.preference,\n      display: {\n        ...props.user.preference.display,\n        color,\n      },\n    };\n    dispatch(applyPreference(userPreference));\n    updateUserPreference(firestore, {\n      ...props.user,\n      preference: userPreference,\n    });\n  };\n  return (\n    <Card variant={'outlined'} className={clsx(props.className, classes.root)}>\n      <CardContent className={classes.colorItemContainer}>\n        {getColors().map((c: string, i: number) => {\n          return (\n            <ColorItem\n              key={i}\n              color={c}\n              icon={ICON_MAP[i]}\n              isSelected={USER_COLOR === c}\n              onSelect={() => updateUserDisplayColor(c)}\n            />\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n};\n","import * as React from 'react';\n\nimport { Slider, SliderTypeMap, withStyles } from '@material-ui/core';\nimport { DefaultComponentProps } from '@material-ui/core/OverridableComponent';\n\nexport type DiscreteSliderProps = Partial<DefaultComponentProps<SliderTypeMap>>;\n\nconst StyledSlider = withStyles({\n  root: {\n    height: 8,\n  },\n  thumb: {\n    height: 20,\n    width: 20,\n    marginTop: '-7px',\n    backgroundColor: 'currentColor',\n    '&:focus, &:hover, &$active': {\n      boxShadow:\n        'rgba(136, 153, 166, 0.2) 0px 0px 7px, rgba(136, 153, 166, 0.15) 0px 1px 3px 1px',\n    },\n  },\n  active: {},\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n  mark: {\n    width: 16,\n    height: 16,\n    borderRadius: '50%',\n    marginLeft: '-6px',\n    opacity: 0.8,\n    marginTop: '-5px',\n    '& ::after': {\n      top: '-15px',\n      left: '-15px',\n      right: '-15px',\n      bottom: '-15px',\n      content: '\"',\n      position: 'absolute',\n      borderRadius: '50%',\n      border: '1px solid',\n    },\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor',\n  },\n})(Slider);\n\nexport const DiscreteSlider: React.FC<DiscreteSliderProps> = (props) => {\n  return (\n    <StyledSlider\n      aria-labelledby='discrete-slider'\n      valueLabelDisplay='auto'\n      {...props}\n    />\n  );\n};\n\nexport default DiscreteSlider;\n","import * as React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { useDispatch } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport {\n  FONT_SIZE_MAP,\n  User,\n  FontSizeType,\n  updateUserPreference,\n} from 'src/lib/api';\nimport { applyPreference, ANONYOMOUS_USER } from 'src/state/settings';\n\nimport { CommonComponentProps } from '../../components';\nimport { DiscreteSlider } from './../../components/common/DiscreteSlider';\n\nconst useStyles = makeStyles((theme) => ({\n  sliderWrapper: {\n    display: 'flex',\n    marginLeft: theme.spacing(3),\n    alignItems: 'center',\n  },\n  sliderRoot: {\n    width: '80%',\n  },\n}));\n\nexport interface FontSizePickerProps extends Partial<CommonComponentProps> {\n  user: User;\n}\n\nexport const FontSizePicker: React.FC<FontSizePickerProps> = (\n  props: FontSizePickerProps\n) => {\n  const classes = useStyles();\n  const firestore = useFirestore();\n  const dispatch = useDispatch();\n  const fontSize =\n    FONT_SIZE_MAP[\n      props.user.preference.fontSizeType ||\n        ANONYOMOUS_USER.preference.fontSizeType\n    ];\n  const marks = Object.entries(FONT_SIZE_MAP).map(([, v]) => ({\n    value: v,\n  }));\n  const onFontChange = (\n    _: React.ChangeEvent<unknown>,\n    value: number | number[]\n  ) => {\n    if (typeof value === 'number') {\n      const fontType = Object.keys(FONT_SIZE_MAP).find(\n        (type) => FONT_SIZE_MAP[type as FontSizeType] === value\n      );\n      const userPreference = {\n        ...props.user.preference,\n        fontSizeType: fontType!! as FontSizeType,\n      };\n      dispatch(applyPreference(userPreference));\n      updateUserPreference(firestore, {\n        ...props.user,\n        preference: userPreference,\n      });\n    }\n  };\n  return (\n    <div\n      className={clsx(\n        props.className && props.className + '-wrapper',\n        classes.sliderWrapper\n      )}>\n      <DiscreteSlider\n        classes={{ root: clsx(classes.sliderRoot, 'is-app-color') }}\n        {...props}\n        aria-label='font-size-picker'\n        value={fontSize}\n        valueLabelDisplay={'off'}\n        step={null}\n        marks={marks}\n        min={FONT_SIZE_MAP.TINY}\n        max={FONT_SIZE_MAP.BIG}\n        onChange={onFontChange}\n      />\n    </div>\n  );\n};\n","import * as React from 'react';\n\nimport {\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport clsx from 'clsx';\nimport {\n  DragDropContext,\n  Draggable,\n  Droppable,\n  DropResult,\n  ResponderProvided,\n} from 'react-beautiful-dnd';\nimport { useSelector } from 'react-redux';\nimport { useFirestoreConnect } from 'react-redux-firebase';\nimport { COLLECTION_NAME_MAP, User } from 'src/lib/api';\nimport { useUserPreference } from 'src/lib/hooks';\nimport { AppState } from 'src/state';\n\nimport { CommonComponentProps } from '../../components';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n  languageItem: {},\n  languageItemText: {},\n  itemCheckbox: {\n    padding: 0,\n  },\n}));\n\nexport interface LanguagePickerProps extends Partial<CommonComponentProps> {\n  user: User;\n}\n\nexport const LanguagePicker: React.FC<LanguagePickerProps> = (\n  props: LanguagePickerProps\n) => {\n  const classes = useStyles();\n  const [updateUserPref] = useUserPreference();\n  useFirestoreConnect([COLLECTION_NAME_MAP.LANGUAGE]);\n  const {\n    primary: PRIMARY_LANG,\n    secondary: SECONDARY_LANGS,\n  } = props.user.preference.language;\n  const languageMap = useSelector(\n    (st: AppState) => st.firestore.data[COLLECTION_NAME_MAP.LANGUAGE]\n  );\n  const getOrderedLangIds = React.useCallback(\n    () => (): Array<string> => {\n      if (!languageMap) {\n        return [];\n      }\n      const sortedIds = Object.keys(languageMap)\n        .map((l) => l.toLocaleLowerCase())\n        .sort();\n      // Remove Primary lang\n      sortedIds.splice(sortedIds.indexOf(PRIMARY_LANG.toLocaleLowerCase()), 1);\n      // Insert Primary lang at top\n      sortedIds.splice(0, 0, PRIMARY_LANG.toLocaleLowerCase());\n      return sortedIds;\n    },\n    [PRIMARY_LANG, languageMap]\n  );\n  const [orderedLangIds, setOrderdLangIds] = React.useState<Array<string>>([]);\n\n  React.useEffect(() => {\n    setOrderdLangIds(getOrderedLangIds());\n  }, [getOrderedLangIds, languageMap]);\n\n  const onDragEnd = (\n    { source, destination }: DropResult,\n    _: ResponderProvided\n  ): void => {\n    if (!destination) {\n      return;\n    }\n    if (source.index !== destination.index) {\n      const reordered = [...orderedLangIds];\n      reordered.splice(\n        destination.index,\n        0,\n        ...reordered.splice(source.index, 1)\n      );\n      setOrderdLangIds(reordered);\n      if (PRIMARY_LANG !== reordered[0]) {\n        const userPreference = {\n          ...props.user.preference,\n          language: {\n            ...props.user.preference.language,\n            primary: reordered[0],\n          },\n        };\n        updateUserPref(userPreference);\n      }\n    }\n  };\n\n  const isLangActive = (langId: string) => {\n    return PRIMARY_LANG === langId || SECONDARY_LANGS.indexOf(langId) !== -1;\n  };\n  const toggleLang = (langId: string) => {\n    // TODO:\n    console.log('toggleLang -> langId', langId);\n  };\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable droppableId={'language'} key={'language'}>\n        {(provided, snapshot) => (\n          <List\n            className={clsx(\n              props.className && props.className + '-wrapper',\n              classes.root,\n              snapshot.isDraggingOver && 'dragging-over'\n            )}\n            {...provided.droppableProps}\n            ref={provided.innerRef}>\n            {orderedLangIds.map((langId, index) => (\n              <Draggable key={langId} draggableId={langId} index={index}>\n                {(provided, snapshot) => (\n                  <ListItem\n                    onClick={() => toggleLang(langId)}\n                    className={clsx(\n                      classes.languageItem,\n                      snapshot.isDragging && 'is-dragging'\n                    )}\n                    style={provided.draggableProps.style}\n                    ref={provided.innerRef}\n                    {...provided.draggableProps}\n                    {...provided.dragHandleProps}>\n                    <ListItemIcon>\n                      <Checkbox\n                        className={clsx(classes.itemCheckbox, 'is-app-color')}\n                        checked={isLangActive(langId)}\n                      />\n                    </ListItemIcon>\n                    <ListItemText\n                      disableTypography\n                      primary={languageMap[langId].value}\n                      className={classes.languageItemText}\n                    />\n                  </ListItem>\n                )}\n              </Draggable>\n            ))}\n            {provided.placeholder}\n          </List>\n        )}\n      </Droppable>\n    </DragDropContext>\n  );\n};\n","import React, { FC, PropsWithChildren } from 'react';\n\nimport {\n  Collapse,\n  Divider,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemTypeMap,\n  makeStyles,\n} from '@material-ui/core';\nimport { DefaultComponentProps } from '@material-ui/core/OverridableComponent';\nimport clsx from 'clsx';\n\nimport { AnimatedExpandedIcon } from './../../components/common/AnimatedExpandedIcon';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  itemLabel: {\n    fontSize: '1em',\n  },\n  itemChild: {\n    padding: theme.spacing(1),\n  },\n  listItemIcon: {\n    '& svg': {\n      color: 'var(--app-color)',\n    },\n  },\n}));\n\ntype SettingItemProps = PropsWithChildren<{\n  label: string;\n  className?: string;\n  isOpen?: boolean;\n  showExpandIcon?: boolean;\n  icon?: React.ReactNode;\n  suffix?: React.ReactNode;\n  divider?: boolean;\n}>;\n\nexport const SettingItem: FC<SettingItemProps> = ({\n  label,\n  className,\n  isOpen = false,\n  showExpandIcon = true,\n  children,\n  ...props\n}: SettingItemProps) => {\n  const classes = useStyles();\n  const [isItemExpanded, toggleItem] = React.useState(isOpen);\n  return (\n    <>\n      <ListItem\n        button\n        className={clsx(className, classes.root)}\n        onClick={(): void => toggleItem(!isItemExpanded)}>\n        {props.icon}\n        <ListItemText\n          classes={{ primary: classes.itemLabel }}\n          primary={label}\n        />\n        {props.suffix}\n        {showExpandIcon && (\n          <ListItemIcon classes={{ root: classes.listItemIcon }}>\n            <AnimatedExpandedIcon isExpanded={isItemExpanded} />\n          </ListItemIcon>\n        )}\n      </ListItem>\n      <Collapse\n        classes={{ container: classes.itemChild }}\n        in={isItemExpanded}\n        timeout='auto'\n        unmountOnExit>\n        {children}\n      </Collapse>\n      {props.divider && <Divider variant='middle' />}\n    </>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles, List, ListItemIcon } from '@material-ui/core';\nimport {\n  Colorize,\n  FormatSize,\n  Language,\n  Palette,\n  People,\n} from '@material-ui/icons';\nimport { debug } from 'loglevel';\nimport { useSelector } from 'react-redux';\nimport { User } from 'src/lib/api';\nimport { useIdbKeyStore } from 'src/lib/hooks';\n\nimport { AppState } from '../../../state/reducers';\nimport { BackgroundPicker } from './BackgroundPicker';\nimport { ColorPicker } from './ColorPicker';\nimport { FontSizePicker } from './FontSizePicker';\nimport { LanguagePicker } from './LanguagePicker';\nimport { RankTransliteratorSetting } from './RankTransliteratorSetting';\nimport { SettingItem } from './SettingItem';\n\nexport const IDB_USER_PROFILE = 'IDB_USER_PROFILE';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  item: {},\n  itemText: {},\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  fontSizePicker: {\n    // padding: theme.spacing(1),\n  },\n}));\n\nconst SettingsLabel = {\n  FONT_SIZE: 'Font size',\n  TRANSLITERATOR_PICK: 'Transliterators',\n  LANGUAGE_PICK: 'Language',\n  COLOR_PICK: 'Color',\n  BACKGROUND_PICK: 'Background',\n};\n\ntype SettingsProps = {\n  className?: string;\n};\n\nconst MenuItemIcon: React.FC<React.PropsWithChildren<unknown>> = ({\n  children,\n}: React.PropsWithChildren<unknown>) => {\n  return (\n    <ListItemIcon classes={{ root: 'is-app-color' }}>{children}</ListItemIcon>\n  );\n};\n\nconst Settings: React.FC<SettingsProps> = (props: SettingsProps) => {\n  const classes = useStyles();\n  const user = useSelector((st: AppState) => st.user);\n  const [, setUserToLS] = useIdbKeyStore<User>(IDB_USER_PROFILE, user);\n  React.useEffect(() => {\n    setUserToLS(user);\n  }, [setUserToLS, user]);\n  debug('renders Settings');\n  return (\n    <div className={props.className}>\n      <List>\n        <SettingItem\n          label={SettingsLabel.LANGUAGE_PICK}\n          divider={true}\n          icon={\n            <MenuItemIcon>\n              <Language />\n            </MenuItemIcon>\n          }>\n          <LanguagePicker user={user} />\n        </SettingItem>\n        <SettingItem\n          label={SettingsLabel.TRANSLITERATOR_PICK}\n          divider={true}\n          icon={\n            <MenuItemIcon>\n              <People />\n            </MenuItemIcon>\n          }>\n          <RankTransliteratorSetting user={user} />\n        </SettingItem>\n        <SettingItem\n          label={SettingsLabel.FONT_SIZE}\n          icon={\n            <MenuItemIcon>\n              <FormatSize />\n            </MenuItemIcon>\n          }>\n          <FontSizePicker user={user} className={classes.fontSizePicker} />\n        </SettingItem>\n        <SettingItem\n          label={SettingsLabel.COLOR_PICK}\n          icon={\n            <MenuItemIcon>\n              <Palette />\n            </MenuItemIcon>\n          }>\n          <ColorPicker user={user} />\n        </SettingItem>\n        <SettingItem\n          label={SettingsLabel.BACKGROUND_PICK}\n          divider={true}\n          icon={\n            <MenuItemIcon>\n              <Colorize />\n            </MenuItemIcon>\n          }>\n          <BackgroundPicker user={user} />\n        </SettingItem>\n      </List>\n    </div>\n  );\n};\n\nexport default Settings;\n","import React from 'react';\n\nimport { RouteConfig, RouteConfigComponentProps } from 'react-router-config';\nimport { Redirect } from 'react-router-dom';\n\nimport { isCategoryValid } from './lib/api';\nimport { CategoryViewerContainer } from './views/components/category-viewer';\nimport KuralDetailViewer from './views/components/kural/KuralDetailViewer';\nimport { KuralListSwipeable } from './views/components/kural/KuralsByChapterViewer';\nimport Home from './views/pages/home';\nimport { ListCategoryViewer } from './views/pages/list';\nimport Main from './views/pages/main/main';\nimport Search from './views/pages/search/search';\nimport SettingsViewer from './views/pages/settings';\n\nexport const ROUTE_CONSTANTS = {\n  ROOT: '/',\n  LIST: '/list',\n  LIST_CATEGORY: '/list',\n  SEARCH: '/search',\n  FAVOURITE: '/favorite',\n  SETTINGS: '/settings',\n};\n\nexport const routes: RouteConfig[] = [\n  {\n    path: ROUTE_CONSTANTS.ROOT,\n    component: Main,\n    routes: [\n      {\n        path: ROUTE_CONSTANTS.SEARCH,\n        component: Search,\n        exact: true,\n      },\n      {\n        path: ROUTE_CONSTANTS.SETTINGS,\n        component: SettingsViewer,\n        exact: true,\n      },\n      {\n        path: ROUTE_CONSTANTS.LIST,\n        component: ListCategoryViewer,\n        routes: [\n          {\n            path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter`,\n            component: KuralListSwipeable,\n            exact: true,\n          },\n          {\n            path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter/:kural`,\n            component: KuralDetailViewer,\n            exact: true,\n          },\n          {\n            path: `${ROUTE_CONSTANTS.LIST_CATEGORY}*`,\n            // eslint-disable-next-line react/display-name\n            render: ({ match }: RouteConfigComponentProps): React.ReactNode => {\n              const route = match.url.replace(ROUTE_CONSTANTS.LIST, '');\n              const ROUTE_REGEX = /^(\\/\\d+)?(\\/\\d+)?$/;\n              if (ROUTE_REGEX.test(route)) {\n                const [section, literature] = [\n                  route.replace(ROUTE_REGEX, '$1').replace('/', ''),\n                  route.replace(ROUTE_REGEX, '$2').replace('/', ''),\n                ];\n                if (\n                  (section === '' && literature === '') ||\n                  (section.length > 0 &&\n                    isCategoryValid('section', parseInt(section))) ||\n                  (literature.length > 0 &&\n                    isCategoryValid('literature', parseInt(literature)))\n                ) {\n                  return <CategoryViewerContainer />;\n                }\n              }\n              return <Redirect to={`${ROUTE_CONSTANTS.LIST}/1/1/1`} />;\n            },\n          },\n        ],\n      },\n\n      {\n        path: ROUTE_CONSTANTS.ROOT,\n        exact: true,\n        component: Home,\n      },\n      {\n        path: '/*',\n        // eslint-disable-next-line react/display-name\n        component: (): React.ReactElement => (\n          <Redirect to={ROUTE_CONSTANTS.ROOT} />\n        ),\n      },\n    ],\n  },\n];\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport React from 'react';\n\nimport log from 'loglevel';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { matchPath, useHistory } from 'react-router-dom';\nimport {\n  CategoryBaseTypeMap,\n  Category,\n  getCategoryIds,\n  RootCategory,\n  findChapterNoFromKuralNo,\n  IndexMapType,\n  CATEGORY_COLORS,\n  UserFavourite,\n} from 'src/lib/api';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\nimport { updateUserFSAsync } from 'src/state/settings';\n\nexport type RouteProp = {\n  id: number;\n  value: string;\n  type: Category | 'top';\n  isFavourite?: boolean;\n  route?: string;\n  color?: string;\n};\ntype TopRouteMap = Partial<Record<RootCategory, number>>;\ntype RouteMap = Partial<Record<Category, number>>;\n\nconst getRoutes: (\n  categories: Partial<CategoryBaseTypeMap>,\n  favourites: UserFavourite[]\n) => RouteProp[] = (categories, favourites) => {\n  // TODO: move static content to firestore\n  const isFavourite = (category: Category, id: number) => {\n    return favourites\n      .filter((it) => it.category === category)\n      .map((it) => it.id)\n      .includes(id);\n  };\n  const routes: RouteProp[] = [\n    {\n      id: 0,\n      value: '',\n      type: 'top',\n      route: ROUTE_CONSTANTS.LIST_CATEGORY,\n      color: CATEGORY_COLORS.default,\n    },\n  ];\n  if (categories.section) {\n    routes.push({\n      ...categories.section,\n      type: 'section',\n      route: `${ROUTE_CONSTANTS.LIST_CATEGORY}/${categories.section.id}`,\n      color: CATEGORY_COLORS.section,\n    });\n  }\n  if (categories.literature) {\n    routes.push({\n      ...categories.literature,\n      type: 'literature',\n      route: `${ROUTE_CONSTANTS.LIST_CATEGORY}/${categories.section!!.id}/${\n        categories.literature.id\n      }`,\n      color: CATEGORY_COLORS.literature,\n    });\n  }\n  if (categories.chapter) {\n    routes.push({\n      ...categories.chapter,\n      isFavourite: isFavourite('chapter', categories.chapter.id),\n      type: 'chapter',\n      route: `${ROUTE_CONSTANTS.LIST}/${categories.section!!.id}/${\n        categories.literature!!.id\n      }/${categories.chapter.id}`,\n      color: CATEGORY_COLORS.chapter,\n    });\n  }\n  if (categories.kural) {\n    routes.push({\n      ...categories.kural,\n      isFavourite: isFavourite('kural', categories.kural.id),\n      id: categories.kural.id,\n      value: `: ${categories.kural.id}`,\n      type: 'kural',\n      route: `${ROUTE_CONSTANTS.LIST}/${categories.section!!.id}/${\n        categories.literature!!.id\n      }/${categories.chapter!!.id}/${categories.kural.id}`,\n      color: CATEGORY_COLORS.kural,\n    });\n  }\n  return routes;\n};\n\nconst rootCategoryFinder = (\n  INDEX_MAP: IndexMapType,\n  options: TopRouteMap\n): TopRouteMap => {\n  const category = Object.keys(options).find(\n    (k: string) => options[k as RootCategory]\n  ) as RootCategory;\n  return INDEX_MAP && category\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      getCategoryIds(INDEX_MAP, category, options[category]!!)\n    : {};\n};\n\ntype GetRouteValueType = () => Partial<CategoryBaseTypeMap>;\ntype useRouteType = (\n  filter: RouteMap\n) => [RouteMap, RouteProp[], (route: RouteProp) => void];\nexport const useRoute: useRouteType = (filter) => {\n  const { section, literature, chapter, index: INDEX_MAP } = useSelector(\n    (st: AppState) => st.kuralIndexMap\n  );\n  const user = useSelector((st: AppState) => st.user);\n  const [inputFilter, setInputFilter] = React.useState(filter);\n  const history = useHistory();\n  const firestore = useFirestore();\n  const dispatch = useDispatch();\n  const [routeMap, setRouteMap] = React.useState<RouteMap>({});\n\n  React.useEffect(() => {\n    findFilters(history.location.pathname);\n  }, [history.location.pathname]);\n\n  React.useEffect(() => {\n    if (INDEX_MAP) {\n      const {\n        kural: KURAL_NO,\n        chapter: CHAPTER_NO,\n        literature: LITERATURE_NO,\n        section: SECTION_NO,\n      } = inputFilter;\n      const KURALS_CHAPTER = KURAL_NO\n        ? findChapterNoFromKuralNo(KURAL_NO)\n        : CHAPTER_NO;\n      const routes = {\n        ...rootCategoryFinder(INDEX_MAP, {\n          chapter: KURALS_CHAPTER,\n          literature: LITERATURE_NO,\n          section: SECTION_NO,\n        }),\n        ...(KURAL_NO ? { kural: KURAL_NO } : {}),\n      };\n      log.debug('found routes:', routes);\n      setRouteMap(routes);\n    }\n  }, [INDEX_MAP, inputFilter]);\n\n  const findFilters = (pathname: string): void => {\n    const sectionRoute = matchPath<{ section: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST_CATEGORY}/:section`,\n      exact: true,\n    });\n    const literatureRoute = matchPath<{ literature: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST_CATEGORY}/:section/:literature`,\n      exact: true,\n    });\n    const chapterRoute = matchPath<{ chapter: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter`,\n      exact: true,\n    });\n    const kuralRoute = matchPath<{ kural: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter/:kural`,\n      exact: true,\n    });\n    const section = sectionRoute\n      ? Number(sectionRoute?.params.section)\n      : undefined;\n    const literature = literatureRoute\n      ? Number(literatureRoute?.params.literature)\n      : undefined;\n    const chapter = chapterRoute\n      ? Number(chapterRoute?.params.chapter)\n      : undefined;\n    const kural = kuralRoute ? Number(kuralRoute?.params.kural) : undefined;\n    const newFilter = {\n      section,\n      literature,\n      chapter,\n      kural,\n    };\n    log.debug('route path values => ', JSON.stringify(newFilter));\n    setInputFilter(newFilter);\n  };\n\n  history.listen(({ pathname }) => {\n    log.debug('detect route => ', pathname);\n    findFilters(pathname);\n  });\n\n  const getRouteValue: GetRouteValueType = React.useCallback(() => {\n    return Object.keys(routeMap).reduce((oldVal, k) => {\n      const input = k as Category;\n      let output;\n      switch (input) {\n        case 'section':\n          output = section[routeMap[input]!!];\n          break;\n        case 'literature':\n          output = literature[routeMap[input]!!];\n          break;\n        case 'chapter':\n          output = chapter[routeMap[input]!!];\n          break;\n        case 'kural':\n          // NOTE: setting kural value to empty string as this value not needed\n          output = { id: routeMap[input]!!, value: '' };\n          break;\n      }\n      return { ...oldVal, [input]: output };\n    }, {});\n  }, [chapter, literature, routeMap, section]);\n\n  const toggleRouteFavourite = (route: RouteProp) => {\n    if (route.type === 'kural' || route.type === 'chapter') {\n      const shouldAddToList = !route.isFavourite;\n      let favorites = user.favorites;\n      const favIndex = favorites.findIndex(\n        (it) => it.category === route.type && it.id === route.id\n      );\n      if (shouldAddToList && favIndex === -1) {\n        favorites = [\n          ...favorites,\n          { id: route.id, datetime: new Date(), category: route.type },\n        ];\n      } else {\n        favorites.splice(favIndex, 1);\n      }\n      dispatch(\n        updateUserFSAsync(firestore, {\n          ...user,\n          favorites,\n        })\n      );\n    }\n  };\n  return [\n    routeMap,\n    getRoutes(getRouteValue(), user.favorites),\n    toggleRouteFavourite,\n  ];\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { SearchResult, SearchTypes } from 'src/lib/api';\nimport { AppState } from 'src/state';\nimport {\n  appendSearchResults,\n  clearSearchResults,\n  setSearchFilters,\n  setSearchKeyword,\n  setSearchStatus,\n} from 'src/state/search';\n\nimport { isCategoryValid } from '../api';\n\ntype UseKuralSearchType = () => [\n  (keyword: string) => void,\n  (status: boolean) => void\n];\n\nconst findSuitableSearchTypes = (keyword: string): SearchTypes[] => {\n  const types: SearchTypes[] = [];\n  try {\n    if (Number.isInteger(parseInt(keyword))) {\n      const searchNumber = parseInt(keyword);\n      isCategoryValid('kural', searchNumber) && types.push('ByKuralNo');\n      isCategoryValid('chapter', searchNumber) && types.push('ByChapterNo');\n      isCategoryValid('literature', searchNumber) &&\n        types.push('ByLiteratureNo');\n      isCategoryValid('section', searchNumber) && types.push('BySectionNo');\n    }\n  } catch (e) {}\n  return types;\n};\n\nexport const useKuralSearch: UseKuralSearchType = () => {\n  const dispatch = useDispatch();\n  const KURALS = useSelector((st: AppState) => st.kuralIndexMap.kurals);\n  const { literature, section, chapter } = useSelector(\n    (st: AppState) => st.kuralIndexMap\n  );\n  const setSearchKey = (keyword: string): void => {\n    dispatch(setSearchKeyword(keyword));\n    const searchTypes = findSuitableSearchTypes(keyword);\n    dispatch(setSearchFilters(searchTypes));\n    dispatch(clearSearchResults());\n    addResults(searchTypes, keyword);\n  };\n\n  const addResults = (searchTypes: SearchTypes[], keyword: string): void => {\n    searchTypes.forEach(async (type) => {\n      const items: SearchResult[] = [];\n      switch (type) {\n        case 'ByKuralNo':\n          const kuralNo = parseInt(keyword);\n          if (isCategoryValid('kural', kuralNo)) {\n            items.push({\n              type,\n              keyword,\n              category: 'kural',\n              item: KURALS[kuralNo],\n            });\n          }\n          break;\n        case 'ByChapterNo':\n          const chapterNo = parseInt(keyword);\n          if (isCategoryValid('chapter', chapterNo)) {\n            items.push({\n              type,\n              keyword,\n              item: chapter[parseInt(keyword)],\n              category: 'chapter',\n            });\n          }\n          break;\n        case 'ByLiteratureNo':\n          const literatureNo = parseInt(keyword);\n          if (isCategoryValid('literature', literatureNo)) {\n            items.push({\n              type,\n              keyword,\n              item: literature[parseInt(keyword)],\n              category: 'literature',\n            });\n          }\n          break;\n        case 'BySectionNo':\n          const sectionNo = parseInt(keyword);\n          if (isCategoryValid('section', sectionNo)) {\n            items.push({\n              type,\n              keyword,\n              item: section[parseInt(keyword)],\n              category: 'section',\n            });\n          }\n          break;\n      }\n      if (items.length) {\n        dispatch(appendSearchResults(items));\n      }\n    });\n  };\n\n  const toggleSearch = (status: boolean): void => {\n    dispatch(setSearchStatus(status));\n  };\n  return [setSearchKey, toggleSearch];\n};\n","import { useState, useEffect, useCallback } from 'react';\n\ntype useLongPressType = (\n  callback: () => void,\n  ms?: number\n) => {\n  onMouseDown: () => void;\n  onMouseUp: () => void;\n  onMouseLeave: () => void;\n  onTouchStart: () => void;\n  onTouchEnd: () => void;\n};\n\nexport const useLongPress: useLongPressType = (callback, ms = 300) => {\n  const [startLongPress, setStartLongPress] = useState(false);\n\n  useEffect(() => {\n    let timerId: number | undefined;\n    if (startLongPress) {\n      timerId = window.setTimeout(callback, ms);\n    } else {\n      clearTimeout(timerId);\n    }\n    return (): void => {\n      clearTimeout(timerId);\n    };\n  }, [callback, ms, startLongPress]);\n\n  const start = useCallback(() => {\n    setStartLongPress(true);\n  }, []);\n  const stop = useCallback(() => {\n    setStartLongPress(false);\n  }, []);\n\n  return {\n    onMouseDown: start,\n    onMouseUp: stop,\n    onMouseLeave: stop,\n    onTouchStart: start,\n    onTouchEnd: stop,\n  };\n};\n","import * as React from 'react';\n\nimport { set, get } from 'idb-keyval';\nimport { debug } from 'loglevel';\n\nexport const useIdbKeyStore = <T,>(\n  key: string,\n  defaultValue: T\n): [T, (value: T) => void] => {\n  const [item, setItem] = React.useState<T>(defaultValue);\n  React.useEffect(() => {\n    get(key).then((it) => {\n      if (it) {\n        setItem(JSON.parse(it as string) as T);\n      }\n    });\n  }, [key]);\n  const setValue = (value: T) => {\n    setItem(value);\n    set(key, JSON.stringify(value)).then(() => {\n      debug(`indexdb value of key:${key} got changed`);\n    });\n  };\n  return [item, setValue];\n};\n","import React from 'react';\n\nimport { useDispatch } from 'react-redux';\n\nimport { UserPreference } from '../api';\nimport { applyPreference } from './../../state/settings';\n\nexport const useUserPreference = (): [\n  /* User ,*/ (pref: UserPreference) => void\n] => {\n  const dispatch = useDispatch();\n  //   const user = useSelector((st: AppState) => st.user);\n\n  const updateUserPreference = (userPref: UserPreference) => {\n    dispatch(applyPreference(userPref));\n    // TODO: IGNORE FS update until i18n support\n    /* updateUserPreference(firestore, {\n            ...props.user,\n            preference: userPreference,\n          }); */\n  };\n  return [/* user */ updateUserPreference];\n};\n","import * as React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport isEqual from 'lodash.isequal';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { renderRoutes } from 'react-router-config';\nimport { HashRouter as Router } from 'react-router-dom';\n\nimport { FONT_SIZE_MAP, User } from './lib/api';\nimport { useIdbKeyStore } from './lib/hooks';\nimport { routes } from './routes';\nimport { thunkInitKuralIndexMapAndUserPref } from './state/kuralIndex';\nimport { AppState } from './state/reducers';\nimport { IDB_USER_PROFILE } from './views/pages/settings';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up('sm')]: {\n      fontSize: '3vw',\n    },\n  },\n}));\n\nconst injectUserStyles = (user: User) => {\n  const { fontSizeType, display } = user.preference;\n  const bodyStyles = document.body.style;\n  bodyStyles.setProperty('--text-size', `${FONT_SIZE_MAP[fontSizeType]}px`);\n  bodyStyles.setProperty('--app-color', display.color);\n  bodyStyles.setProperty('--app-bg-color', display.background.color);\n};\n\nconst App: React.FC = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const firestore = useFirestore();\n  const [lsUser] = useIdbKeyStore<User | null>(IDB_USER_PROFILE, null);\n  const remoteUser = useSelector((st: AppState) => st.user);\n  React.useEffect(() => {\n    dispatch(thunkInitKuralIndexMapAndUserPref(firestore));\n  }, [dispatch, firestore]);\n\n  React.useEffect(() => {\n    lsUser && injectUserStyles(lsUser);\n  }, [lsUser]);\n  React.useEffect(() => {\n    if (!isEqual(lsUser, remoteUser)) {\n      injectUserStyles(remoteUser);\n    }\n  }, [lsUser, remoteUser]);\n  return (\n    <div\n      className={classes.root}\n      style={{\n        fontSize: 'var(--text-size)',\n        color: 'var(--app-color)',\n        backgroundColor: 'var(--app-bg-color)',\n      }}>\n      <Router>{renderRoutes(routes)}</Router>\n    </div>\n  );\n};\n\nexport default App;\n","import { firebaseReducer } from 'react-redux-firebase';\nimport { combineReducers } from 'redux';\nimport { firestoreReducer } from 'redux-firestore';\n\nimport { KuralIndexReducer } from './kuralIndex';\nimport { SearchStateReducer } from './search';\nimport { PreferenceReducer } from './settings';\nimport { TitleReducer } from './title';\n\nexport const rootReducers = combineReducers({\n  kuralIndexMap: KuralIndexReducer,\n  title: TitleReducer,\n  search: SearchStateReducer,\n  user: PreferenceReducer,\n  firebase: firebaseReducer,\n  firestore: firestoreReducer,\n});\n\nexport type AppState = ReturnType<typeof rootReducers>;\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\nimport thunk from 'redux-thunk';\n\nimport { name } from './../../package.json';\nimport { rootReducers } from './reducers';\n\nconst devToolsEnhancer = composeWithDevTools({\n  name: `${name}-DevTools`,\n  trace: true,\n});\nexport const AppStore = createStore(\n  rootReducers,\n  devToolsEnhancer(applyMiddleware(thunk))\n);\n","import configureStore from 'redux-mock-store';\nimport thunk from 'redux-thunk';\nconst middleware = [thunk];\n\nexport const mockStore = configureStore(middleware);\n","import React from 'react';\n\nimport { Provider } from 'react-redux';\n\nimport { AppState } from './reducers';\nimport { AppStore } from './store';\nimport { mockStore } from './test';\n\ntype StoreProvideType = {\n  children: React.ReactNode;\n};\n\nconst StoreProvider: React.FC<StoreProvideType> = ({\n  children,\n}: StoreProvideType) => {\n  return <Provider store={AppStore}>{children}</Provider>;\n};\n\ntype MockStoreProps = {\n  children: React.ReactNode;\n  store: AppState;\n};\n\nconst WrapMockStore: React.FC<MockStoreProps> = ({\n  children,\n  store,\n}: MockStoreProps) => {\n  return <Provider store={mockStore(store)}>{children}</Provider>;\n};\n\nexport { StoreProvider, AppStore, WrapMockStore };\nexport type { AppState } from './reducers';\n","import firebase from 'firebase/app';\nimport log from 'loglevel';\nimport { ReactReduxFirebaseProviderProps } from 'react-redux-firebase';\nimport { createFirestoreInstance } from 'redux-firestore';\nimport 'firebase/firestore';\n\nimport { AppStore } from './state';\n// import 'firebase/auth';\n/* const uiConfig = {\n  signInFlow: 'popup',\n  signInSuccessUrl: '/signedIn',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n    firebase.auth.TwitterAuthProvider.PROVIDER_ID,\n    firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n  ],\n}; \n<FirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} /> */\n\nconst {\n  REACT_APP_API_KEY,\n  REACT_APP_AUTH_DOMAIN,\n  REACT_APP_DB_URL,\n  REACT_APP_PROJECT_ID,\n  REACT_APP_STORAGE_BUCKET,\n  REACT_APP_MESSAGING_SENDER_ID,\n  REACT_APP_FB_APP_ID,\n  REACT_APP_MESUREMENT_ID,\n} = process.env;\n\n((): void => {\n  if (\n    !(\n      REACT_APP_API_KEY &&\n      REACT_APP_AUTH_DOMAIN &&\n      REACT_APP_DB_URL &&\n      REACT_APP_PROJECT_ID\n    )\n  ) {\n    throw new Error('FB_CONF missing');\n  }\n})();\nconst FIREBASE_CONFIG = {\n  apiKey: REACT_APP_API_KEY,\n  projectId: REACT_APP_PROJECT_ID,\n  databaseURL: REACT_APP_DB_URL,\n  authDomain: REACT_APP_AUTH_DOMAIN,\n  storageBucket: REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: REACT_APP_MESSAGING_SENDER_ID,\n  appId: REACT_APP_FB_APP_ID,\n  measurementId: REACT_APP_MESUREMENT_ID,\n};\nfirebase.initializeApp(FIREBASE_CONFIG);\nfirebase\n  .firestore()\n  .enablePersistence({ synchronizeTabs: true })\n  .catch((err) => {\n    if (err.code === 'unimplemented') {\n      log.error('persistence not supported on the current browser');\n    }\n  });\n\nexport const REDUX_FIREBASE_CONF: ReactReduxFirebaseProviderProps = {\n  firebase,\n  dispatch: AppStore.dispatch,\n  createFirestoreInstance,\n  config: { userProfile: 'users', useFirestoreForProfile: true },\n};\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log('This web app is being served cache-first by a service');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { createMuiTheme } from '@material-ui/core';\n\nconst theme = createMuiTheme({\n  spacing: 8,\n});\n\nexport default theme;\n","import React from 'react';\n\nimport { ThemeProvider } from '@material-ui/core';\nimport log from 'loglevel';\nimport ReactDOM from 'react-dom';\nimport { ReactReduxFirebaseProvider } from 'react-redux-firebase';\n\nimport './index.scss';\n\nimport App from './App';\nimport { REDUX_FIREBASE_CONF } from './firebase';\nimport * as serviceWorker from './serviceWorker';\nimport { StoreProvider } from './state';\nimport AppTheme from './views/styles/theme';\n\nconst { NODE_ENV } = process.env;\n// disables logging in production release\nlog.setLevel(NODE_ENV === 'production' ? 'SILENT' : 'trace');\n\nReactDOM.render(\n  <StoreProvider>\n    <ReactReduxFirebaseProvider {...REDUX_FIREBASE_CONF}>\n      <ThemeProvider theme={AppTheme}>\n        <App />\n      </ThemeProvider>\n    </ReactReduxFirebaseProvider>\n  </StoreProvider>,\n  document.getElementById('root')\n);\n\nserviceWorker.register();\n","export type IndexMapType = {\n  section: {\n    [key: number]: {\n      litIndex: [number, number];\n      chapIndex: [number, number];\n    };\n  };\n  litChapMap: { [key: number]: [number, number] };\n};\n\nexport type Transliterator = {\n  id: number;\n  name: string;\n  lang: string;\n  rank?: number;\n};\n\ntype BaseType = {\n  value: string;\n  id: number;\n};\n\ntype Kural = BaseType;\ntype Section = BaseType;\ntype Literature = BaseType;\ntype Chapter = BaseType;\n\ntype Category = 'section' | 'chapter' | 'literature' | 'kural';\ntype RootCategory = Exclude<Category, 'kural'>;\ntype CategoryBaseTypeMap = Record<Category, BaseType>;\n\ntype KuralMixin = {\n  kural: Kural;\n  section: Section;\n  literature: Literature;\n  chapter: Chapter;\n};\n\ntype SearchResult = {\n  type: SearchTypes;\n  item: BaseType;\n  category: Category;\n  keyword: string;\n};\n\ntype SectionSearchType = 'BySectionNo' | 'BySectionContains';\ntype LiteratureSearchType = 'ByLiteratureNo' | 'ByLiteratureContains';\ntype ChapterSearchType = 'ByChapterNo' | 'ByChapterContains';\ntype KuralSearchType =\n  | 'ByKuralNo'\n  | 'ByKuralContains'\n  | 'ByKuralStartsWith'\n  | 'ByKuralEndsWith';\ntype KuralDetailSearchType = 'ByKuralDetailContains';\ntype SearchTypes =\n  | KuralSearchType\n  | SectionSearchType\n  | LiteratureSearchType\n  | ChapterSearchType\n  | KuralDetailSearchType;\n\nexport type KuralDetail = Record<string, string>;\nexport type {\n  BaseType,\n  Kural,\n  Section,\n  Literature,\n  Chapter,\n  KuralMixin,\n  Category,\n  RootCategory,\n  CategoryBaseTypeMap,\n  SearchResult,\n  SearchTypes,\n};\n\nexport type SearchCategoryTypes = Category | 'detail' | 'all';\n\nexport enum FontSizeType {\n  TINY = 'TINY',\n  SMALL = 'SMALL',\n  MEDIUM = 'MEDIUM',\n  LARGE = 'LARGE',\n  BIG = 'BIG',\n}\nexport type BackgroundColorItem = { label: string; color: string };\nexport type AppDisplay = {\n  color: string;\n  background: BackgroundColorItem;\n};\nexport type UserPreference = {\n  display: AppDisplay;\n  language: {\n    primary: string;\n    secondary: string[];\n  };\n  fontSizeType: FontSizeType;\n  transilterators?: number[];\n};\n\nexport type UserFavourite = {\n  category: Exclude<Category, 'section' | 'literature'>;\n  datetime: Date;\n  id: number;\n};\n\nexport type User = {\n  id: string;\n  favorites: UserFavourite[];\n  preference: UserPreference;\n};\n","/* eslint-disable no-fallthrough */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport {\n  RootCategory,\n  IndexMapType,\n  isCategoryValidErr,\n  isItemInRange,\n} from './';\nimport { Category } from './types';\n\nconst getLiteratureNoFromChapterNo = (\n  INDEX_MAP: IndexMapType,\n  chapterNo: number\n): number => {\n  isCategoryValidErr('chapter', chapterNo);\n  return Number(\n    Object.keys(INDEX_MAP.litChapMap).find((litId) =>\n      isItemInRange(chapterNo, INDEX_MAP.litChapMap[Number(litId)])\n    )\n  );\n};\n\nconst getSectionNoByLiteratureNo = (\n  INDEX_MAP: IndexMapType,\n  literatureNo: number\n): number => {\n  isCategoryValidErr('literature', literatureNo);\n  return Number(\n    Object.keys(INDEX_MAP.section)\n      .map((secId: string) => ({\n        section: secId,\n        litIndex: INDEX_MAP.section[Number(secId)].litIndex,\n      }))\n      .find((map) => isItemInRange(literatureNo, map.litIndex))?.section\n  );\n};\n\nexport const getCategoryIds = (\n  INDEX_MAP: IndexMapType,\n  category: RootCategory,\n  categoryId: number\n): Partial<Record<RootCategory, number>> => {\n  isCategoryValidErr(category, categoryId);\n  let result: Partial<Record<RootCategory, number>> = {\n    [category]: categoryId,\n  };\n  switch (category) {\n    case 'chapter':\n      result = {\n        ...result,\n        literature: getLiteratureNoFromChapterNo(INDEX_MAP, result.chapter!!),\n      };\n    case 'literature':\n      result = {\n        ...result,\n        section: getSectionNoByLiteratureNo(INDEX_MAP, result.literature!!),\n      };\n    case 'section':\n      break;\n  }\n  return result;\n};\n\nexport const CATEGORY_COLORS: Record<Category | 'default', string> = {\n  section: 'rgba(162, 43, 47,0.8)',\n  literature: 'cadetblue',\n  chapter: 'rgba(215, 22, 64, 0.8)',\n  kural: '#3f51b5',\n  default: 'blueviolet',\n};\n","import firebase from 'firebase';\nimport log from 'loglevel';\n\nexport const firestoreGetCacheFirst = async (\n  ref:\n    | firebase.firestore.CollectionReference<firebase.firestore.DocumentData>\n    | firebase.firestore.Query<firebase.firestore.DocumentData>\n): Promise<\n  firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>\n> => {\n  let result: firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>;\n  try {\n    result = await ref.get({ source: 'cache' });\n    if (result.empty) {\n      throw new Error('result not exists in cache');\n    }\n    log.debug(`fetches from cache`);\n  } catch (err) {\n    result = await ref.get({ source: 'server' });\n  }\n  return result;\n};\n","/* eslint-disable no-fallthrough */\nimport firebase from 'firebase';\nimport { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport { COLLECTION_NAME_MAP, BaseType, Chapter } from './';\nimport { firestoreGetCacheFirst } from './firestore';\nimport {\n  FontSizeType,\n  IndexMapType,\n  Literature,\n  SearchCategoryTypes,\n  SearchResult,\n  Section,\n} from './types';\n\nexport const getKuralIndex = async (\n  firestore: ExtendedFirestoreInstance\n): Promise<IndexMapType> => {\n  const indexSnapshot = await firestoreGetCacheFirst(\n    firestore.collection(COLLECTION_NAME_MAP.INDEX_MAP)\n  );\n  const getDocData = (\n    key: 'section' | 'litChapMap'\n  ):\n    | firebase.firestore.QueryDocumentSnapshot<firebase.firestore.DocumentData>\n    | undefined =>\n    indexSnapshot.docs.find(\n      (doc: firebase.firestore.DocumentData) => doc.id === key\n    );\n  return {\n    section: getDocData('section')?.data(),\n    litChapMap: getDocData('litChapMap')?.data(),\n  } as IndexMapType;\n};\n\nexport const getAllBaseItems = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string,\n  collectionKey: keyof typeof COLLECTION_NAME_MAP\n): Promise<BaseType[]> => {\n  const sectionSnapshot = await firestoreGetCacheFirst(\n    firestore.collection(COLLECTION_NAME_MAP[collectionKey])\n  );\n  return sectionSnapshot.docs.map((doc: firebase.firestore.DocumentData) => ({\n    id: Number(doc.id),\n    value: doc.data()[lang] as string,\n  }));\n};\n\nexport const getAllSections = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Section[]> => await getAllBaseItems(firestore, lang, 'SECTION');\n\nexport const getAllChapter = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Chapter[]> => await getAllBaseItems(firestore, lang, 'CHAPTER');\n\nexport const getAllLiterature = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Literature[]> => {\n  return getAllBaseItems(firestore, lang, 'LITERATURE');\n};\n\nexport const findChapterNoFromKuralNo = (kuralNo: number): number =>\n  Math.ceil(kuralNo / 10);\n\nexport const isResultOfType = (\n  result: SearchResult,\n  type: SearchCategoryTypes\n): boolean => {\n  const resType = result.type;\n  if (type === 'chapter') {\n    return resType.startsWith('ByChapter');\n  }\n  if (type === 'kural') {\n    return resType.startsWith('ByKural');\n  }\n  if (type === 'detail') {\n    return resType.startsWith('ByKuralDetail');\n  }\n  if (type === 'section') {\n    return resType.startsWith('BySection');\n  }\n  if (type === 'literature') {\n    return resType.startsWith('ByLiterature');\n  }\n  return false;\n};\n\nexport const FONT_SIZE_MAP: Record<FontSizeType, number> = {\n  BIG: 24,\n  LARGE: 21,\n  MEDIUM: 18,\n  SMALL: 15,\n  TINY: 12,\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport { isCategoryValidErr, COLLECTION_NAME_MAP, KuralDetail } from './';\n\nexport const getKurals = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Record<number, string>> => {\n  const kuralSnapshotRef = await firestore\n    .collection(COLLECTION_NAME_MAP.KURAL)\n    .doc(lang)\n    .get();\n  return (kuralSnapshotRef.data() || {}) as Record<number, string>;\n};\n\nexport const getKuralDetail = async (\n  firestore: ExtendedFirestoreInstance,\n  kId: number\n): Promise<KuralDetail> => {\n  isCategoryValidErr('kural', kId);\n  const snapshot = await firestore\n    .collection(COLLECTION_NAME_MAP.KURAL_DETAIL)\n    .doc(`${kId}`)\n    .get();\n  return snapshot.data() as Record<string, string>;\n};\n\nexport const getKuralIdsOfChapter = (chapter: number): number[] => {\n  isCategoryValidErr('chapter', chapter);\n  const startKuralNo = (chapter - 1) * 10 + 1;\n  const kuralRangeIds = Array.from(Array(10).keys()).map(\n    (i) => startKuralNo + i\n  );\n  return kuralRangeIds;\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport { COLLECTION_NAME_MAP, Transliterator } from './';\n\ntype TransliteratorDocumentData = Omit<Transliterator, 'id'>;\nexport const getAllTransliterators = async (\n  firestore: ExtendedFirestoreInstance\n): Promise<Transliterator[]> => {\n  const transliteratorSnapRef = await firestore\n    .collection(COLLECTION_NAME_MAP.TRANSLITERATOR)\n    .get();\n  return transliteratorSnapRef.docs.map((doc) => ({\n    id: Number(doc.id),\n    ...(doc.data() as TransliteratorDocumentData),\n  }));\n};\n","import firebase from 'firebase/app';\nimport { ExtendedFirestoreInstance } from 'react-redux-firebase';\nimport { ANONYOMOUS_USER } from 'src/state/settings';\n\nimport { COLLECTION_NAME_MAP } from '.';\nimport { User } from './types';\n\ntype UserPreferenceDocument = Omit<User, 'id'>;\nexport const getUserPreferences = async (\n  firestore: ExtendedFirestoreInstance,\n  userId: string\n): Promise<User> => {\n  const snapshot = await firestore\n    .collection(COLLECTION_NAME_MAP.USER)\n    .where(firebase.firestore.FieldPath.documentId(), '==', userId)\n    .limit(1)\n    .get();\n  if (snapshot.empty) {\n    throw new Error('user not found');\n  }\n  const userDocRef = snapshot.docs[0];\n  return {\n    id: userDocRef.id,\n    ...(userDocRef.data() as UserPreferenceDocument),\n  };\n};\n\nexport const updateUserPreference = async (\n  firestore: ExtendedFirestoreInstance,\n  user: User\n): Promise<void> => {\n  if (user.id !== ANONYOMOUS_USER.id) {\n    await firestore\n      .collection(COLLECTION_NAME_MAP.USER)\n      .doc(`${user.id}`)\n      .set(user);\n  }\n};\n","import { BaseType, Category } from 'src/lib/api';\n\ntype isItemValidType = (key: number) => boolean;\nconst isSectionNoValid: isItemValidType = (section) =>\n  section >= 1 && section <= 3;\nconst isLiteratureNoValid: isItemValidType = (literature) =>\n  literature >= 1 && literature <= 13;\nconst isChapterNoValid: isItemValidType = (chapter) =>\n  chapter >= 1 && chapter <= 133;\nconst isKuralNoValid: isItemValidType = (kuralNo) =>\n  kuralNo >= 1 && kuralNo <= 1330;\n\ntype getItemByPositionType = (key: number) => number;\nconst getSectionPrev: getItemByPositionType = (section) =>\n  section === 1 ? 3 : section - 1;\nconst getSectionNext: getItemByPositionType = (section) =>\n  section === 3 ? 1 : section + 1;\nconst getLiteraturePrev: getItemByPositionType = (literature) =>\n  literature === 1 ? 13 : literature - 1;\nconst getLiteratureNext: getItemByPositionType = (literature) =>\n  literature === 13 ? 1 : literature + 1;\nconst getChapterPrev: getItemByPositionType = (chapter) =>\n  chapter === 1 ? 133 : chapter - 1;\nconst getChapterNext: getItemByPositionType = (chapter) =>\n  chapter === 133 ? 1 : chapter + 1;\nconst getKuralPrev: getItemByPositionType = (kural) =>\n  kural === 1 ? 1330 : kural - 1;\nconst getKuralNext: getItemByPositionType = (kural) =>\n  kural === 1330 ? 1 : kural + 1;\n\nexport const isItemInRange = (item: number, range: [number, number]): boolean =>\n  item >= range[0] && item <= range[1];\n\nexport const fillRange = (range: [number, number]): number[] => {\n  const out = [];\n  for (let i = range[0]; i <= range[1]; i++) {\n    out.push(i);\n  }\n  return out;\n};\n\nexport const isCategoryValid = (type: Category, id: number): boolean => {\n  switch (type) {\n    case 'section':\n      return isSectionNoValid(id);\n    case 'literature':\n      return isLiteratureNoValid(id);\n    case 'chapter':\n      return isChapterNoValid(id);\n    case 'kural':\n      return isKuralNoValid(id);\n  }\n};\n\nexport const isCategoryValidErr = (type: Category, id: number): void => {\n  if (!isCategoryValid(type, id)) {\n    throw new Error(`${type} with ${id} not found`);\n  }\n};\n\nexport const getItemByPosition = (\n  type: Category,\n  direction: 'PREV' | 'NEXT',\n  id: number\n): number => {\n  switch (type) {\n    case 'section':\n      return direction === 'NEXT' ? getSectionNext(id) : getSectionPrev(id);\n    case 'literature':\n      return direction === 'NEXT'\n        ? getLiteratureNext(id)\n        : getLiteraturePrev(id);\n    case 'chapter':\n      return direction === 'NEXT' ? getChapterNext(id) : getChapterPrev(id);\n    case 'kural':\n      return direction === 'NEXT' ? getKuralNext(id) : getKuralPrev(id);\n  }\n};\n\ntype BaseTypeMap = Record<number, BaseType>;\nexport const toBaseTypeMap = (list: BaseType[]): BaseTypeMap => {\n  return list.reduce(\n    (oldVal, item) => ({ ...oldVal, [item.id]: item }),\n    {} as BaseTypeMap\n  );\n};\n","import { getCategoryIds } from './category';\nimport { findChapterNoFromKuralNo } from './common';\nimport { Category, IndexMapType, RootCategory } from './types';\n\ntype TopRouteMap = Partial<Record<RootCategory, number>>;\nexport type CategoryIdMapPartial = Partial<Record<Category, number>>;\n\nconst rootCategoryFinder = (\n  INDEX_MAP: IndexMapType,\n  options: TopRouteMap\n): TopRouteMap => {\n  const category = Object.keys(options).find(\n    (k: string) => options[k as RootCategory]\n  ) as RootCategory;\n  return INDEX_MAP && category\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      getCategoryIds(INDEX_MAP, category, options[category]!!)\n    : {};\n};\n\nexport const findCategoryRouteMap = (\n  INDEX_MAP: IndexMapType,\n  filter: CategoryIdMapPartial\n): CategoryIdMapPartial => {\n  const { kural, chapter, literature, section } = filter;\n  const KURALS_CHAPTER = kural ? findChapterNoFromKuralNo(kural) : chapter;\n  return {\n    ...rootCategoryFinder(INDEX_MAP, {\n      chapter: KURALS_CHAPTER,\n      literature,\n      section,\n    }),\n    ...(kural ? { kural } : {}),\n  };\n};\n\nexport const convertCategoryRouteMapToString = (\n  filter: CategoryIdMapPartial\n): string => {\n  return (['section', 'literature', 'chapter', 'kural'] as Category[])\n    .filter((k) => filter[k as Category] !== undefined)\n    .map((k) => filter[k as Category])\n    .join('/');\n};\n\nexport const findCategoryRouteMapString = (\n  INDEX_MAP: IndexMapType,\n  filter: CategoryIdMapPartial\n): string => {\n  return convertCategoryRouteMapToString(\n    findCategoryRouteMap(INDEX_MAP, filter)\n  );\n};\n","import { Transliterator, User } from './types';\n\nexport const getUserPreferedLanguages = (user: User): string[] => {\n  const { primary, secondary } = user.preference.language;\n  return [primary, ...secondary];\n};\n\nexport const findTransliteratorsOfLanguage = (\n  language: string[],\n  tMap: Record<number, Transliterator>\n): Record<number, Transliterator> => {\n  if (!language.length) {\n    return tMap;\n  }\n  return Object.entries(tMap)\n    .filter(([id, transliterator]) =>\n      language.some((lang) => lang === transliterator.lang)\n    )\n    .reduce((state, [key, value]) => ({ ...state, [key]: value }), {});\n};\n\nexport type UserTransliteratorMap = [Transliterator[], Transliterator[]];\n\ntype getUserTransliteratorsType = (\n  u: User,\n  tMap: Record<number, Transliterator>\n) => UserTransliteratorMap;\nexport const getUserTransliterators: getUserTransliteratorsType = (\n  user,\n  transliteratorsMap\n) => {\n  const result: UserTransliteratorMap = [[], []];\n  const userLangs = getUserPreferedLanguages(user);\n  const userTMap = findTransliteratorsOfLanguage(userLangs, transliteratorsMap);\n  const userLikedTransliterators = user.preference?.transilterators || [];\n  if (userLikedTransliterators.length) {\n    const allowedTransliteratorIds = Object.keys(userTMap).map((t) =>\n      parseInt(t)\n    );\n    result[0] = userLikedTransliterators\n      .filter((t) => allowedTransliteratorIds.includes(t))\n      .map((t) => userTMap[t]);\n    result[1] = allowedTransliteratorIds\n      .filter((t) => !userLikedTransliterators.includes(t))\n      .map((t) => userTMap[t]);\n  } else {\n    result[0] = Object.values(userTMap);\n  }\n  return result;\n};\n","import { Category, SearchCategoryTypes } from './types';\n\nexport const COLLECTION_NAME_MAP = {\n  KURAL: 'KURAL',\n  TRANSLITERATOR: 'TRANSLITERATOR',\n  LANGUAGE: 'LANGUAGE',\n  DISPLAY: 'DISPLAY_CONFIG',\n  KURAL_DETAIL: 'KURAL_DETAIL',\n  USER: 'USER',\n  SECTION: 'SECTION',\n  USER_FAVOURITES: 'USER_FAVOURITES',\n  USER_SEARCH_HISTORY: 'USER_SEARCH_HISTORY',\n  LITERATURE: 'LITERATURE',\n  CHAPTER: 'CHAPTER',\n  INDEX_MAP: 'INDEX_MAP',\n};\n\nexport const SearchCategoryLabelMap: Record<SearchCategoryTypes, string> = {\n  all: '',\n  chapter: '',\n  kural: '',\n  literature: '',\n  section: '',\n  detail: '',\n};\n\nexport const ITEMS_COUNT_MAP: Record<Category, number> = {\n  kural: 1330,\n  chapter: 133,\n  literature: 13,\n  section: 3,\n};\n\nexport * from './category';\nexport * from './common';\nexport * from './kural';\nexport * from './transilterator';\nexport * from './types';\nexport * from './preference';\nexport * from './util';\nexport * from './route';\nexport * from './user';\n"],"sourceRoot":""}