(this.webpackJsonpthirukural=this.webpackJsonpthirukural||[]).push([[8],{586:function(e,t,a){"use strict";a.r(t),a.d(t,"CategoryViewerContainer",(function(){return E}));var n=a(8),c=a(3),i=a(0),r=a.n(i),o=a(290),l=a(5),s=a(9),u=a(15),d=a(6),p=a(31),b=a(40),j=a(584),f=Object(o.a)((function(e){return{categoryFilterRoot:{"&:hover fieldset":{borderColor:"var(--app-color) !important"}},categoryFilter:{fontSize:"0.6rem",lineHeight:"0.6rem",paddingTop:3,paddingBottom:3}}})),O=["section","literature","chapter"],v=function(e){var t=f(),a=r.a.useState(O[O.length-1]),i=Object(n.a)(a,2),o=i[0],s=i[1];return r.a.useEffect((function(){e.onSelect&&e.onSelect(o)}),[o,e]),Object(c.jsx)(j.a,{variant:"outlined",native:!0,classes:{select:t.categoryFilter},className:Object(l.a)(t.categoryFilterRoot,e.className),value:o,onChange:function(e){return s(e.target.value)},children:O.map((function(e,t){return Object(c.jsx)("option",{value:e,children:e.toUpperCase()},t)}))})},g=a(4),h=a(7),m=a(517),x=a(29),y=a(562),k=a(495),C=a(519),S=a(128),N=Object(o.a)((function(e){return{listItem:{cursor:"pointer",position:"relative",borderRadius:e.spacing(2),WebkitTapHighlightColor:"transparent",border:"none","&.level-0":{paddingLeft:e.spacing(2)},"&.level-1":{paddingLeft:e.spacing(3)},"&.level-2":{paddingLeft:e.spacing(4)},"&.on-focus":{color:e.palette.secondary.main},"&.is-active":{color:"var(--app-color)",border:"2px solid"}},listIcon:{display:"flex",justifyContent:"center",alignItems:"center"}}})),I=function(e){var t=e.level,a=void 0===t?0:t,n=e.hasNodes,i=e.isOpen,r=e.label,o=e.toggleNode,l=e.focused,s=e.onClick,u=e.active,d=(Object(h.a)(e,["level","hasNodes","isOpen","label","toggleNode","focused","onClick","active"]),N());return Object(c.jsxs)(k.a,{onClick:function(e){n&&o&&o(),s(e)},className:"".concat(d.listItem," level-").concat(a," ").concat(l&&"on-focus"," ").concat(u&&"is-active"),children:[Object(c.jsx)(C.a,{disableTypography:!0,primary:r}),n&&Object(c.jsx)("div",{className:d.listIcon,children:Object(c.jsx)(S.a,{isExpanded:i})})]})},R=Object(o.a)((function(e){return{treeMenuContainer:{"&>div":{outlineStyle:"none"}},list:{}}})),T=function(e){e.className;var t=Object(h.a)(e,["className"]),a=R();return Object(x.debug)("CategoryViewer renders"),Object(c.jsx)("div",{className:a.treeMenuContainer,children:Object(c.jsx)(y.a,Object(g.a)(Object(g.a)({},t),{},{children:function(e){var t=e.items;return Object(c.jsx)(m.a,{className:a.list,children:t.map((function(e){var t=e.key,a=Object(h.a)(e,["key"]);return Object(c.jsx)(I,Object(g.a)({},a),t)}))})}}))})},w=Object(o.a)((function(e){return{categoryRoot:{padding:e.spacing(1)},filterContainer:{textAlign:"left"}}})),E=function(e){var t=Object(u.g)(),a=w(),i=r.a.useState("chapter"),o=Object(n.a)(i,2),j=o[0],f=o[1],O=r.a.useState([]),g=Object(n.a)(O,2),h=g[0],m=g[1],x=Object(s.d)((function(e){return e.kuralIndexMap})),y=x.section,k=x.literature,C=x.chapter,S=x.index,N=Object(p.h)(),I=Object(n.a)(N,3),R=I[1],E=I[2],L=r.a.useCallback((function(e,t){return E(t).map((function(a,n){return{key:a.id.toString(),label:a.value,index:n,path:"".concat(e,"/").concat(t,"/").concat(a.id)}}))}),[E]),A=r.a.useCallback((function(e){return R(e).map((function(t,a){return{key:t.id.toString(),label:t.value,index:a,path:"".concat(e,"/").concat(t.id),nodes:L(e,t.id)}}))}),[L,R]),F=new URLSearchParams(t.location.search).get("chapter"),G=t.location.pathname.replace(new RegExp("".concat(b.a.LIST_CATEGORY,"(/)?")),"");r.a.useEffect((function(){var e=[];switch(j){case"section":e=Object.values(y).map((function(e,t){return{key:e.id.toString(),label:e.value,index:t,path:"".concat(e.id),nodes:A(e.id)}}));break;case"literature":e=Object.values(k).map((function(e,t){var a=Object(d.u)(S,e.id);return{key:e.id.toString(),label:e.value,index:t,path:"".concat(a,"/").concat(e.id),nodes:L(a,e.id)}}));break;case"chapter":e=Object.values(C).map((function(e,t){var a=Object(d.t)(S,e.id),n=Object(d.u)(S,a);return{key:e.id.toString(),label:e.value,index:t,path:"".concat(n,"/").concat(a,"/").concat(e.id)}}))}m(e)}),[A,j,y,k,C,L,S]);return Object(c.jsxs)("div",{className:Object(l.a)(a.categoryRoot,e.className),children:[Object(c.jsx)("div",{className:a.filterContainer,children:Object(c.jsx)(v,{onSelect:f})}),Object(c.jsx)(T,{initialActiveKey:G,initialFocusKey:F?"".concat(G,"/").concat(F):G,initialOpenNodes:function(){var e=G.split("/").map((function(e){return G.substring(0,G.indexOf(e)+e.length)}));return 2===e.length&&e[0]===e[1]&&(e[1]="".concat(e[0],"/").concat(e[1])),e}(),onClickItem:function(e){var a="".concat(b.a.LIST_CATEGORY,"/").concat(e.path);if(e.hasNodes)t.replace(a);else{var n=e.key.lastIndexOf("/"),c=e.key.substring(n+1),i=e.key.substring(0,n),r="".concat(b.a.LIST_CATEGORY,"/").concat(i,"?chapter=").concat(c);t.replace(r),t.push(a)}},data:h,hasSearch:!1})]})};t.default=E}}]);
//# sourceMappingURL=8.ad07ee9e.chunk.js.map