{"version":3,"sources":["lib/api/category.ts","lib/api/common.ts","state/kuralIndex/index.ts","lib/api/kural.ts","lib/api/transilterator.ts","lib/api/preference.ts","lib/api/util.ts","lib/api/route.ts","state/kuralIndex/reducer.ts","state/kuralIndex/actions.ts","lib/hooks/useNavigation.tsx","lib/hooks/useSubCategory.tsx","lib/hooks/useRoute.tsx","state/search/index.ts","lib/hooks/useKuralSearch.ts","views/components/kural/CategoryViewer.tsx","lib/hooks/useFavouriteDetector.tsx","views/components/kural/KuralCard.tsx","views/components/kural/KuralDetail.tsx","lib/hooks/useKuralDetail.tsx","views/components/kural/KuralDetailViewer.tsx","views/components/kural/ListKuralCard.tsx","views/components/kural/ListKuralsOfChapter.tsx","views/components/kural/KuralsByChapterViewer.tsx","views/components/common/ListView.tsx","views/components/kural/FavoritesViewer.tsx","lib/hooks/useBaseItem.tsx","views/pages/home/index.tsx","views/components/kural/RouteViewer.tsx","lib/hooks/useLongPress.tsx","views/pages/list/index.tsx","views/components/kural/KuralSearch.tsx","views/components/common/HideOnScroll.tsx","views/components/common/MyAppBar.tsx","state/title/index.ts","views/components/common/MyBottomNavigationBar.tsx","views/components/kural/KuralActionBar.tsx","views/pages/main/main.tsx","views/pages/search/SearchChips.tsx","views/pages/search/search.tsx","views/pages/settings/index.tsx","routes.tsx","App.tsx","state/reducers.ts","state/store.ts","state/test.tsx","state/index.tsx","firebase.ts","serviceWorker.js","views/styles/theme.ts","index.tsx","lib/api/index.ts","lib/api/firestore.ts","state/settings/index.ts"],"names":["getLiteratureNoFromChapterNo","INDEX_MAP","chapterNo","isCategoryValidErr","Number","Object","keys","litChapMap","find","litId","isItemInRange","getSectionNoByLiteratureNo","literatureNo","section","map","secId","litIndex","getCategoryIds","category","categoryId","result","literature","chapter","CATEGORY_COLORS","kural","default","getKuralIndex","firestore","a","firestoreGetCacheFirst","collection","COLLECTION_NAME_MAP","indexSnapshot","getDocData","key","docs","doc","id","data","getAllBaseItems","lang","collectionKey","sectionSnapshot","value","getAllSections","getAllChapter","getAllLiterature","findChapterNoFromKuralNo","kuralNo","Math","ceil","isResultOfType","type","resType","startsWith","getKural","kId","KURAL","get","kuralSnapshotRef","getKuralDetail","KURAL_DETAIL","snapshot","getKuralByIds","ids","kuralsRef","where","firebase","FieldPath","documentId","toString","sort","b","getKuralsOfChapter","startKuralNo","kuralRangeIds","Array","from","i","getAllTransliterators","TRANSLITERATOR","transliteratorSnapRef","getUserPreferences","userId","USER","limit","empty","Error","userDocRef","updateUserPreference","user","set","item","range","fillRange","out","push","isCategoryValid","toBaseTypeMap","list","reduce","oldVal","findCategoryRouteMap","filter","KURALS_CHAPTER","options","k","rootCategoryFinder","findCategoryRouteMapString","undefined","join","convertCategoryRouteMapToString","defaultState","transliterator","index","KuralIndexReducer","state","action","payload","thunkInitKuralIndexMapAndUserPref","dispatch","primary","preference","language","kuralIndex","sectionMap","literatureMap","chapterMap","transliteratorMap","t1","setUser","useNavigation","history","useHistory","route","useSubCategory","resultCategory","useFirestore","React","useState","setResult","PRIMARY_LANG","useSelector","st","preferences","KURAL_INDEX","kuralIndexMap","getLiteraturesBySection","useCallback","sectionId","getChaptersFromLiterature","c","useEffect","length","getRoutes","categories","favourites","routes","ROUTE_CONSTANTS","LIST_CATEGORY","color","isFavourite","some","ch","LIST","useRoute","inputFilter","setInputFilter","useDispatch","routeMap","setRouteMap","findFilters","location","pathname","KURAL_NO","CHAPTER_NO","LITERATURE_NO","SECTION_NO","log","debug","sectionRoute","matchPath","path","exact","literatureRoute","chapterRoute","kuralRoute","params","listen","getRouteValue","output","input","favorites","itemIndex","indexOf","splice","updatedUserPref","updateUserFSAsync","sortSearchResults","items","SortValueMap","status","keyword","results","filters","userSelections","detail","useKuralSearch","USER_LANG","addResults","searchTypes","forEach","parseInt","sectionNo","setSearchKeyword","types","isInteger","searchNumber","e","findSuitableSearchTypes","setSearchStatus","useStyles","makeStyles","theme","favStyle","treeMenuContainer","outlineStyle","listItem","cursor","position","WebkitTapHighlightColor","paddingLeft","spacing","listIcon","display","justifyContent","alignItems","TreeListItem","level","hasNodes","isOpen","label","toggleNode","onClick","focused","classes","ListItem","className","stopPropagation","ExpandMore","ChevronRight","ListItemText","flexDirection","userSelect","breakpoints","up","badgeContainer","background","palette","main","height","fontSize","lineHeight","borderRadius","padding","minWidth","kuralWrapper","width","KuralCard","props","root","clsx","component","componentType","showBadge","dangerouslySetInnerHTML","__html","replace","transliteratorList","marginBottom","borderBottom","fontWeight","transliteration","paddingTop","paddingBottom","textAlign","WebkitTextStrokeWidth","WebkitTextStroke","letterSpacing","KuralDetail","kuralInput","transliterators","setKural","kuralDetail","setKuralDetail","values","trans","t2","rank","t1r","t2r","useKuralDetail","List","transliteratorId","name","Chip","size","SwiperCore","use","Virtual","Keyboard","KuralDetailViewer","useParams","activeKuralNo","setActiveKuralNo","slideKuralIds","ITEMS_COUNT_MAP","newRoute","keyboard","grabCursor","initialSlide","spaceBetween","slidesPerView","allowSlideNext","virtual","onTransitionEnd","swiper","activeIndex","virtualIndex","renderSlide","kuralCard","ListKuralCard","navigateTo","openKuralDetail","kurals","ListKuralsOfChapter","gridTemplateColumns","idWrap","opacity","left","labelWrap","ListView","divider","showDivider","onItemSelected","collapsableGroup","listItemTitle","marginLeft","listTitleBadge","chapFavorites","paddingRight","FavoritesViewer","itemNo","useBaseItem","getChapter","KURAL_IDS","CHAPTER_IDS","setKurals","expand","isKuralVisible","setKuralVisible","isChapterVisible","setChapterVisible","onChapterSelected","onKuralSelected","then","chapterKuralMap","Map","it","chap","has","noRecordsFound","GroupTitleMaker","isVisible","title","badgeContent","selected","button","inset","Badge","badge","showZero","max","invisible","disablePadding","Collapse","in","style","timeout","chapterInfo","ListSubheader","disableSticky","marginTop","favoriteCard","margin","Home","Card","variant","CardHeader","CardContent","routeContainer","flexWrap","chipRoot","maxWidth","favoriteIcon","RouteChip","onLongPress","longPressEventHandlers","callback","ms","startLongPress","setStartLongPress","timerId","window","setTimeout","clearTimeout","start","stop","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","useLongPress","icon","backgroundColor","RouteViewer","toggleRouteFavourite","renderRight","SEARCH_ROUTE","createStyles","border","borderColor","fade","grey","searchicon","clearIcon","flex","light","KuralSearch","inputRef","useRef","setSearchKey","debounced","useDebouncedCallback","setKeyword","isExact","isSearchRoute","focus","setFocus","current","querySelector","InputBase","ref","placeholder","inputProps","onChange","text","target","onFocus","onSearchTap","Fade","trim","HideOnScroll","children","trigger","useScrollTrigger","Slide","appear","direction","toolbar","avatar","actionsGroup","searchbar","marginRight","flexGrow","iconButton","MyAppBar","AppBar","elevation","Toolbar","isHomeRoute","Avatar","Person","IconButton","goBack","KeyboardBackspace","actions","defalutTitle","appBar","bottom","top","boxShadow","borderTop","MyBottomNavigationBar","BottomNavigation","currentRoute","_","BottomNavigationAction","ActionBarItems","KuralActionBar","homePath","useRouteMatch","listPath","useLocation","initRoute","setRoute","Main","renderRoutes","searchFilter","SearchChips","setFilters","search","hasStartsWith","f","filterOptions","SearchCategoryLabelMap","all","isShow","Set","r","isSelected","selection","kuralSearchItem","searchItem","searchItemAvatar","SearchResultItem","innerContent","charAt","toUpperCase","Search","renderItem","itemText","formControl","SettingsLabel","Settings","fontSizeOptions","baseSize","count","offset","getFontSizeOptions","DEFAULT","FormControl","Select","applyPreference","assign","v","MenuItem","ROOT","SEARCH","FAVOURITE","SETTINGS","SettingsViewer","Container","disableGutters","activeChapterNo","setActiveChapterNo","slideChapterIds","chId","sections","getChaptersByLiterature","TREE_DATA","s","sIndex","nodes","lit","chIndex","onClickItem","hasSearch","itemProps","to","App","settings","rootReducers","combineReducers","concat","PreferenceReducer","firebaseReducer","firestoreReducer","devToolsEnhancer","composeWithDevTools","trace","AppStore","createStore","applyMiddleware","thunk","middleware","StoreProvider","configureStore","store","process","REACT_APP_API_KEY","REACT_APP_AUTH_DOMAIN","REACT_APP_DB_URL","REACT_APP_PROJECT_ID","REACT_APP_STORAGE_BUCKET","REACT_APP_MESSAGING_SENDER_ID","REACT_APP_FB_APP_ID","REACT_APP_MESUREMENT_ID","FIREBASE_CONFIG","apiKey","projectId","databaseURL","authDomain","storageBucket","messagingSenderId","appId","measurementId","initializeApp","enablePersistence","synchronizeTabs","catch","err","code","error","REDUX_FIREBASE_CONF","createFirestoreInstance","config","userProfile","useFirestoreForProfile","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","onUpdate","onSuccess","createMuiTheme","setLevel","ReactDOM","render","ThemeProvider","AppTheme","document","getElementById","URL","href","origin","addEventListener","fetch","headers","response","contentType","ready","unregister","reload","checkValidServiceWorker","LANGUAGE","SECTION","USER_FAVOURITES","USER_SEARCH_HISTORY","LITERATURE","CHAPTER","source","pref","secondary"],"mappings":"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","file":"static/js/main.35ae3749.chunk.js","sourcesContent":["/* eslint-disable no-fallthrough */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport {\n  RootCategory,\n  IndexMapType,\n  isCategoryValidErr,\n  isItemInRange,\n} from './';\nimport { Category } from './types';\n\nconst getLiteratureNoFromChapterNo = (\n  INDEX_MAP: IndexMapType,\n  chapterNo: number\n): number => {\n  isCategoryValidErr('chapter', chapterNo);\n  return Number(\n    Object.keys(INDEX_MAP.litChapMap).find((litId) =>\n      isItemInRange(chapterNo, INDEX_MAP.litChapMap[Number(litId)])\n    )\n  );\n};\n\nconst getSectionNoByLiteratureNo = (\n  INDEX_MAP: IndexMapType,\n  literatureNo: number\n): number => {\n  isCategoryValidErr('literature', literatureNo);\n  return Number(\n    Object.keys(INDEX_MAP.section)\n      .map((secId: string) => ({\n        section: secId,\n        litIndex: INDEX_MAP.section[Number(secId)].litIndex,\n      }))\n      .find((map) => isItemInRange(literatureNo, map.litIndex))?.section\n  );\n};\n\nexport const getCategoryIds = (\n  INDEX_MAP: IndexMapType,\n  category: RootCategory,\n  categoryId: number\n): Partial<Record<RootCategory, number>> => {\n  isCategoryValidErr(category, categoryId);\n  let result: Partial<Record<RootCategory, number>> = {\n    [category]: categoryId,\n  };\n  switch (category) {\n    case 'chapter':\n      result = {\n        ...result,\n        literature: getLiteratureNoFromChapterNo(INDEX_MAP, result.chapter!!),\n      };\n    case 'literature':\n      result = {\n        ...result,\n        section: getSectionNoByLiteratureNo(INDEX_MAP, result.literature!!),\n      };\n    case 'section':\n      break;\n  }\n  return result;\n};\n\nexport const CATEGORY_COLORS: Record<Category | 'default', string> = {\n  section: 'rgba(162, 43, 47,0.8)',\n  literature: 'cadetblue',\n  chapter: 'rgba(215, 22, 64, 0.8)',\n  kural: '#3f51b5',\n  default: 'blueviolet',\n};\n","/* eslint-disable no-fallthrough */\nimport firebase from 'firebase';\nimport { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport { COLLECTION_NAME_MAP, BaseType, Chapter } from './';\nimport { firestoreGetCacheFirst } from './firestore';\nimport {\n  IndexMapType,\n  Literature,\n  SearchCategoryTypes,\n  SearchResult,\n  Section,\n} from './types';\n\nexport const getKuralIndex = async (\n  firestore: ExtendedFirestoreInstance\n): Promise<IndexMapType> => {\n  const indexSnapshot = await firestoreGetCacheFirst(\n    firestore.collection(COLLECTION_NAME_MAP.INDEX_MAP)\n  );\n  const getDocData = (\n    key: 'section' | 'litChapMap'\n  ):\n    | firebase.firestore.QueryDocumentSnapshot<firebase.firestore.DocumentData>\n    | undefined =>\n    indexSnapshot.docs.find(\n      (doc: firebase.firestore.DocumentData) => doc.id === key\n    );\n  return {\n    section: getDocData('section')?.data(),\n    litChapMap: getDocData('litChapMap')?.data(),\n  } as IndexMapType;\n};\n\nexport const getAllBaseItems = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string,\n  collectionKey: keyof typeof COLLECTION_NAME_MAP\n): Promise<BaseType[]> => {\n  const sectionSnapshot = await firestoreGetCacheFirst(\n    firestore.collection(COLLECTION_NAME_MAP[collectionKey])\n  );\n  return sectionSnapshot.docs.map((doc: firebase.firestore.DocumentData) => ({\n    id: Number(doc.id),\n    value: doc.data()[lang] as string,\n  }));\n};\n\nexport const getAllSections = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Section[]> => await getAllBaseItems(firestore, lang, 'SECTION');\n\nexport const getAllChapter = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Chapter[]> => await getAllBaseItems(firestore, lang, 'CHAPTER');\n\nexport const getAllLiterature = async (\n  firestore: ExtendedFirestoreInstance,\n  lang: string\n): Promise<Literature[]> => {\n  return getAllBaseItems(firestore, lang, 'LITERATURE');\n};\n\nexport const findChapterNoFromKuralNo = (kuralNo: number): number =>\n  Math.ceil(kuralNo / 10);\n\nexport const isResultOfType = (\n  result: SearchResult,\n  type: SearchCategoryTypes\n): boolean => {\n  const resType = result.type;\n  if (type === 'chapter') {\n    return resType.startsWith('ByChapter');\n  }\n  if (type === 'kural') {\n    return resType.startsWith('ByKural');\n  }\n  if (type === 'detail') {\n    return resType.startsWith('ByKuralDetail');\n  }\n  if (type === 'section') {\n    return resType.startsWith('BySection');\n  }\n  if (type === 'literature') {\n    return resType.startsWith('ByLiterature');\n  }\n  return false;\n};\n","export * from './reducer';\nexport * from './types';\nexport * from './actions';\n","import firebase from 'firebase/app';\nimport { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport {\n  isCategoryValidErr,\n  COLLECTION_NAME_MAP,\n  KuralDetail,\n  Kural,\n  BaseType,\n} from './';\nimport { firestoreGetCacheFirst } from './firestore';\n\nexport const getKural = async (\n  firestore: ExtendedFirestoreInstance,\n  kId: number,\n  lang: string\n): Promise<Kural> => {\n  isCategoryValidErr('kural', kId);\n  const kuralSnapshotRef = await firestore\n    .collection(COLLECTION_NAME_MAP.KURAL)\n    .doc(`${kId}`)\n    .get();\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return { id: kId, value: kuralSnapshotRef.data()!![lang] };\n};\n\nexport const getKuralDetail = async (\n  firestore: ExtendedFirestoreInstance,\n  kId: number\n): Promise<KuralDetail> => {\n  isCategoryValidErr('kural', kId);\n  const snapshot = await firestore\n    .collection(COLLECTION_NAME_MAP.KURAL_DETAIL)\n    .doc(`${kId}`)\n    .get();\n  return snapshot.data() as Record<string, string>;\n};\n\nexport const getKuralByIds = async (\n  firestore: ExtendedFirestoreInstance,\n  ids: number[],\n  lang: string\n): Promise<BaseType[]> => {\n  const kuralsRef = firestore.collection(COLLECTION_NAME_MAP.KURAL);\n  const snapshot = await firestoreGetCacheFirst(\n    kuralsRef.where(\n      firebase.firestore.FieldPath.documentId(),\n      'in',\n      ids.map((id) => id.toString())\n    )\n  );\n  const result = snapshot.docs.map((doc) => ({\n    id: Number(doc.id),\n    value: doc.data()[lang],\n  }));\n  return result.sort((a, b) => a.id - b.id);\n};\n\nexport const getKuralsOfChapter = async (\n  firestore: ExtendedFirestoreInstance,\n  chapter: number,\n  lang: string\n): Promise<Kural[]> => {\n  isCategoryValidErr('chapter', chapter);\n  const startKuralNo = (chapter - 1) * 10 + 1;\n  const kuralRangeIds = Array.from(Array(10).keys()).map(\n    (i) => startKuralNo + i\n  );\n  return getKuralByIds(firestore, kuralRangeIds, lang);\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport { COLLECTION_NAME_MAP, Transliterator } from './';\nimport { firestoreGetCacheFirst } from './firestore';\n\ntype TransliteratorDocumentData = Omit<Transliterator, 'id'>;\nexport const getAllTransliterators = async (\n  firestore: ExtendedFirestoreInstance\n): Promise<Transliterator[]> => {\n  // TODO: get only transliterators of user prefered language\n  const transliteratorSnapRef = await firestoreGetCacheFirst(\n    firestore.collection(COLLECTION_NAME_MAP.TRANSLITERATOR)\n  );\n  return transliteratorSnapRef.docs.map((doc) => ({\n    id: Number(doc.id),\n    ...(doc.data() as TransliteratorDocumentData),\n  }));\n};\n","import firebase from 'firebase/app';\nimport { ExtendedFirestoreInstance } from 'react-redux-firebase';\n\nimport { COLLECTION_NAME_MAP } from '.';\nimport { firestoreGetCacheFirst } from './firestore';\nimport { User } from './types';\n\ntype UserPreferenceDocument = Omit<User, 'id'>;\nexport const getUserPreferences = async (\n  firestore: ExtendedFirestoreInstance,\n  userId: string\n): Promise<User> => {\n  const snapshot = await firestoreGetCacheFirst(\n    firestore\n      .collection(COLLECTION_NAME_MAP.USER)\n      .where(firebase.firestore.FieldPath.documentId(), '==', userId)\n      .limit(1)\n  );\n  if (snapshot.empty) {\n    throw new Error('user not found');\n  }\n  const userDocRef = snapshot.docs[0];\n  return {\n    id: userDocRef.id,\n    ...(userDocRef.data() as UserPreferenceDocument),\n  };\n};\n\nexport const updateUserPreference = async (\n  firestore: ExtendedFirestoreInstance,\n  user: User\n): Promise<void> => {\n  await firestore\n    .collection(COLLECTION_NAME_MAP.USER)\n    .doc(`${user.id}`)\n    .set(user);\n};\n","import { BaseType, Category } from 'src/lib/api';\n\ntype isItemValidType = (key: number) => boolean;\nconst isSectionNoValid: isItemValidType = (section) =>\n  section >= 1 && section <= 3;\nconst isLiteratureNoValid: isItemValidType = (literature) =>\n  literature >= 1 && literature <= 13;\nconst isChapterNoValid: isItemValidType = (chapter) =>\n  chapter >= 1 && chapter <= 133;\nconst isKuralNoValid: isItemValidType = (kuralNo) =>\n  kuralNo >= 1 && kuralNo <= 1330;\n\ntype getItemByPositionType = (key: number) => number;\nconst getSectionPrev: getItemByPositionType = (section) =>\n  section === 1 ? 3 : section - 1;\nconst getSectionNext: getItemByPositionType = (section) =>\n  section === 3 ? 1 : section + 1;\nconst getLiteraturePrev: getItemByPositionType = (literature) =>\n  literature === 1 ? 13 : literature - 1;\nconst getLiteratureNext: getItemByPositionType = (literature) =>\n  literature === 13 ? 1 : literature + 1;\nconst getChapterPrev: getItemByPositionType = (chapter) =>\n  chapter === 1 ? 133 : chapter - 1;\nconst getChapterNext: getItemByPositionType = (chapter) =>\n  chapter === 133 ? 1 : chapter + 1;\nconst getKuralPrev: getItemByPositionType = (kural) =>\n  kural === 1 ? 1330 : kural - 1;\nconst getKuralNext: getItemByPositionType = (kural) =>\n  kural === 1330 ? 1 : kural + 1;\n\nexport const isItemInRange = (item: number, range: [number, number]): boolean =>\n  item >= range[0] && item <= range[1];\n\nexport const fillRange = (range: [number, number]): number[] => {\n  const out = [];\n  for (let i = range[0]; i <= range[1]; i++) {\n    out.push(i);\n  }\n  return out;\n};\n\nexport const isCategoryValid = (type: Category, id: number): boolean => {\n  switch (type) {\n    case 'section':\n      return isSectionNoValid(id);\n    case 'literature':\n      return isLiteratureNoValid(id);\n    case 'chapter':\n      return isChapterNoValid(id);\n    case 'kural':\n      return isKuralNoValid(id);\n  }\n};\n\nexport const isCategoryValidErr = (type: Category, id: number): void => {\n  if (!isCategoryValid(type, id)) {\n    throw new Error(`${type} with ${id} not found`);\n  }\n};\n\nexport const getItemByPosition = (\n  type: Category,\n  direction: 'PREV' | 'NEXT',\n  id: number\n): number => {\n  switch (type) {\n    case 'section':\n      return direction === 'NEXT' ? getSectionNext(id) : getSectionPrev(id);\n    case 'literature':\n      return direction === 'NEXT'\n        ? getLiteratureNext(id)\n        : getLiteraturePrev(id);\n    case 'chapter':\n      return direction === 'NEXT' ? getChapterNext(id) : getChapterPrev(id);\n    case 'kural':\n      return direction === 'NEXT' ? getKuralNext(id) : getKuralPrev(id);\n  }\n};\n\ntype BaseTypeMap = Record<number, BaseType>;\nexport const toBaseTypeMap = (list: BaseType[]): BaseTypeMap => {\n  return list.reduce(\n    (oldVal, item) => ({ ...oldVal, [item.id]: item }),\n    {} as BaseTypeMap\n  );\n};\n","import { getCategoryIds } from './category';\nimport { findChapterNoFromKuralNo } from './common';\nimport { Category, IndexMapType, RootCategory } from './types';\n\ntype TopRouteMap = Partial<Record<RootCategory, number>>;\nexport type CategoryIdMapPartial = Partial<Record<Category, number>>;\n\nconst rootCategoryFinder = (\n  INDEX_MAP: IndexMapType,\n  options: TopRouteMap\n): TopRouteMap => {\n  const category = Object.keys(options).find(\n    (k: string) => options[k as RootCategory]\n  ) as RootCategory;\n  return INDEX_MAP && category\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      getCategoryIds(INDEX_MAP, category, options[category]!!)\n    : {};\n};\n\nexport const findCategoryRouteMap = (\n  INDEX_MAP: IndexMapType,\n  filter: CategoryIdMapPartial\n): CategoryIdMapPartial => {\n  const { kural, chapter, literature, section } = filter;\n  const KURALS_CHAPTER = kural ? findChapterNoFromKuralNo(kural) : chapter;\n  return {\n    ...rootCategoryFinder(INDEX_MAP, {\n      chapter: KURALS_CHAPTER,\n      literature,\n      section,\n    }),\n    ...(kural ? { kural } : {}),\n  };\n};\n\nexport const convertCategoryRouteMapToString = (\n  filter: CategoryIdMapPartial\n): string => {\n  return (['section', 'literature', 'chapter', 'kural'] as Category[])\n    .filter((k) => filter[k as Category] !== undefined)\n    .map((k) => filter[k as Category])\n    .join('/');\n};\n\nexport const findCategoryRouteMapString = (\n  INDEX_MAP: IndexMapType,\n  filter: CategoryIdMapPartial\n): string => {\n  return convertCategoryRouteMapToString(\n    findCategoryRouteMap(INDEX_MAP, filter)\n  );\n};\n","import { InitIndexMapAction, KuralIndexMap } from './types';\n\nconst defaultState: KuralIndexMap = {\n  chapter: {},\n  section: {},\n  literature: {},\n  transliterator: {},\n  index: null,\n};\n\nexport const KuralIndexReducer = (\n  state: KuralIndexMap = defaultState,\n  action: InitIndexMapAction\n): KuralIndexMap => {\n  if (action.type === 'init') {\n    return action.payload;\n  }\n  return state;\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\nimport { ThunkAction } from 'redux-thunk';\nimport {\n  getAllChapter,\n  getAllLiterature,\n  getAllSections,\n  getAllTransliterators,\n  getKuralIndex,\n  getUserPreferences,\n  toBaseTypeMap,\n  Transliterator,\n} from 'src/lib/api';\n\nimport { AppState } from '../reducers';\nimport { setUser, SetUserAction } from './../settings';\nimport { InitIndexMapAction } from './types';\n\nexport const thunkInitKuralIndexMapAndUserPref = (\n  firestore: ExtendedFirestoreInstance\n): ThunkAction<void, AppState, unknown, InitIndexMapAction | SetUserAction> => {\n  return async (dispatch): Promise<void> => {\n    // TODO: fetch data only in userPrimary Language\n    // TODO: add userPreferences separate snapshot listener\n    const user = await getUserPreferences(firestore, 'rajeshsundaram');\n    const { primary } = user.preference.language;\n    const kuralIndex = await getKuralIndex(firestore);\n\n    const sectionMap = toBaseTypeMap(await getAllSections(firestore, primary));\n    const literatureMap = toBaseTypeMap(\n      await getAllLiterature(firestore, primary)\n    );\n    const chapterMap = toBaseTypeMap(await getAllChapter(firestore, primary));\n    const transliteratorMap = (await getAllTransliterators(firestore)).reduce(\n      (oldVal, t1) => ({ ...oldVal, [t1.id]: t1 }),\n      {}\n    ) as Record<number, Transliterator>;\n    dispatch(setUser(user));\n    dispatch({\n      type: 'init',\n      payload: {\n        section: sectionMap,\n        chapter: chapterMap,\n        literature: literatureMap,\n        index: kuralIndex,\n        transliterator: transliteratorMap,\n      },\n    });\n  };\n};\n","import { useHistory } from 'react-router-dom';\n\ntype useNavigationType = () => [(route: string) => () => void];\n\nexport const useNavigation: useNavigationType = () => {\n  const history = useHistory();\n  const navigateTo = (route: string) => {\n    return (): void => {\n      history.push(route);\n    };\n  };\n  return [navigateTo];\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport React from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\n\nimport { AppState } from '../../state';\nimport {\n  BaseType,\n  Category,\n  fillRange,\n  getKuralsOfChapter,\n  isCategoryValidErr,\n  RootCategory,\n} from '../api';\n\ntype useSubCategoryType = (\n  category?: RootCategory,\n  id?: number,\n  resultCategory?: Category\n) => [BaseType[], (id: number) => BaseType[], (id: number) => BaseType[]];\nexport const useSubCategory: useSubCategoryType = (\n  category,\n  id,\n  resultCategory\n) => {\n  if (id && category && resultCategory) {\n    if (category === resultCategory) {\n      throw new Error('Bad input');\n    }\n    isCategoryValidErr(category, id);\n  }\n\n  const firestore = useFirestore();\n  const [result, setResult] = React.useState<BaseType[]>([]);\n  const { primary: PRIMARY_LANG } = useSelector(\n    (st: AppState) => st.preferences.preference.language\n  );\n  const KURAL_INDEX = useSelector((st: AppState) => st.kuralIndexMap);\n\n  const getLiteraturesBySection = React.useCallback(\n    (sectionId: number): BaseType[] => {\n      isCategoryValidErr('section', sectionId);\n      return fillRange(KURAL_INDEX.index!!.section[sectionId].litIndex).map(\n        (k) => KURAL_INDEX.literature[k]\n      );\n    },\n    [KURAL_INDEX.index, KURAL_INDEX.literature]\n  );\n\n  const getChaptersFromLiterature = React.useCallback(\n    (litId: number): BaseType[] => {\n      isCategoryValidErr('literature', litId);\n      return fillRange(KURAL_INDEX.index!!.litChapMap[litId]).map(\n        (c) => KURAL_INDEX.chapter[c]\n      );\n    },\n    [KURAL_INDEX.chapter, KURAL_INDEX.index]\n  );\n  React.useEffect(() => {\n    if (!result.length && id) {\n      if (category === 'chapter' && resultCategory === 'kural') {\n        (async (): Promise<void> => {\n          setResult(await getKuralsOfChapter(firestore, id, PRIMARY_LANG));\n        })();\n      } else {\n        const { index: INDEX_MAP } = KURAL_INDEX;\n        if (INDEX_MAP) {\n          if (category === 'literature' && resultCategory === 'chapter') {\n            setResult(getChaptersFromLiterature(id));\n          } else if (\n            category === 'section' &&\n            resultCategory === 'literature'\n          ) {\n            setResult(getLiteraturesBySection(id));\n          } else {\n            throw new Error('category not supported');\n          }\n        }\n      }\n    }\n  }, [\n    result.length,\n    category,\n    resultCategory,\n    firestore,\n    id,\n    PRIMARY_LANG,\n    KURAL_INDEX,\n    getLiteraturesBySection,\n    getChaptersFromLiterature,\n  ]);\n\n  return [result, getLiteraturesBySection, getChaptersFromLiterature];\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport React from 'react';\n\nimport log from 'loglevel';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { matchPath, useHistory } from 'react-router-dom';\nimport {\n  CategoryBaseTypeMap,\n  Category,\n  getCategoryIds,\n  RootCategory,\n  findChapterNoFromKuralNo,\n  IndexMapType,\n  User,\n  CATEGORY_COLORS,\n} from 'src/lib/api';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\nimport { updateUserFSAsync } from 'src/state/settings';\n\nexport type RouteProp = {\n  id: number;\n  value: string;\n  type: Category | 'top';\n  isFavourite?: boolean;\n  route?: string;\n  color?: string;\n};\ntype TopRouteMap = Partial<Record<RootCategory, number>>;\ntype RouteMap = Partial<Record<Category, number>>;\n\nconst getRoutes: (\n  categories: Partial<CategoryBaseTypeMap>,\n  favourites: Record<'kural' | 'chapter', number[]>\n) => RouteProp[] = (categories, favourites) => {\n  // TODO: move static content to firestore\n  const routes: RouteProp[] = [\n    {\n      id: 0,\n      value: 'பால்',\n      type: 'top',\n      route: ROUTE_CONSTANTS.LIST_CATEGORY,\n      color: CATEGORY_COLORS.default,\n    },\n  ];\n  if (categories.section) {\n    routes.push({\n      ...categories.section,\n      type: 'section',\n      route: `${ROUTE_CONSTANTS.LIST_CATEGORY}/${categories.section.id}`,\n      color: CATEGORY_COLORS.section,\n    });\n  }\n  if (categories.literature) {\n    routes.push({\n      ...categories.literature,\n      type: 'literature',\n      route: `${ROUTE_CONSTANTS.LIST_CATEGORY}/${categories.section!!.id}/${\n        categories.literature.id\n      }`,\n      color: CATEGORY_COLORS.literature,\n    });\n  }\n  if (categories.chapter) {\n    routes.push({\n      ...categories.chapter,\n      isFavourite: favourites.chapter.some(\n        (ch) => ch === categories.chapter?.id\n      ),\n      type: 'chapter',\n      route: `${ROUTE_CONSTANTS.LIST}/${categories.section!!.id}/${\n        categories.literature!!.id\n      }/${categories.chapter.id}`,\n      color: CATEGORY_COLORS.chapter,\n    });\n  }\n  if (categories.kural) {\n    routes.push({\n      ...categories.kural,\n      isFavourite: favourites.kural.some((k) => k === categories.kural?.id),\n      id: categories.kural.id,\n      value: `குறள்: ${categories.kural.id}`,\n      type: 'kural',\n      route: `${ROUTE_CONSTANTS.LIST}/${categories.section!!.id}/${\n        categories.literature!!.id\n      }/${categories.chapter!!.id}/${categories.kural.id}`,\n      color: CATEGORY_COLORS.kural,\n    });\n  }\n  return routes;\n};\n\nconst rootCategoryFinder = (\n  INDEX_MAP: IndexMapType,\n  options: TopRouteMap\n): TopRouteMap => {\n  const category = Object.keys(options).find(\n    (k: string) => options[k as RootCategory]\n  ) as RootCategory;\n  return INDEX_MAP && category\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      getCategoryIds(INDEX_MAP, category, options[category]!!)\n    : {};\n};\n\ntype GetRouteValueType = () => Partial<CategoryBaseTypeMap>;\ntype useRouteType = (\n  filter: RouteMap\n) => [RouteMap, RouteProp[], (route: RouteProp) => void];\nexport const useRoute: useRouteType = (filter) => {\n  const { section, literature, chapter, index: INDEX_MAP } = useSelector(\n    (st: AppState) => st.kuralIndexMap\n  );\n  const user = useSelector((st: AppState) => st.preferences);\n  const [inputFilter, setInputFilter] = React.useState(filter);\n  const history = useHistory();\n  const firestore = useFirestore();\n  const dispatch = useDispatch();\n  const [routeMap, setRouteMap] = React.useState<RouteMap>({});\n\n  React.useEffect(() => {\n    findFilters(history.location.pathname);\n  }, [history.location.pathname]);\n\n  React.useEffect(() => {\n    if (INDEX_MAP) {\n      const {\n        kural: KURAL_NO,\n        chapter: CHAPTER_NO,\n        literature: LITERATURE_NO,\n        section: SECTION_NO,\n      } = inputFilter;\n      const KURALS_CHAPTER = KURAL_NO\n        ? findChapterNoFromKuralNo(KURAL_NO)\n        : CHAPTER_NO;\n      const routes = {\n        ...rootCategoryFinder(INDEX_MAP, {\n          chapter: KURALS_CHAPTER,\n          literature: LITERATURE_NO,\n          section: SECTION_NO,\n        }),\n        ...(KURAL_NO ? { kural: KURAL_NO } : {}),\n      };\n      log.debug('found routes:', routes);\n      setRouteMap(routes);\n    }\n  }, [INDEX_MAP, inputFilter]);\n\n  const findFilters = (pathname: string): void => {\n    const sectionRoute = matchPath<{ section: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST_CATEGORY}/:section`,\n      exact: true,\n    });\n    const literatureRoute = matchPath<{ literature: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST_CATEGORY}/:section/:literature`,\n      exact: true,\n    });\n    // TODO: category & list route for chapter\n    const chapterRoute = matchPath<{ chapter: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter`,\n      exact: true,\n    });\n    const kuralRoute = matchPath<{ kural: string }>(pathname, {\n      path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter/:kural`,\n      exact: true,\n    });\n    const section = sectionRoute\n      ? Number(sectionRoute?.params.section)\n      : undefined;\n    const literature = literatureRoute\n      ? Number(literatureRoute?.params.literature)\n      : undefined;\n    const chapter = chapterRoute\n      ? Number(chapterRoute?.params.chapter)\n      : undefined;\n    const kural = kuralRoute ? Number(kuralRoute?.params.kural) : undefined;\n    const newFilter = {\n      section,\n      literature,\n      chapter,\n      kural,\n    };\n    // log.debug('route path values => ', JSON.stringify(newFilter));\n    setInputFilter(newFilter);\n  };\n\n  history.listen(({ pathname }) => {\n    // TODO: enable logs after debounceing\n    // log.debug('detect route => ', pathname);\n    findFilters(pathname);\n  });\n\n  const getRouteValue: GetRouteValueType = React.useCallback(() => {\n    return Object.keys(routeMap).reduce((oldVal, k) => {\n      const input = k as Category;\n      let output;\n      switch (input) {\n        case 'section':\n          output = section[routeMap[input]!!];\n          break;\n        case 'literature':\n          output = literature[routeMap[input]!!];\n          break;\n        case 'chapter':\n          output = chapter[routeMap[input]!!];\n          break;\n        case 'kural':\n          // NOTE: setting kural value to empty string as this value not needed\n          output = { id: routeMap[input]!!, value: '' };\n          break;\n      }\n      return { ...oldVal, [input]: output };\n    }, {});\n  }, [chapter, literature, routeMap, section]);\n\n  const toggleRouteFavourite = (route: RouteProp) => {\n    if (route.type === 'kural' || route.type === 'chapter') {\n      const shouldAddToList = !route.isFavourite;\n      let favorites: number[];\n      if (shouldAddToList) {\n        favorites = [...user.favorites[route.type], route.id];\n      } else {\n        const itemIndex = user.favorites[route.type].indexOf(route.id);\n        favorites = user.favorites[route.type];\n        favorites.splice(itemIndex, 1);\n      }\n      const updatedUserPref: User = {\n        ...user,\n        favorites: {\n          ...user.favorites,\n          [route.type]: favorites,\n        },\n      };\n      dispatch(updateUserFSAsync(firestore, updatedUserPref));\n    }\n  };\n  // TODO: direct access of http://localhost:3000/#/list/kural/631 doesn't show routes\n  return [\n    routeMap,\n    getRoutes(getRouteValue(), user.favorites),\n    toggleRouteFavourite,\n  ];\n};\n","import {\n  SearchResult,\n  SearchTypes,\n  Category,\n  SearchCategoryTypes,\n} from 'src/lib/api';\n\n// ACTION TYPES\ntype SetSearchResults = 'SetSearchResults';\ntype AddSearchResults = 'AddSearchResults';\ntype SetSearchFilters = 'SetSearchFilters';\ntype SetUserSelection = 'SetUserSelection';\ntype SetAllUserSelection = 'SetAllUserSelection';\ntype SetSearchKeyword = 'SetSearchKeyword';\ntype SetSearchStatus = 'SetSearchStatus';\n\ntype SetSearchResultAction = {\n  type: SetSearchResults;\n  payload: SearchResult[];\n};\ntype AddSearchResultsAction = {\n  type: AddSearchResults;\n  payload: SearchResult[];\n};\ntype SetSearchFilterAction = {\n  type: SetSearchFilters;\n  payload: SearchTypes[];\n};\ntype SetUserSelectionAction = {\n  type: SetUserSelection;\n  payload: [UserSelectionTypes, boolean];\n};\ntype SetAllUserSelectionAction = {\n  type: SetAllUserSelection;\n  payload: boolean;\n};\ntype SetSearchStatusAction = {\n  type: SetSearchStatus;\n  payload: boolean;\n};\n\ntype SetSearchKeywordAction = {\n  type: SetSearchKeyword;\n  payload: string;\n};\n\ntype SearchStateAction =\n  | SetSearchKeywordAction\n  | SetSearchStatusAction\n  | SetSearchResultAction\n  | SetSearchFilterAction\n  | AddSearchResultsAction\n  | SetAllUserSelectionAction\n  | SetUserSelectionAction;\n\ntype UserSelectionTypes = Exclude<SearchCategoryTypes, 'all'>;\n\n// Actions\n\nexport const setSearchStatus = (status: boolean): SetSearchStatusAction => ({\n  type: 'SetSearchStatus',\n  payload: status,\n});\nexport const clearSearchResults = (): SetSearchResultAction => {\n  return { type: 'SetSearchResults', payload: [] };\n};\nexport const appendSearchResults = (\n  results: SearchResult[]\n): AddSearchResultsAction => {\n  return { type: 'AddSearchResults', payload: results };\n};\n\nexport const setUserSelection = (\n  category: UserSelectionTypes,\n  selection: boolean\n): SetUserSelectionAction => {\n  return { type: 'SetUserSelection', payload: [category, selection] };\n};\n\nexport const setAllUserSelections = (\n  state: boolean\n): SetAllUserSelectionAction => {\n  return { type: 'SetAllUserSelection', payload: state };\n};\n\nexport const setSearchFilters = (\n  results: SearchTypes[]\n): SetSearchFilterAction => {\n  return { type: 'SetSearchFilters', payload: results };\n};\n\nexport const setSearchKeyword = (keyword: string): SetSearchKeywordAction => {\n  return { type: 'SetSearchKeyword', payload: keyword };\n};\n\nconst sortSearchResults = (items: SearchResult[]) => {\n  const SortValueMap: Record<Category, number> = {\n    kural: 1,\n    chapter: 2,\n    literature: 3,\n    section: 4,\n  };\n  return items.sort(\n    (a, b) => SortValueMap[a.category] - SortValueMap[b.category]\n  );\n};\n\n// reducer\ntype SearchState = {\n  /** show search bar */\n  status: boolean;\n  keyword: string;\n  results: SearchResult[];\n  filters: SearchTypes[];\n  userSelections: Record<UserSelectionTypes, boolean>;\n};\nconst defaultState: SearchState = {\n  status: false,\n  keyword: '',\n  results: [],\n  filters: [],\n  userSelections: {\n    chapter: true,\n    kural: true,\n    section: true,\n    literature: true,\n    detail: true,\n  },\n};\nexport const SearchStateReducer = (\n  state = defaultState,\n  action: SearchStateAction\n): SearchState => {\n  if (action.type === 'SetSearchKeyword' && action.payload !== state.keyword) {\n    return { ...state, keyword: action.payload, results: [] };\n  } else if (action.type === 'AddSearchResults') {\n    return {\n      ...state,\n      results: sortSearchResults([...state.results, ...action.payload]),\n    };\n  } else if (action.type === 'SetSearchResults') {\n    return {\n      ...state,\n      results: sortSearchResults(action.payload as SearchResult[]),\n    };\n  } else if (action.type === 'SetSearchFilters') {\n    return { ...state, filters: action.payload as SearchTypes[] };\n  } else if (action.type === 'SetUserSelection') {\n    const [category, status] = action.payload as [Category, boolean];\n    return {\n      ...state,\n      userSelections: {\n        ...state.userSelections,\n        [category]: status,\n      },\n    };\n  } else if (action.type === 'SetAllUserSelection') {\n    const status = action.payload as boolean;\n    return {\n      ...state,\n      userSelections: {\n        chapter: status,\n        kural: status,\n        section: status,\n        literature: status,\n        detail: status,\n      },\n    };\n  } else if (action.type === 'SetSearchStatus') {\n    return { ...state, status: action.payload };\n  }\n  return state;\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { getKural, SearchResult, SearchTypes } from 'src/lib/api';\nimport { AppState } from 'src/state';\nimport {\n  appendSearchResults,\n  clearSearchResults,\n  setSearchFilters,\n  setSearchKeyword,\n  setSearchStatus,\n} from 'src/state/search';\n\nimport { isCategoryValid } from '../api';\n\ntype UseKuralSearchType = () => [\n  (keyword: string) => void,\n  (status: boolean) => void\n];\n\nconst findSuitableSearchTypes = (keyword: string): SearchTypes[] => {\n  const types: SearchTypes[] = [];\n  try {\n    if (Number.isInteger(parseInt(keyword))) {\n      const searchNumber = parseInt(keyword);\n      isCategoryValid('kural', searchNumber) && types.push('ByKuralNo');\n      isCategoryValid('chapter', searchNumber) && types.push('ByChapterNo');\n      isCategoryValid('literature', searchNumber) &&\n        types.push('ByLiteratureNo');\n      isCategoryValid('section', searchNumber) && types.push('BySectionNo');\n    }\n  } catch (e) {}\n  return types;\n};\n\nexport const useKuralSearch: UseKuralSearchType = () => {\n  const dispatch = useDispatch();\n  const firestore = useFirestore();\n  const USER_LANG = useSelector(\n    (st: AppState) => st.preferences.preference.language\n  );\n  const { literature, section, chapter } = useSelector(\n    (st: AppState) => st.kuralIndexMap\n  );\n  const setSearchKey = (keyword: string): void => {\n    dispatch(setSearchKeyword(keyword));\n    const searchTypes = findSuitableSearchTypes(keyword);\n    dispatch(setSearchFilters(searchTypes));\n    dispatch(clearSearchResults());\n    addResults(searchTypes, keyword);\n  };\n\n  const addResults = (searchTypes: SearchTypes[], keyword: string): void => {\n    searchTypes.forEach(async (type) => {\n      const items: SearchResult[] = [];\n      switch (type) {\n        case 'ByKuralNo':\n          const kuralNo = parseInt(keyword);\n          if (isCategoryValid('kural', kuralNo)) {\n            const item = await getKural(\n              firestore,\n              parseInt(keyword),\n              USER_LANG.primary\n            );\n            items.push({\n              type,\n              keyword,\n              category: 'kural',\n              item,\n            });\n          }\n          break;\n        case 'ByChapterNo':\n          const chapterNo = parseInt(keyword);\n          if (isCategoryValid('chapter', chapterNo)) {\n            items.push({\n              type,\n              keyword,\n              item: chapter[parseInt(keyword)],\n              category: 'chapter',\n            });\n          }\n          break;\n        case 'ByLiteratureNo':\n          const literatureNo = parseInt(keyword);\n          if (isCategoryValid('literature', literatureNo)) {\n            items.push({\n              type,\n              keyword,\n              item: literature[parseInt(keyword)],\n              category: 'literature',\n            });\n          }\n          break;\n        case 'BySectionNo':\n          const sectionNo = parseInt(keyword);\n          if (isCategoryValid('section', sectionNo)) {\n            items.push({\n              type,\n              keyword,\n              item: section[parseInt(keyword)],\n              category: 'section',\n            });\n          }\n          break;\n      }\n      if (items.length) {\n        dispatch(appendSearchResults(items));\n      }\n    });\n  };\n\n  const toggleSearch = (status: boolean): void => {\n    dispatch(setSearchStatus(status));\n  };\n  return [setSearchKey, toggleSearch];\n};\n","/* eslint-disable react/prop-types */\nimport React from 'react';\n\nimport { List, ListItem, ListItemText, makeStyles } from '@material-ui/core';\nimport { ChevronRight, ExpandMore } from '@material-ui/icons';\nimport { debug } from 'loglevel';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport TreeMenu, {\n  TreeNodeInArray,\n  TreeMenuItem,\n  Item,\n} from 'react-simple-tree-menu';\nimport { useSubCategory } from 'src/lib/hooks';\nimport { ROUTE_CONSTANTS } from 'src/routes';\n\nimport { AppState } from './../../../state';\n\nconst useStyles = makeStyles((theme) => ({\n  treeMenuContainer: {\n    '&>div': {\n      outlineStyle: 'none',\n    },\n  },\n  list: {},\n  listItem: {\n    cursor: 'pointer',\n    position: 'relative',\n    WebkitTapHighlightColor: 'transparent',\n    '&.level-0': {\n      paddingLeft: theme.spacing(2),\n    },\n    '&.level-1': {\n      paddingLeft: theme.spacing(3),\n    },\n    '&.level-2': {\n      paddingLeft: theme.spacing(7),\n    },\n  },\n  listIcon: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n}));\n\ntype CategoryViewerProps = {\n  className?: string;\n};\n\n// type TreeListItemProps = TreeMenuItem & { onClickItem: (item: Item) => void };\nconst TreeListItem: React.FC<TreeMenuItem> = ({\n  level = 0,\n  hasNodes,\n  isOpen,\n  label,\n  toggleNode,\n  focused,\n  onClick,\n}: TreeMenuItem) => {\n  const classes = useStyles();\n  const toggleCategory = (e: React.MouseEvent) => {\n    hasNodes && toggleNode && toggleNode();\n    e.stopPropagation();\n  };\n  return (\n    <ListItem\n      onClick={onClick}\n      className={`${classes.listItem} level-${level}`}>\n      {hasNodes && (\n        <div className={classes.listIcon} onClick={toggleCategory}>\n          {isOpen ? <ExpandMore /> : <ChevronRight />}\n        </div>\n      )}\n      <ListItemText primary={label}></ListItemText>\n    </ListItem>\n  );\n};\n\nexport const CategoryViewer: React.FC<CategoryViewerProps> = (\n  props: CategoryViewerProps\n) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const sections = useSelector((st: AppState) => st.kuralIndexMap.section);\n  const [, getLiteraturesBySection, getChaptersByLiterature] = useSubCategory();\n  const TREE_DATA: TreeNodeInArray[] = Object.values(sections).map(\n    (s, sIndex) => ({\n      key: s.id.toString(),\n      label: s.value,\n      index: sIndex,\n      nodes: getLiteraturesBySection(s.id).map((lit, litIndex) => ({\n        key: lit.id.toString(),\n        label: lit.value,\n        index: litIndex,\n        nodes: getChaptersByLiterature(lit.id).map((ch, chIndex) => ({\n          key: ch.id.toString(),\n          label: ch.value,\n          index: chIndex,\n        })),\n      })),\n    })\n  );\n  const onItemClick = (item: Item) => {\n    history.replace(`${ROUTE_CONSTANTS.LIST_CATEGORY}/${item.key}`);\n  };\n  debug('CategoryViewer renders');\n  return (\n    <div className={classes.treeMenuContainer}>\n      <TreeMenu onClickItem={onItemClick} data={TREE_DATA} hasSearch={false}>\n        {({ items }) => (\n          <List className={classes.list}>\n            {items.map(({ key, ...itemProps }) => (\n              <TreeListItem key={key} {...itemProps} />\n            ))}\n          </List>\n        )}\n      </TreeMenu>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport { matchPath, useLocation } from 'react-router-dom';\nimport { Category } from 'src/lib/api';\n\nimport { AppState } from '../../state/reducers';\nimport FavouriteToggle from '../../views/components/common/FavouriteToggle';\n\nconst useStyles = makeStyles((theme) => ({\n  favStyle: {\n    color: 'rgba(215, 22, 64, 0.8)',\n  },\n}));\n\nconst isFavourite = (\n  type: 'kural' | 'chapter',\n  itemNo: number,\n  items: number[]\n): boolean => {\n  // TODO:\n  return true;\n};\ntype ToggleFavourite = (favourite: boolean) => void;\ntype useKuralHeaderType = (\n  type: Exclude<Category, 'section' | 'literature'>,\n  path: string\n) => React.ReactNode;\nexport const useFavouriteDetector: useKuralHeaderType = (type, path) => {\n  const classes = useStyles();\n  const { [type]: FAVOURITE_ITEMS } = useSelector(\n    (st: AppState) => st.preferences.favorites\n  );\n  const { pathname } = useLocation();\n  const isRoute = matchPath<Record<string, string>>(pathname, path);\n  let element: React.ReactNode = null;\n  const setFavourite: ToggleFavourite = (flag: boolean) => {\n    // TODO:\n  };\n  if (isRoute?.isExact) {\n    element = (\n      <FavouriteToggle\n        className={classes.favStyle}\n        active={isFavourite(\n          type,\n          parseInt(isRoute.params[type]),\n          FAVOURITE_ITEMS\n        )}\n        handler={(isActive: boolean): Promise<boolean> => {\n          setFavourite(isActive);\n          return Promise.resolve(true);\n        }}\n      />\n    );\n  }\n  return element;\n};\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport ListItem from '@material-ui/core/ListItem';\nimport clsx from 'clsx';\nimport { Kural } from 'src/lib/api';\n\nconst useStyles = makeStyles((theme) => ({\n  listItem: {\n    display: 'flex',\n    flexDirection: 'column',\n    userSelect: 'none',\n    alignItems: 'start',\n    [theme.breakpoints.up('sm')]: {\n      cursor: 'pointer',\n    },\n  },\n  badgeContainer: {\n    background: theme.palette.primary.main,\n    color: 'white',\n    height: '1em',\n    fontSize: '0.6em',\n    lineHeight: '0.8em',\n    borderRadius: '1em',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: '2px 6px',\n    minWidth: '1em',\n  },\n  kuralWrapper: {\n    width: '100%',\n  },\n}));\n\ntype KuralCardProps = {\n  kural: Kural;\n  onClick?: (kural: Kural) => void;\n  className?: string;\n  showBadge?: boolean;\n  /**\n   * The component used for the root node.\n   * e.g) a, li\n   */\n  componentType?: 'div' | 'span';\n};\nconst KuralCard: React.FC<KuralCardProps> = (props: KuralCardProps) => {\n  const classes = useStyles();\n  return (\n    <ListItem\n      className={props.className}\n      classes={{ root: clsx(classes.listItem) }}\n      component={props.componentType || 'li'}>\n      {props.showBadge && (\n        <div className={classes.badgeContainer}>{props.kural.id}</div>\n      )}\n      <div\n        onClick={(): void => props.onClick && props.onClick(props.kural)}\n        className={classes.kuralWrapper}\n        dangerouslySetInnerHTML={{\n          __html: props.kural.value.replace('\\n', '<br>'),\n        }}></div>\n    </ListItem>\n  );\n};\n\nexport default KuralCard;\n","import React from 'react';\n\nimport { makeStyles, ListItem, Chip, List } from '@material-ui/core';\nimport { Kural } from 'src/lib/api';\nimport { useKuralDetail } from 'src/lib/hooks';\n\nimport KuralCard from './KuralCard';\n\nconst useStyles = makeStyles((theme) => ({\n  transliteratorList: {\n    cursor: 'grab',\n    userSelect: 'none',\n    padding: theme.spacing(1),\n    '& li:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  kural: {\n    padding: theme.spacing(1),\n    borderBottom: 'unset',\n    color: 'brown',\n    fontWeight: 600,\n    '& .kural-badge': {\n      display: 'none',\n    },\n  },\n  transliteration: {\n    padding: 0,\n    flexDirection: 'column',\n    alignItems: 'self-end',\n\n    '& .transliterator-name': {\n      fontSize: '0.7em',\n      height: '1.5em',\n    },\n    '& .content': {\n      fontSize: '0.9em',\n      paddingTop: theme.spacing(0.5),\n      paddingBottom: theme.spacing(0.5),\n      textAlign: 'justify',\n      WebkitTextStrokeWidth: '0.2px',\n      WebkitTextStroke: 'thin',\n      letterSpacing: 1,\n    },\n  },\n}));\n\ntype KuralDetailProps = {\n  className?: string;\n  kural: Kural | number;\n};\n\nconst KuralDetail: React.FC<KuralDetailProps> = (props: KuralDetailProps) => {\n  const classes = useStyles();\n  const [kural, kuralDetail, transliterators] = useKuralDetail(props.kural);\n  return (\n    <>\n      {kural && (\n        <KuralCard\n          kural={kural}\n          className={classes.kural}\n          componentType='div'></KuralCard>\n      )}\n      <List\n        className={props.className}\n        classes={{ root: classes.transliteratorList }}\n        {...props}>\n        {kuralDetail &&\n          transliterators.map(({ id: transliteratorId, name }) => (\n            <ListItem\n              key={transliteratorId}\n              className={classes.transliteration}>\n              <Chip\n                size='small'\n                label={name}\n                color={'primary'}\n                className={'transliterator-name'}\n              />\n              <div className={'content'}>{kuralDetail[transliteratorId]}</div>\n            </ListItem>\n          ))}\n      </List>\n    </>\n  );\n};\n\nexport default KuralDetail;\n","import * as React from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { AppState } from 'src/state';\n\nimport { Kural } from '../api';\nimport { getKural, getKuralDetail, KuralDetail, Transliterator } from '../api';\n\ntype useKuralDetailType = (\n  kural: Kural | number\n) => [Kural | null, KuralDetail | null, Transliterator[]];\n\nexport const useKuralDetail: useKuralDetailType = (kuralInput) => {\n  const firestore = useFirestore();\n  const {\n    preferences: {\n      preference: {\n        language: { primary },\n      },\n    },\n    kuralIndexMap: { transliterator: transliterators },\n  } = useSelector((st: AppState) => st);\n  const [kural, setKural] = React.useState<Kural | null>(null);\n  const [kuralDetail, setKuralDetail] = React.useState<KuralDetail | null>(\n    null\n  );\n  React.useEffect(() => {\n    (async (): Promise<void> => {\n      // TODO: get kuralDetail only of user language\n      if (typeof kuralInput === 'number') {\n        setKural(await getKural(firestore, kuralInput, primary));\n        setKuralDetail(await getKuralDetail(firestore, kuralInput));\n      } else {\n        setKural(kuralInput);\n        setKuralDetail(await getKuralDetail(firestore, kuralInput.id));\n      }\n    })();\n  }, [firestore, kuralInput, primary]);\n  const filteredTransliteratorMap = Object.values(transliterators)\n    .filter((trans) => trans.lang === primary)\n    .sort((t1, t2) => {\n      const [t1r, t2r] = [t1.rank, t2.rank];\n      return t1r && t2r ? t1r - t2r : t1r ? -1 : 1;\n    });\n  return [kural, kuralDetail, filteredTransliteratorMap];\n};\n","import React from 'react';\n\nimport { debug } from 'loglevel';\nimport { useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport {\n  findCategoryRouteMapString,\n  isCategoryValid,\n  ITEMS_COUNT_MAP,\n} from 'src/lib/api';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\nimport SwiperCore, { Virtual, Keyboard } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport 'swiper/swiper.scss';\n\nimport KuralDetail from './KuralDetail';\n\nSwiperCore.use([Virtual, Keyboard]);\n\ntype KuralDetailViewerProps = {\n  className?: string;\n};\n\nconst KuralDetailViewer: React.FC<KuralDetailViewerProps> = (\n  props: KuralDetailViewerProps\n) => {\n  const history = useHistory();\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const params = useParams<{ kural: string }>();\n  const KURAL_NO = parseInt(params.kural);\n  const [activeKuralNo, setActiveKuralNo] = React.useState(KURAL_NO);\n  const slideKuralIds = Array.from(Array(ITEMS_COUNT_MAP.kural).keys()).map(\n    (i) => i + 1\n  );\n  const renderSlide = (kId: number, index: number) => (\n    <SwiperSlide key={kId} virtualIndex={index}>\n      <KuralDetail kural={kId} />\n    </SwiperSlide>\n  );\n\n  React.useEffect(() => {\n    if (INDEX_MAP) {\n      const newRoute = `${\n        ROUTE_CONSTANTS.LIST\n      }/${findCategoryRouteMapString(INDEX_MAP, { kural: activeKuralNo })}`;\n      debug('replace route to => ', newRoute);\n      history.replace(newRoute);\n    }\n  }, [INDEX_MAP, activeKuralNo, history]);\n\n  if (!isCategoryValid('kural', KURAL_NO)) {\n    return null;\n  }\n  return (\n    <Swiper\n      keyboard={true}\n      grabCursor={true}\n      initialSlide={KURAL_NO - 1}\n      spaceBetween={10}\n      slidesPerView={1}\n      allowSlideNext={slideKuralIds[slideKuralIds.length - 1] !== activeKuralNo}\n      virtual\n      onTransitionEnd={(swiper) => {\n        setActiveKuralNo(swiper.activeIndex + 1);\n      }}>\n      {slideKuralIds.map((kId, index) => renderSlide(kId, index))}\n    </Swiper>\n  );\n};\n\nexport default KuralDetailViewer;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport List from '@material-ui/core/List';\nimport { useSelector } from 'react-redux';\nimport { findCategoryRouteMapString, Kural } from 'src/lib/api';\nimport { useNavigation } from 'src/lib/hooks';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\n\nimport KuralCard from './KuralCard';\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    padding: theme.spacing(1),\n    paddingTop: '0px',\n    '& li:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  kuralCard: {\n    padding: 0,\n  },\n}));\n\ntype ListKuralCardProps = {\n  kurals: Kural[];\n};\n\nexport const ListKuralCard: React.FC<ListKuralCardProps> = (\n  props: ListKuralCardProps\n) => {\n  const classes = useStyles();\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const [navigateTo] = useNavigation();\n  const openKuralDetail = (kural: Kural): void =>\n    navigateTo(\n      `${ROUTE_CONSTANTS.LIST}/${findCategoryRouteMapString(INDEX_MAP!!, {\n        kural: kural.id,\n      })}`\n    )();\n  return (\n    <List className={classes.list}>\n      {props.kurals.map((k, i) => (\n        <KuralCard\n          showBadge={true}\n          className={classes.kuralCard}\n          key={k.id}\n          kural={k}\n          onClick={openKuralDetail}\n        />\n      ))}\n    </List>\n  );\n};\n","import React from 'react';\n\nimport { useSubCategory } from '../../../lib/hooks';\nimport { ListKuralCard } from './ListKuralCard';\n\ntype ListKuralsOfChapterProps = {\n  className?: string;\n  chapterNo: number;\n};\n\nexport const ListKuralsOfChapter: React.FC<ListKuralsOfChapterProps> = (\n  props: ListKuralsOfChapterProps\n) => {\n  const [kurals] = useSubCategory('chapter', props.chapterNo, 'kural');\n  return <ListKuralCard kurals={kurals} />;\n};\n","import React from 'react';\n\nimport { debug } from 'loglevel';\n// import { useHistory, useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { findCategoryRouteMapString, ITEMS_COUNT_MAP } from 'src/lib/api';\nimport { ROUTE_CONSTANTS } from 'src/routes';\nimport { AppState } from 'src/state';\nimport SwiperCore, { Virtual, Keyboard } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\nimport { ListKuralsOfChapter } from './ListKuralsOfChapter';\n\nimport 'swiper/swiper.scss';\n\nSwiperCore.use([Virtual, Keyboard]);\n\ntype KuralListSwipeableProps = {\n  className?: string;\n};\n\nexport const KuralListSwipeable: React.FC<KuralListSwipeableProps> = (\n  props: KuralListSwipeableProps\n) => {\n  const INDEX_MAP = useSelector((st: AppState) => st.kuralIndexMap.index);\n  const history = useHistory();\n  const { chapter } = useParams<{ chapter: string }>();\n  const CHAPTER_NO = parseInt(chapter);\n  const [activeChapterNo, setActiveChapterNo] = React.useState(CHAPTER_NO);\n  const slideChapterIds = Array.from(Array(ITEMS_COUNT_MAP.chapter).keys()).map(\n    (i) => i + 1\n  );\n  React.useEffect(() => {\n    if (INDEX_MAP) {\n      const newRoute = `${\n        ROUTE_CONSTANTS.LIST\n      }/${findCategoryRouteMapString(INDEX_MAP, { chapter: activeChapterNo })}`;\n      debug('replace route to => ', newRoute);\n      history.replace(newRoute);\n    }\n  }, [INDEX_MAP, activeChapterNo, history]);\n  const renderSlide = (chId: number, index: number) => (\n    <SwiperSlide key={chId} virtualIndex={index}>\n      <ListKuralsOfChapter chapterNo={chId} />\n    </SwiperSlide>\n  );\n  return (\n    <div className={props.className}>\n      <Swiper\n        keyboard={true}\n        grabCursor={true}\n        initialSlide={CHAPTER_NO!! - 1}\n        spaceBetween={10}\n        slidesPerView={1}\n        allowSlideNext={\n          slideChapterIds[slideChapterIds.length - 1] !== activeChapterNo\n        }\n        virtual\n        onTransitionEnd={(swiper) => {\n          setActiveChapterNo(swiper.activeIndex + 1);\n        }}>\n        {slideChapterIds.map((chId, index) => renderSlide(chId, index))}\n      </Swiper>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { List, ListItem, makeStyles } from '@material-ui/core';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\n\nimport { BaseType } from '../../../lib/api';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  listItem: {\n    cursor: 'pointer',\n    display: 'grid',\n    gridTemplateColumns: '3em auto',\n  },\n  idWrap: {\n    display: 'flex',\n    alignItems: 'center',\n\n    color: theme.palette.primary.main,\n    '& > span': {\n      minWidth: '2em',\n      opacity: 0.5,\n      textAlign: 'center',\n    },\n    '& svg': {\n      position: 'relative',\n      left: '-4px',\n    },\n  },\n  labelWrap: {\n    fontSize: '1.2em',\n    paddingLeft: theme.spacing(1),\n    color: 'cadetblue',\n  },\n}));\n\ntype ListViewProps = {\n  className?: string;\n  items: BaseType[];\n  showDivider?: boolean;\n  onItemSelected: (item: BaseType) => void;\n};\n\nconst ListView: React.FC<ListViewProps> = (props: ListViewProps) => {\n  const classes = useStyles();\n  return (\n    <List className={props.className}>\n      {props.items.map((item) => (\n        <ListItem\n          classes={{ root: classes.listItem }}\n          divider={props.showDivider}\n          key={item.id}\n          onClick={(): void => props.onItemSelected(item)}>\n          <div className={classes.idWrap}>\n            <span>{item.id}</span>\n            <ArrowForwardIosIcon />\n          </div>\n          <div className={classes.labelWrap}>{item.value}</div>\n        </ListItem>\n      ))}\n    </List>\n  );\n};\n\nexport default ListView;\n","import React from 'react';\n\nimport {\n  makeStyles,\n  List,\n  ListItem,\n  Collapse,\n  ListItemText,\n  ListSubheader,\n  Badge,\n} from '@material-ui/core';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { findChapterNoFromKuralNo, getKuralByIds } from 'src/lib/api';\nimport { Kural, BaseType } from 'src/lib/api';\nimport { useBaseItem } from 'src/lib/hooks';\nimport { useNavigation } from 'src/lib/hooks';\nimport { AppState } from 'src/state';\n\nimport ListView from '../common/ListView';\nimport KuralCard from './KuralCard';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // marginTop: theme.spacing(2),\n    // padding: theme.spacing(1),\n  },\n  collapsableGroup: {\n    // marginBottom: theme.spacing(1),\n  },\n  list: {\n    '& .sub-header': {\n      textAlign: 'left',\n      color: 'brown',\n      lineHeight: '2rem',\n      padding: `0px 0 0 ${theme.spacing(0.5)}px`,\n    },\n  },\n  listItemTitle: {\n    '& .badge-placeholder': {\n      height: '0.5rem',\n    },\n    '& .expand-toggle': {\n      marginLeft: theme.spacing(1.5),\n    },\n  },\n  listTitleBadge: {\n    opacity: 0.6,\n    fontSize: '0.6rem',\n    height: '130%',\n    width: '120%',\n  },\n  kural: {\n    padding: `0 0 0 ${theme.spacing(1)}px`,\n    '&:not(:last-child)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  chapFavorites: {\n    padding: 0,\n    '& li': {\n      paddingLeft: theme.spacing(0.5),\n      paddingRight: theme.spacing(0.5),\n    },\n  },\n}));\n\ntype FavoritesViewerProps = {\n  className?: string;\n  expand?: boolean;\n};\n\nconst FavoritesViewer: React.FC<FavoritesViewerProps> = (\n  props: FavoritesViewerProps\n) => {\n  const [getChapter] = useBaseItem('chapter');\n  const firestore = useFirestore();\n  const {\n    favorites: { kural: KURAL_IDS, chapter: CHAPTER_IDS },\n    preference,\n  } = useSelector((st: AppState) => st.preferences);\n  const [kurals, setKurals] = React.useState<Kural[]>([]);\n  const [isKuralVisible, setKuralVisible] = React.useState<boolean>(\n    props.expand ?? true\n  );\n  const [isChapterVisible, setChapterVisible] = React.useState<boolean>(\n    props.expand ?? false\n  );\n  const [navigateTo] = useNavigation();\n  const classes = useStyles();\n  // TODO:\n  const onChapterSelected = (item: BaseType): void => {\n    navigateTo(`/list/${item.id}/kural`)();\n  };\n  const onKuralSelected = (item: BaseType): void => {\n    navigateTo(`/list/kural/${item.id}`)();\n  };\n  React.useEffect(() => {\n    if (KURAL_IDS.length > 0) {\n      getKuralByIds(firestore, KURAL_IDS, preference.language.primary).then(\n        (kurals) => {\n          setKurals(kurals);\n        }\n      );\n    }\n  }, [firestore, KURAL_IDS, preference.language.primary]);\n  const chapterKuralMap = new Map<number, BaseType[]>([]);\n  kurals.forEach((it) => {\n    const chap = findChapterNoFromKuralNo(it.id);\n    !chapterKuralMap.has(chap)\n      ? chapterKuralMap.set(chap, [it])\n      : chapterKuralMap.set(chap, [...(chapterKuralMap.get(chap) || []), it]);\n  });\n  const noRecordsFound = <h1>None Found</h1>;\n\n  const GroupTitleMaker = (\n    isVisible: boolean,\n    onClick: () => void,\n    title: React.ReactNode,\n    badgeContent: React.ReactNode\n  ) => (\n    <ListItem\n      selected={isVisible}\n      className={classes.listItemTitle}\n      button\n      onClick={onClick}>\n      <ListItemText inset={true} primary={title} />\n      <Badge\n        badgeContent={badgeContent}\n        classes={{ badge: classes.listTitleBadge }}\n        color='secondary'\n        showZero={false}\n        max={10}\n        invisible={isVisible}>\n        <div className='badge-placeholder'></div>\n      </Badge>\n      <div className='expand-toggle'>\n        {isVisible ? <ExpandLess /> : <ExpandMore />}\n      </div>\n    </ListItem>\n  );\n  return (\n    <div className={clsx(props.className, classes.root)}>\n      <List className={classes.list} disablePadding>\n        {GroupTitleMaker(\n          isKuralVisible,\n          () => {\n            setKuralVisible(!isKuralVisible);\n          },\n          'Kurals',\n          KURAL_IDS.length\n        )}\n        <Collapse\n          in={isKuralVisible}\n          style={{ paddingBottom: isKuralVisible ? 8 : 0 }}\n          className={classes.collapsableGroup}\n          timeout='auto'>\n          {chapterKuralMap.size > 0 &&\n            Array.from(chapterKuralMap.keys()).map((k) => {\n              const chapterInfo = getChapter(k);\n              return (\n                <List\n                  component='div'\n                  className='sub-list'\n                  key={k}\n                  disablePadding>\n                  {chapterInfo && (\n                    <ListSubheader\n                      className='sub-header'\n                      disableSticky\n                      onClick={(): void => onChapterSelected(chapterInfo)}>\n                      {chapterInfo.value}\n                    </ListSubheader>\n                  )}\n\n                  {chapterKuralMap.get(k)?.map((item) => (\n                    <KuralCard\n                      className={classes.kural}\n                      key={item.id}\n                      kural={item}\n                      onClick={onKuralSelected}\n                    />\n                  ))}\n                </List>\n              );\n            })}\n          {chapterKuralMap.size === 0 && noRecordsFound}\n        </Collapse>\n        {GroupTitleMaker(\n          isChapterVisible,\n          () => {\n            setChapterVisible(!isChapterVisible);\n          },\n          'Chapters',\n          CHAPTER_IDS.length\n        )}\n        <Collapse\n          in={isChapterVisible}\n          style={{ paddingBottom: isChapterVisible ? 8 : 0 }}\n          className={classes.collapsableGroup}\n          timeout='auto'>\n          {CHAPTER_IDS.length > 0 && (\n            <ListView\n              className={classes.chapFavorites}\n              items={\n                CHAPTER_IDS.sort()\n                  .map((ch) => getChapter(ch))\n                  .filter((ch) => ch !== null) as BaseType[]\n              }\n              onItemSelected={onChapterSelected}\n            />\n          )}\n          {CHAPTER_IDS.length === 0 && noRecordsFound}\n        </Collapse>\n      </List>\n    </div>\n  );\n};\n\nexport default FavoritesViewer;\n","/* eslint-disable no-fallthrough */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { useSelector } from 'react-redux';\n\nimport { AppState } from '../../state';\nimport { RootCategory, BaseType, getCategoryIds } from '../api';\n\ntype getItemType = (chapterNo: number) => BaseType | null;\ntype getCategoryIdsType = (\n  key: number\n) => Partial<Record<RootCategory, number>>;\nexport type useItemType = (\n  category: RootCategory\n) => [getItemType, getCategoryIdsType];\n\nexport const useBaseItem: useItemType = (category) => {\n  const { [category]: items, index: INDEX_MAP } = useSelector(\n    (st: AppState) => st.kuralIndexMap\n  );\n  const getItem: getItemType = (itemNo) => items[itemNo] || null;\n  const getCategoryRoute: getCategoryIdsType = (categoryId) =>\n    getCategoryIds(INDEX_MAP!!, category, categoryId);\n  return [getItem, getCategoryRoute];\n};\n","import React from 'react';\n\nimport { makeStyles, Card, CardContent, CardHeader } from '@material-ui/core';\n\nimport FavoritesViewer from '../../components/kural/FavoritesViewer';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: theme.spacing(2),\n    '& .card-header': {\n      padding: theme.spacing(1),\n    },\n    '& .card-content': {\n      padding: theme.spacing(0.5),\n    },\n  },\n  favoriteCard: {\n    margin: theme.spacing(1),\n  },\n}));\n\n/* const uiConfig = {\n  signInFlow: 'popup',\n  signInSuccessUrl: '/signedIn',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n    firebase.auth.TwitterAuthProvider.PROVIDER_ID,\n    firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n  ],\n}; */\n\nconst Home: React.FC = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Card variant='outlined' className={classes.favoriteCard}>\n        {/* <LoadingSpinnerWithBackdrop show={true} /> */}\n        <CardHeader title='Favorites' className='card-header' />\n        <CardContent className='card-content'>\n          <FavoritesViewer expand={false} />\n        </CardContent>\n      </Card>\n      {/* <FirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} /> */}\n    </div>\n  );\n};\n\nexport default Home;\n","import React from 'react';\n\nimport { makeStyles, Chip } from '@material-ui/core';\nimport { Favorite } from '@material-ui/icons';\nimport clsx from 'clsx';\nimport {\n  useRoute,\n  useNavigation,\n  useLongPress,\n  RouteProp,\n} from 'src/lib/hooks';\n\nconst useStyles = makeStyles((theme) => ({\n  routeContainer: {\n    display: 'flex',\n  },\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'start',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  chipRoot: {\n    padding: '0px 0.6em',\n    fontSize: '0.7rem',\n    height: '1.3rem',\n    margin: `0 ${theme.spacing(1 / 2)}px ${theme.spacing(1 / 2)}px 0`,\n    [theme.breakpoints.up('sm')]: {\n      maxWidth: 200,\n    },\n  },\n  favoriteIcon: {\n    width: '1rem',\n    height: '1rem',\n    margin: 0,\n  },\n}));\n\nexport type KuralChipItem = {\n  label: string;\n  navRoute: string;\n  color: 'default' | 'primary' | 'secondary';\n};\ntype RouteViewerProps = {\n  className?: string;\n  renderRight?: React.ReactNode;\n};\n\ntype RouteChipProps = {\n  route: RouteProp;\n  onLongPress?: (route: RouteProp) => void;\n};\n\nconst RouteChip: React.FC<RouteChipProps> = ({\n  route,\n  onLongPress,\n}: RouteChipProps) => {\n  const classes = useStyles();\n  const [navigateTo] = useNavigation();\n  const longPressEventHandlers = useLongPress(() => {\n    onLongPress && onLongPress(route);\n  });\n  // TODO: longpress should not trigger click event\n  return (\n    <Chip\n      {...(route.isFavourite\n        ? { icon: <Favorite className={classes.favoriteIcon} /> }\n        : {})}\n      {...longPressEventHandlers}\n      size='small'\n      label={route.value}\n      color={'primary'}\n      onClick={(): void => {\n        route.route && navigateTo(route.route)();\n      }}\n      style={{ backgroundColor: route.color }}\n      classes={{ root: classes.chipRoot }}\n    />\n  );\n};\n\nconst RouteViewer: React.FC<RouteViewerProps> = (props: RouteViewerProps) => {\n  const classes = useStyles();\n  const [, routes, toggleRouteFavourite] = useRoute({});\n  return (\n    <div className={clsx(classes.routeContainer, props.className)}>\n      <div className={classes.root}>\n        {routes.map((item, index) => (\n          <RouteChip\n            route={item}\n            key={index}\n            onLongPress={(route: RouteProp) => toggleRouteFavourite(route)}\n          />\n        ))}\n      </div>\n      {props.renderRight}\n    </div>\n  );\n};\n\nexport default RouteViewer;\n","import { useState, useEffect, useCallback } from 'react';\n\ntype useLongPressType = (\n  callback: () => void,\n  ms?: number\n) => {\n  onMouseDown: () => void;\n  onMouseUp: () => void;\n  onMouseLeave: () => void;\n  onTouchStart: () => void;\n  onTouchEnd: () => void;\n};\n\nexport const useLongPress: useLongPressType = (callback, ms = 300) => {\n  const [startLongPress, setStartLongPress] = useState(false);\n\n  useEffect(() => {\n    let timerId: number | undefined;\n    if (startLongPress) {\n      timerId = window.setTimeout(callback, ms);\n    } else {\n      clearTimeout(timerId);\n    }\n    return (): void => {\n      clearTimeout(timerId);\n    };\n  }, [callback, ms, startLongPress]);\n\n  const start = useCallback(() => {\n    setStartLongPress(true);\n  }, []);\n  const stop = useCallback(() => {\n    setStartLongPress(false);\n  }, []);\n\n  return {\n    onMouseDown: start,\n    onMouseUp: stop,\n    onMouseLeave: stop,\n    onTouchStart: start,\n    onTouchEnd: stop,\n  };\n};\n","import React from 'react';\n\nimport { Container, makeStyles } from '@material-ui/core';\nimport { renderRoutes } from 'react-router-config';\nimport RouteViewer from 'src/views/components/kural/RouteViewer';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  routes: {\n    padding: theme.spacing(1),\n  },\n}));\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const ListWithRouteViewer: React.FC<any> = (props: any) => {\n  const classes = useStyles();\n  return (\n    <>\n      <Container disableGutters className={classes.routes}>\n        <RouteViewer />\n      </Container>\n      <div className={classes.root}>{renderRoutes(props.route.routes)}</div>\n    </>\n  );\n};\n","import React from 'react';\n\nimport { Fade } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport {\n  makeStyles,\n  Theme,\n  createStyles,\n  fade,\n} from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport SearchIcon from '@material-ui/icons/Search';\nimport clsx from 'clsx';\nimport { debug } from 'loglevel';\nimport { matchPath, useHistory } from 'react-router-dom';\nimport { useDebouncedCallback } from 'use-debounce';\n\nimport { useKuralSearch } from '../../../lib/hooks';\n\nconst SEARCH_ROUTE = '/search';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      maxWidth: 400,\n      border: '1px solid',\n      borderRadius: '25px',\n      borderColor: fade(theme.palette.grey[500], 0.5),\n      padding: '0.2em 0.5em',\n      color: theme.palette.primary.main,\n      height: '1.6rem',\n      '&.focus': {\n        borderColor: theme.palette.primary.main,\n        '& .search-icon, & .searchbar': {\n          color: theme.palette.primary.main,\n        },\n      },\n    },\n    searchicon: {\n      color: fade(theme.palette.grey[500], 0.5),\n      cursor: 'pointer',\n    },\n    clearIcon: {\n      cursor: 'pointer',\n    },\n    input: {\n      flex: 1,\n      padding: '0px 6px',\n      width: '100%',\n      color: theme.palette.primary.light,\n    },\n  })\n);\n\ntype KuralSearchProps = {\n  className?: string;\n  onSearchTap?: () => void;\n};\n\nconst KuralSearch: React.FC<KuralSearchProps> = (props: KuralSearchProps) => {\n  debug('KuralSearch');\n  const classes = useStyles();\n  const history = useHistory();\n  const inputRef = React.useRef<HTMLDivElement>(null);\n  const [setSearchKey] = useKuralSearch();\n  const debounced = useDebouncedCallback((value: string) => {\n    setSearchKey(value);\n  }, 500);\n  const [keyword, setKeyword] = React.useState('');\n  const isKeywordEmpty = (): boolean => keyword.trim().length === 0;\n  const isSearchRoute = (): boolean =>\n    matchPath(history.location.pathname, { path: SEARCH_ROUTE })?.isExact ||\n    false;\n  const [focus, setFocus] = React.useState(isSearchRoute());\n\n  React.useEffect(() => {\n    debounced.callback(keyword);\n  }, [debounced, keyword]);\n\n  history.listen(({ pathname }) => {\n    if (pathname !== SEARCH_ROUTE) {\n      setKeyword('');\n      setFocus(false);\n    } else {\n      setFocus(true);\n    }\n  });\n  const onSearchBarFocus = (): void => {\n    if (history.location.pathname !== SEARCH_ROUTE) {\n      debug('route -> search');\n      history.push(SEARCH_ROUTE);\n    }\n  };\n  return (\n    <div className={clsx(classes.root, props.className, focus && 'focus')}>\n      <SearchIcon\n        onClick={() => {\n          inputRef.current?.querySelector('input')?.focus();\n        }}\n        className={clsx(classes.searchicon, 'search-icon')}\n      />\n      <InputBase\n        ref={inputRef}\n        className={`searchbar ${classes.input}`}\n        placeholder='Search 43, agara'\n        inputProps={{ 'aria-label': 'Search' }}\n        onChange={(e): void => {\n          const text = e.target.value;\n          setKeyword(text);\n        }}\n        value={keyword}\n        onFocus={(): void => {\n          onSearchBarFocus();\n          props.onSearchTap && props.onSearchTap();\n        }}\n      />\n      <Fade in={!isKeywordEmpty()}>\n        <CancelIcon\n          className={classes.clearIcon}\n          onClick={(): void => {\n            setKeyword('');\n          }}\n        />\n      </Fade>\n    </div>\n  );\n};\n\nexport default KuralSearch;\n","import React from 'react';\n\nimport { useScrollTrigger, Slide } from '@material-ui/core';\n\ntype HideOnScrollProps = {\n  direction: 'left' | 'right' | 'up' | 'down';\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  window?: any;\n  children: React.ReactElement;\n};\n\nconst HideOnScroll: React.FC<HideOnScrollProps> = ({\n  children,\n  window,\n}: HideOnScrollProps) => {\n  const trigger = useScrollTrigger({ target: window ? window() : undefined });\n  return (\n    <Slide appear={false} direction='down' in={!trigger}>\n      {children}\n    </Slide>\n  );\n};\n\nexport default HideOnScroll;\n","import * as React from 'react';\n\nimport { Avatar, IconButton, makeStyles } from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { KeyboardBackspace, Person, Settings } from '@material-ui/icons';\nimport { debug } from 'loglevel';\nimport { matchPath, useHistory } from 'react-router-dom';\n\nimport KuralSearch from '../kural/KuralSearch';\nimport HideOnScroll from './HideOnScroll';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbar: {\n    padding: 0,\n    justifyContent: 'space-around',\n  },\n  avatar: {\n    color: 'white',\n    marginLeft: theme.spacing(1),\n    backgroundColor: theme.palette.primary.main,\n  },\n  actionsGroup: {},\n  searchbar: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    flexGrow: 1,\n  },\n  iconButton: {\n    padding: '6px',\n    '& svg': {\n      fontSize: '2rem',\n    },\n  },\n}));\n\ntype MyAppBarProps = {\n  actions?: React.ReactNode;\n};\n\nconst MyAppBar: React.FC<MyAppBarProps> = (props: MyAppBarProps) => {\n  debug('MyAppBar');\n  const classes = useStyles();\n  const history = useHistory();\n  const isHomeRoute = (): boolean =>\n    matchPath(history.location.pathname, { path: '/' })?.isExact || false;\n  const renderLeftIcon = (): React.ReactElement => {\n    return !isHomeRoute() ? (\n      <IconButton className={classes.iconButton} onClick={history.goBack}>\n        <KeyboardBackspace color='primary' />\n      </IconButton>\n    ) : (\n      <Avatar className={classes.avatar}>\n        <Person />\n      </Avatar>\n    );\n  };\n\n  return (\n    <>\n      <HideOnScroll direction='down' {...props}>\n        <AppBar color='transparent' elevation={0}>\n          <Toolbar className={classes.toolbar}>\n            {renderLeftIcon()}\n            <KuralSearch className={classes.searchbar} />\n            <div className={classes.actionsGroup}>\n              {props.actions}\n              <IconButton\n                className={classes.iconButton}\n                onClick={(): void => history.push('/settings')}>\n                <Settings color='primary' />\n              </IconButton>\n            </div>\n          </Toolbar>\n        </AppBar>\n      </HideOnScroll>\n      <Toolbar />\n    </>\n  );\n};\n\nexport default MyAppBar;\n","type SetTitleAction = { type: 'SetTitle'; payload: string };\ntype SetDefaultTitleAction = { type: 'DefaultTitle' };\ntype SetAppendTitleAction = { type: 'AppendTitle'; payload: string };\ntype TitleActionTypes =\n  | SetTitleAction\n  | SetDefaultTitleAction\n  | SetAppendTitleAction;\n\nexport const setTitle = (title: string): SetTitleAction => {\n  return {\n    type: 'SetTitle',\n    payload: title,\n  };\n};\nexport const appendTitle = (suffix: string): SetAppendTitleAction => {\n  return {\n    type: 'AppendTitle',\n    payload: suffix,\n  };\n};\n\nexport const setDefaultTitle = (): SetDefaultTitleAction => {\n  return { type: 'DefaultTitle' };\n};\nconst defalutTitle = 'Thirukural';\nexport const TitleReducer = (\n  title = defalutTitle,\n  action: TitleActionTypes\n): string => {\n  switch (action.type) {\n    case 'SetTitle':\n      return action.payload;\n    case 'AppendTitle':\n      return defalutTitle.concat(`-${action.payload}`);\n    case 'DefaultTitle':\n      return defalutTitle;\n    default:\n      return title;\n  }\n};\n","import * as React from 'react';\n\nimport {\n  makeStyles,\n  BottomNavigation,\n  BottomNavigationAction,\n} from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  appBar: {\n    bottom: 0,\n    top: 'auto',\n    boxShadow: 'none',\n    borderTop: '1px solid rgba(0, 0, 0, 0.12)',\n  },\n}));\n\nexport type MyBottomNavigationBarItemsType = {\n  icon: React.ReactNode;\n  label: string;\n  route: string;\n};\nexport type MyBottomNavigationBarProps = {\n  items: Array<MyBottomNavigationBarItemsType>;\n  currentRoute: string;\n  className?: string;\n  onChange: (route: string) => void;\n};\n\nconst MyBottomNavigationBar: React.FC<MyBottomNavigationBarProps> = (\n  props: MyBottomNavigationBarProps\n) => {\n  const classes = useStyles();\n  return (\n    <div className={clsx(classes.root, props.className)}>\n      <AppBar position='fixed' color='inherit' className={classes.appBar}>\n        <BottomNavigation\n          value={props.currentRoute}\n          onChange={(_, value: string): void => props.onChange(value)}\n          className={classes.root}>\n          {props.items.map((item, index) => (\n            <BottomNavigationAction\n              label={item.label}\n              value={item.route}\n              icon={item.icon}\n              key={index}\n            />\n          ))}\n        </BottomNavigation>\n      </AppBar>\n      <Toolbar />\n    </div>\n  );\n};\n\nexport default MyBottomNavigationBar;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ListIcon from '@material-ui/icons/List';\nimport { useDispatch } from 'react-redux';\nimport { useLocation, useRouteMatch } from 'react-router-dom';\nimport { useNavigation } from 'src/lib/hooks';\nimport { setDefaultTitle, setTitle } from 'src/state/title';\n\nimport MyBottomNavigationBar from './../common/MyBottomNavigationBar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n}));\n\ntype KuralActionBarProps = Record<string, unknown>;\nconst ActionBarItems = [\n  {\n    icon: <HomeIcon />,\n    route: '/',\n    label: 'Home',\n  },\n  {\n    icon: <ListIcon />,\n    route: '/list',\n    label: 'List',\n  },\n  // {\n  //   icon: <SearchIcon />,\n  //   route: '/search',\n  //   label: 'Search',\n  // },\n  // {\n  //   icon: <FavoriteIcon />,\n  //   route: '/favorite',\n  //   label: 'Favorites',\n  // },\n  // {\n  //   icon: <SettingsIcon />,\n  //   route: '/settings',\n  //   label: 'Settings',\n  // },\n];\n\nconst KuralActionBar: React.FC<KuralActionBarProps> = (\n  props: KuralActionBarProps\n) => {\n  const homePath = useRouteMatch('/');\n  const listPath = useRouteMatch('/list*');\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  const initRoute = React.useCallback(\n    (): string =>\n      homePath?.isExact\n        ? ActionBarItems[0].route\n        : listPath?.isExact\n        ? ActionBarItems[1].route\n        : location.pathname,\n    [homePath, listPath, location.pathname]\n  );\n  const [route, setRoute] = React.useState(initRoute());\n  React.useEffect(() => {\n    setRoute(initRoute());\n  }, [initRoute, location]);\n  const classes = useStyles();\n  const [navigateTo] = useNavigation();\n  const navigateBar = (route: string): void => {\n    setRoute(route);\n    navigateTo(route)();\n    if (ActionBarItems[0].route === route) {\n      dispatch(setDefaultTitle());\n    } else {\n      const label = ActionBarItems.find((it) => it.route === route)?.label;\n      if (label) {\n        dispatch(setTitle(label));\n      }\n    }\n  };\n  return (\n    <MyBottomNavigationBar\n      items={ActionBarItems}\n      currentRoute={route}\n      onChange={navigateBar}\n      className={classes.root}\n    />\n  );\n};\n\nexport default KuralActionBar;\n","import React from 'react';\n\nimport { renderRoutes, RouteConfigComponentProps } from 'react-router-config';\n\nimport MyAppBar from '../../components/common/MyAppBar';\nimport KuralActionBar from '../../components/kural/KuralActionBar';\n\nconst Main: React.FC<RouteConfigComponentProps> = (\n  props: RouteConfigComponentProps\n) => {\n  return (\n    <>\n      <MyAppBar />\n      {renderRoutes(props.route?.routes)}\n      <KuralActionBar />\n    </>\n  );\n};\n\nexport default Main;\n","import React from 'react';\n\nimport { Chip, makeStyles } from '@material-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { setAllUserSelections, setUserSelection } from '../../../state/search';\nimport {\n  CATEGORY_COLORS,\n  SearchCategoryLabelMap,\n  SearchCategoryTypes,\n} from './../../../lib/api';\nimport { AppState } from './../../../state';\n\ntype SearchChipsProps = unknown;\ntype FiltersType = {\n  label: string;\n  type: SearchCategoryTypes;\n  isShow: boolean;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  searchFilter: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n    textAlign: 'start',\n    '& .search-chip': {\n      height: '2em',\n      margin: '0 1vw 4px 0',\n      fontSize: '0.7em',\n      minWidth: '15vw',\n      '& svg': {\n        width: '1rem',\n        height: '1rem',\n        [theme.breakpoints.up('sm')]: {\n          width: '1.5rem',\n          height: '1.5rem',\n        },\n      },\n    },\n  },\n}));\n\nexport const SearchChips: React.FC<SearchChipsProps> = (\n  props: SearchChipsProps\n) => {\n  const classes = useStyles();\n  const [filters, setFilters] = React.useState<FiltersType[]>([]);\n  const search = useSelector((st: AppState) => st.search);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    const hasStartsWith = (keyword: string): boolean =>\n      search.filters.filter((f) => f.startsWith(keyword)).length > 0;\n    const filterOptions: FiltersType[] = [\n      {\n        label: SearchCategoryLabelMap.all,\n        type: 'all',\n        isShow: new Set(search.results.map((r) => r.type)).size > 1,\n      },\n      {\n        label: SearchCategoryLabelMap.section,\n        type: 'section',\n        isShow: hasStartsWith('BySection'),\n      },\n      {\n        label: SearchCategoryLabelMap.literature,\n        type: 'literature',\n        isShow: hasStartsWith('ByLiterature'),\n      },\n      {\n        label: SearchCategoryLabelMap.chapter,\n        type: 'chapter',\n        isShow: hasStartsWith('ByChapter'),\n      },\n      {\n        label: SearchCategoryLabelMap.kural,\n        type: 'kural',\n        isShow: hasStartsWith('ByKural'),\n      },\n      {\n        label: SearchCategoryLabelMap.detail,\n        type: 'detail',\n        isShow: hasStartsWith('ByKuralDetail'),\n      },\n    ];\n    setFilters(filterOptions);\n  }, [search]);\n  const isSelected = (type: SearchCategoryTypes): boolean => {\n    if (type === 'all') {\n      return (\n        search.userSelections['section'] &&\n        search.userSelections['literature'] &&\n        search.userSelections['chapter'] &&\n        search.userSelections['kural'] &&\n        search.userSelections['detail']\n      );\n    } else {\n      return search.userSelections[type];\n    }\n  };\n\n  const onClick = (type: SearchCategoryTypes): void => {\n    if (type !== 'all') {\n      dispatch(setUserSelection(type, !search.userSelections[type]));\n    } else {\n      dispatch(setAllUserSelections(!isSelected('all')));\n    }\n  };\n  return (\n    <div className={classes.searchFilter}>\n      {filters\n        .filter((f) => f.isShow)\n        .map((f, i) => (\n          <Chip\n            key={i}\n            size='small'\n            className='search-chip'\n            label={f.label}\n            color={'primary'}\n            style={{\n              backgroundColor:\n                CATEGORY_COLORS[\n                  f.type === 'all' || f.type === 'detail' ? 'default' : f.type\n                ],\n            }}\n            variant={isSelected(f.type) ? 'default' : 'outlined'}\n            onClick={(e): void => onClick(f.type)}\n          />\n        ))}\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { makeStyles, ListItem, List, Avatar } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { isResultOfType, SearchResult, CATEGORY_COLORS } from 'src/lib/api';\nimport { useNavigation } from 'src/lib/hooks';\nimport { AppState } from 'src/state/reducers';\nimport KuralCard from 'src/views/components/kural/KuralCard';\n\nimport { SearchChips } from './SearchChips';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(1),\n  },\n  kuralSearchItem: {\n    margin: 0,\n    padding: 0,\n    borderBottom: 'none',\n  },\n  searchItem: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    cursor: 'pointer',\n  },\n  searchItemAvatar: {\n    width: '2rem',\n    height: '2rem',\n    textAlign: 'center',\n    fontSize: '1rem',\n    marginRight: '0.5rem',\n  },\n}));\n\ntype SearchProps = {\n  className?: string;\n};\n\ntype SearchResultItemProps = {\n  component?: React.ReactNode;\n  result: SearchResult;\n  label: string;\n  onClick?: () => void;\n};\nconst SearchResultItem: React.FC<SearchResultItemProps> = ({\n  result,\n  label,\n  onClick,\n  component,\n}: SearchResultItemProps) => {\n  const classes = useStyles();\n  const innerContent = component ? component : <div>{result.item.value}</div>;\n  return (\n    <ListItem\n      key={`${label}${result.item.id}`}\n      onClick={onClick}\n      className={classes.searchItem}>\n      <Avatar\n        className={classes.searchItemAvatar}\n        style={{ backgroundColor: CATEGORY_COLORS[result.category] }}>\n        {label.charAt(0).toUpperCase()}\n      </Avatar>\n      {innerContent}\n    </ListItem>\n  );\n};\n\nconst Search: React.FC<SearchProps> = (props: SearchProps) => {\n  const classes = useStyles();\n  const search = useSelector((st: AppState) => st.search);\n  const [navigateTo] = useNavigation();\n  const renderItem = (\n    item: SearchResult,\n    index: number\n  ): React.ReactElement | null => {\n    if (isResultOfType(item, 'kural') && search.userSelections.kural) {\n      return (\n        <SearchResultItem\n          key={index}\n          result={item}\n          label='k'\n          // TODO:\n          onClick={navigateTo(`/list/kural/${item.item.id}`)}\n          component={\n            <KuralCard\n              componentType='span'\n              key={item.item.id}\n              kural={item.item}\n              className={classes.kuralSearchItem}\n            />\n          }\n        />\n      );\n    }\n    if (isResultOfType(item, 'chapter') && search.userSelections.chapter) {\n      return (\n        <SearchResultItem\n          key={index}\n          label='ch'\n          onClick={navigateTo(`/list/${item.item.id}/kural`)}\n          result={item}\n        />\n      );\n    }\n    if (\n      isResultOfType(item, 'literature') &&\n      search.userSelections.literature\n    ) {\n      return (\n        <SearchResultItem\n          key={index}\n          label='lit'\n          onClick={navigateTo(`/list/${item.item.id}/chapter`)}\n          result={item}\n        />\n      );\n    }\n    if (isResultOfType(item, 'section') && search.userSelections.section) {\n      return (\n        <SearchResultItem\n          key={index}\n          label='sec'\n          onClick={navigateTo(`/list/${item.item.id}/literature`)}\n          result={item}\n        />\n      );\n    }\n    // if (isResultOfType(item, 'detail') && search.userSelections.detail) {\n    //   return <>detail: {item.item.value}</>;\n    // }\n    return null;\n  };\n  return (\n    <div className={clsx(props.className, classes.root)}>\n      <SearchChips />\n      <List>{search.results.map((item, i) => renderItem(item, i))}</List>\n    </div>\n  );\n};\n\nexport default Search;\n","import React from 'react';\n\nimport {\n  makeStyles,\n  List,\n  ListItem,\n  ListItemText,\n  Select,\n  FormControl,\n  MenuItem,\n} from '@material-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { AppState } from '../../../state/reducers';\nimport { applyPreference, DEFAULT } from '../../../state/settings';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  item: {},\n  itemText: {\n    fontSize: '1em',\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n}));\n\nconst SettingsLabel = {\n  FONT_SIZE: 'Font size',\n};\n\ntype SettingsProps = {\n  className?: string;\n};\n\nconst getFontSizeOptions = (\n  baseSize: number,\n  count: number,\n  offset = 2\n): number[] => {\n  const result = [];\n  let size = baseSize;\n  while (count > 0) {\n    result.push(size);\n    size = size + offset;\n    count--;\n  }\n  return result;\n};\n\nconst Settings: React.FC<SettingsProps> = (props: SettingsProps) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { preference } = useSelector((st: AppState) => st.preferences);\n  const fontSizeOptions: Array<number> = getFontSizeOptions(\n    DEFAULT.preference.fontSize - 4,\n    10\n  );\n  const onFontChange = (fontSize: number): void => {\n    dispatch(applyPreference(Object.assign(preference, { fontSize })));\n  };\n\n  return (\n    <div className={props.className}>\n      <List>\n        <ListItem className={classes.item}>\n          <ListItemText\n            classes={{ primary: classes.itemText }}\n            primary={SettingsLabel.FONT_SIZE}\n          />\n          <FormControl className={classes.formControl}>\n            <Select\n              value={preference.fontSize}\n              onChange={(e): void => onFontChange(e.target.value as number)}>\n              {fontSizeOptions.map((v) => (\n                <MenuItem key={v} value={v}>\n                  {v}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </ListItem>\n      </List>\n    </div>\n  );\n};\n\nexport default Settings;\n","import React from 'react';\n\nimport { RouteConfig } from 'react-router-config';\nimport { Redirect } from 'react-router-dom';\n\nimport { CategoryViewer } from './views/components/kural/CategoryViewer';\nimport KuralDetailViewer from './views/components/kural/KuralDetailViewer';\nimport { KuralListSwipeable } from './views/components/kural/KuralsByChapterViewer';\nimport Home from './views/pages/home';\nimport { ListWithRouteViewer } from './views/pages/list';\nimport Main from './views/pages/main/main';\nimport Search from './views/pages/search/search';\nimport SettingsViewer from './views/pages/settings';\n\nexport const ROUTE_CONSTANTS = {\n  ROOT: '/',\n  LIST: '/list',\n  LIST_CATEGORY: '/list',\n  SEARCH: '/search',\n  FAVOURITE: '/favorite',\n  SETTINGS: '/settings',\n};\n\nexport const routes: RouteConfig[] = [\n  {\n    path: ROUTE_CONSTANTS.ROOT,\n    component: Main,\n    routes: [\n      {\n        path: ROUTE_CONSTANTS.SEARCH,\n        component: Search,\n        exact: true,\n      },\n      {\n        path: ROUTE_CONSTANTS.SETTINGS,\n        component: SettingsViewer,\n        exact: true,\n      },\n      {\n        path: ROUTE_CONSTANTS.LIST,\n        component: ListWithRouteViewer,\n        routes: [\n          {\n            path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter`,\n            component: KuralListSwipeable,\n            exact: true,\n          },\n          {\n            path: `${ROUTE_CONSTANTS.LIST}/:section/:literature/:chapter/:kural`,\n            component: KuralDetailViewer,\n            exact: true,\n          },\n          {\n            path: `${ROUTE_CONSTANTS.LIST_CATEGORY}*`,\n            component: CategoryViewer,\n          },\n          /* {\n            path: `${ROUTE_CONSTANTS.LIST}*`,\n            // eslint-disable-next-line react/display-name\n            component: (): React.ReactElement => (\n              <Redirect to={`${ROUTE_CONSTANTS.LIST}/1/1/1`} />\n            ),\n            exact: true,\n          }, */\n        ],\n      },\n      {\n        path: ROUTE_CONSTANTS.ROOT,\n        exact: true,\n        component: Home,\n      },\n      {\n        path: '/*',\n        // eslint-disable-next-line react/display-name\n        component: (): React.ReactElement => <Redirect to='/' />,\n      },\n    ],\n  },\n];\n","import * as React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\nimport { renderRoutes } from 'react-router-config';\nimport { HashRouter as Router } from 'react-router-dom';\n\nimport { routes } from './routes';\nimport { thunkInitKuralIndexMapAndUserPref } from './state/kuralIndex';\nimport { AppState } from './state/reducers';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up('sm')]: {\n      fontSize: '3vw',\n    },\n  },\n}));\n\nconst App: React.FC = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const firestore = useFirestore();\n  const settings = useSelector((st: AppState) => st.preferences);\n  React.useEffect(() => {\n    dispatch(thunkInitKuralIndexMapAndUserPref(firestore));\n  }, [dispatch, firestore]);\n  return (\n    <div\n      className={classes.root}\n      style={{ fontSize: settings.preference.fontSize }}>\n      <Router>{renderRoutes(routes)}</Router>\n    </div>\n  );\n};\n\nexport default App;\n","import { firebaseReducer } from 'react-redux-firebase';\nimport { combineReducers } from 'redux';\nimport { firestoreReducer } from 'redux-firestore';\n\nimport { KuralIndexReducer } from './kuralIndex';\nimport { SearchStateReducer } from './search';\nimport { PreferenceReducer } from './settings';\nimport { TitleReducer } from './title';\n\nexport const rootReducers = combineReducers({\n  kuralIndexMap: KuralIndexReducer,\n  title: TitleReducer,\n  search: SearchStateReducer,\n  preferences: PreferenceReducer,\n  firebase: firebaseReducer,\n  firestore: firestoreReducer,\n});\n\nexport type AppState = ReturnType<typeof rootReducers>;\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\nimport thunk from 'redux-thunk';\n\nimport { name } from './../../package.json';\nimport { rootReducers } from './reducers';\n\nconst devToolsEnhancer = composeWithDevTools({\n  name: `${name}-DevTools`,\n  trace: true,\n});\nexport const AppStore = createStore(\n  rootReducers,\n  devToolsEnhancer(applyMiddleware(thunk))\n);\n","import configureStore from 'redux-mock-store';\nimport thunk from 'redux-thunk';\nconst middleware = [thunk];\n\nexport const mockStore = configureStore(middleware);\n","import React from 'react';\n\nimport { Provider } from 'react-redux';\n\nimport { AppState } from './reducers';\nimport { AppStore } from './store';\nimport { mockStore } from './test';\n\ntype StoreProvideType = {\n  children: React.ReactNode;\n};\n\nconst StoreProvider: React.FC<StoreProvideType> = ({\n  children,\n}: StoreProvideType) => {\n  return <Provider store={AppStore}>{children}</Provider>;\n};\n\ntype MockStoreProps = {\n  children: React.ReactNode;\n  store: AppState;\n};\n\nconst WrapMockStore: React.FC<MockStoreProps> = ({\n  children,\n  store,\n}: MockStoreProps) => {\n  return <Provider store={mockStore(store)}>{children}</Provider>;\n};\n\nexport { StoreProvider, AppStore, WrapMockStore };\nexport type { AppState } from './reducers';\n","import firebase from 'firebase/app';\nimport log from 'loglevel';\nimport { ReactReduxFirebaseProviderProps } from 'react-redux-firebase';\nimport { createFirestoreInstance } from 'redux-firestore';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nimport { AppStore } from './state';\n\nconst {\n  REACT_APP_API_KEY,\n  REACT_APP_AUTH_DOMAIN,\n  REACT_APP_DB_URL,\n  REACT_APP_PROJECT_ID,\n  REACT_APP_STORAGE_BUCKET,\n  REACT_APP_MESSAGING_SENDER_ID,\n  REACT_APP_FB_APP_ID,\n  REACT_APP_MESUREMENT_ID,\n} = process.env;\n\n((): void => {\n  if (\n    !(\n      REACT_APP_API_KEY &&\n      REACT_APP_AUTH_DOMAIN &&\n      REACT_APP_DB_URL &&\n      REACT_APP_PROJECT_ID\n    )\n  ) {\n    throw new Error('FB_CONF missing');\n  }\n})();\nconst FIREBASE_CONFIG = {\n  apiKey: REACT_APP_API_KEY,\n  projectId: REACT_APP_PROJECT_ID,\n  databaseURL: REACT_APP_DB_URL,\n  authDomain: REACT_APP_AUTH_DOMAIN,\n  storageBucket: REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: REACT_APP_MESSAGING_SENDER_ID,\n  appId: REACT_APP_FB_APP_ID,\n  measurementId: REACT_APP_MESUREMENT_ID,\n};\nfirebase.initializeApp(FIREBASE_CONFIG);\nfirebase\n  .firestore()\n  .enablePersistence({ synchronizeTabs: true })\n  .catch((err) => {\n    if (err.code === 'unimplemented') {\n      log.error('persistence not supported on the current browser');\n    }\n  });\n\nexport const REDUX_FIREBASE_CONF: ReactReduxFirebaseProviderProps = {\n  firebase,\n  dispatch: AppStore.dispatch,\n  createFirestoreInstance,\n  config: { userProfile: 'users', useFirestoreForProfile: true },\n};\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log('This web app is being served cache-first by a service');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { createMuiTheme } from '@material-ui/core';\n\nconst theme = createMuiTheme({\n  spacing: 8,\n});\n\nexport default theme;\n","import React from 'react';\n\nimport { ThemeProvider } from '@material-ui/core';\nimport log from 'loglevel';\nimport ReactDOM from 'react-dom';\nimport { ReactReduxFirebaseProvider } from 'react-redux-firebase';\n\nimport './index.scss';\n\nimport App from './App';\nimport { REDUX_FIREBASE_CONF } from './firebase';\nimport * as serviceWorker from './serviceWorker';\nimport { StoreProvider } from './state';\nimport AppTheme from './views/styles/theme';\n\nconst { NODE_ENV } = process.env;\n// disables logging in production release\nlog.setLevel(NODE_ENV === 'production' ? 'SILENT' : 'trace');\n\nReactDOM.render(\n  <StoreProvider>\n    <ReactReduxFirebaseProvider {...REDUX_FIREBASE_CONF}>\n      <ThemeProvider theme={AppTheme}>\n        <App />\n      </ThemeProvider>\n    </ReactReduxFirebaseProvider>\n  </StoreProvider>,\n  document.getElementById('root')\n);\n\nserviceWorker.register();\n","import { Category, SearchCategoryTypes } from './types';\n\nexport const COLLECTION_NAME_MAP = {\n  KURAL: 'KURAL',\n  TRANSLITERATOR: 'TRANSLITERATOR',\n  LANGUAGE: 'LANGUAGE',\n  KURAL_DETAIL: 'KURAL_DETAIL',\n  USER: 'USER',\n  SECTION: 'SECTION',\n  USER_FAVOURITES: 'USER_FAVOURITES',\n  USER_SEARCH_HISTORY: 'USER_SEARCH_HISTORY',\n  LITERATURE: 'LITERATURE',\n  CHAPTER: 'CHAPTER',\n  INDEX_MAP: 'INDEX_MAP',\n};\n\nexport const SearchCategoryLabelMap: Record<SearchCategoryTypes, string> = {\n  all: 'அனைத்தும்',\n  chapter: 'அதிகாரம்',\n  kural: 'குறள்',\n  literature: 'இயல்',\n  section: 'பால்',\n  detail: 'உரை',\n};\n\nexport const ITEMS_COUNT_MAP: Record<Category, number> = {\n  kural: 1330,\n  chapter: 133,\n  literature: 13,\n  section: 3,\n};\n\nexport * from './category';\nexport * from './common';\nexport * from './kural';\nexport * from './transilterator';\nexport * from './types';\nexport * from './preference';\nexport * from './util';\nexport * from './route';\n","import firebase from 'firebase';\nimport log from 'loglevel';\n\nexport const firestoreGetCacheFirst = async (\n  ref:\n    | firebase.firestore.CollectionReference<firebase.firestore.DocumentData>\n    | firebase.firestore.Query<firebase.firestore.DocumentData>\n): Promise<\n  firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>\n> => {\n  let result: firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>;\n  try {\n    result = await ref.get({ source: 'cache' });\n    if (result.empty) {\n      throw new Error('result not exists in cache');\n    }\n    log.debug(`fetches from cache`);\n  } catch (err) {\n    result = await ref.get({ source: 'server' });\n  }\n  return result;\n};\n","import { ExtendedFirestoreInstance } from 'react-redux-firebase';\nimport { ThunkAction } from 'redux-thunk';\nimport { updateUserPreference, User, UserPreference } from 'src/lib/api';\n\nimport { AppState } from '../reducers';\n\nexport type SetUserAction = { type: 'SetUser'; payload: User };\nexport type UpdateSettingsAction = {\n  type: 'UpdateSettings';\n  payload: Partial<UserPreference>;\n};\ntype SettingsActionTypes = SetUserAction | UpdateSettingsAction;\nexport const SETTINGS_STORAGE = 'settings';\n\nexport const updateUserFSAsync = (\n  firestore: ExtendedFirestoreInstance,\n  user: User\n): ThunkAction<void, AppState, unknown, SetUserAction> => {\n  return async (dispatch) => {\n    dispatch(setUser(user));\n    await updateUserPreference(firestore, user);\n  };\n};\n\nexport const setUser = (user: User): SetUserAction => ({\n  type: 'SetUser',\n  payload: user,\n});\n\nexport const applyPreference = (\n  pref: Partial<UserPreference>\n): UpdateSettingsAction => {\n  return {\n    type: 'UpdateSettings',\n    payload: pref,\n  };\n};\n\nexport const DEFAULT: User = {\n  id: 'anonymous',\n  favorites: {\n    kural: [],\n    chapter: [],\n  },\n  preference: {\n    language: {\n      primary: 'TA',\n      secondary: [],\n    },\n    fontSize: 16,\n  },\n};\nexport const PreferenceReducer = (\n  settings = DEFAULT,\n  action: SettingsActionTypes\n): User => {\n  switch (action.type) {\n    case 'SetUser':\n      return action.payload;\n    case 'UpdateSettings':\n      return {\n        ...settings,\n        preference: { ...settings.preference, ...action.payload },\n      };\n    default:\n      return settings;\n  }\n};\n"],"sourceRoot":""}