(this.webpackJsonpthirukural=this.webpackJsonpthirukural||[]).push([[8],{589:function(e,t,a){"use strict";a.r(t),a.d(t,"CategoryViewerContainer",(function(){return w}));var n=a(8),c=a(3),i=a(0),r=a.n(i),o=a(291),l=a(5),s=a(29),u=a.n(s),d=a(10),p=a(15),b=a(7),j=a(32),f=a(40),g=a(587),h=Object(o.a)((function(e){return{categoryFilterRoot:{"&:hover fieldset":{borderColor:"var(--app-color) !important"}},categoryFilter:{fontSize:"0.6rem",lineHeight:"0.6rem",paddingTop:3,paddingBottom:3}}})),v=["section","literature","chapter"],O=function(e){var t=h();return Object(c.jsx)(g.a,{variant:"outlined",native:!0,classes:{select:t.categoryFilter},className:Object(l.a)(t.categoryFilterRoot,e.className),value:e.value,onChange:function(t){return e.onSelect&&e.onSelect(t.target.value)},children:v.map((function(e,t){return Object(c.jsx)("option",{value:e,children:e.toUpperCase()},t)}))})},m=a(4),x=a(6),y=a(519),k=a(566),C=a(496),N=a(521),S=a(128),I=Object(o.a)((function(e){return{listItem:{cursor:"pointer",position:"relative",borderRadius:e.spacing(2),WebkitTapHighlightColor:"transparent",border:"none","&.level-0":{paddingLeft:e.spacing(2)},"&.level-1":{paddingLeft:e.spacing(3)},"&.level-2":{paddingLeft:e.spacing(4)},"&.on-focus":{color:e.palette.secondary.main},"&.is-active":{color:"var(--app-color)",border:"2px solid"}},listIcon:{display:"flex",justifyContent:"center",alignItems:"center"}}})),T=function(e){var t=e.level,a=void 0===t?0:t,n=e.hasNodes,i=e.isOpen,r=e.label,o=e.toggleNode,l=e.focused,s=e.onClick,u=e.active,d=(Object(x.a)(e,["level","hasNodes","isOpen","label","toggleNode","focused","onClick","active"]),I());return Object(c.jsxs)(C.a,{onClick:function(e){n&&o&&o(),s(e)},className:"".concat(d.listItem," level-").concat(a," ").concat(l?"on-focus":""," ").concat(u?"is-active":""),children:[Object(c.jsx)(N.a,{disableTypography:!0,primary:r}),n&&Object(c.jsx)("div",{className:d.listIcon,children:Object(c.jsx)(S.a,{isExpanded:i})})]})},R=Object(o.a)((function(e){return{treeMenuContainer:{"&>div":{outlineStyle:"none"}},list:{}}})),E=function(e){e.className;var t=Object(x.a)(e,["className"]),a=R();return Object(s.debug)("CategoryViewer renders"),Object(c.jsx)("div",{className:a.treeMenuContainer,children:Object(c.jsx)(k.a,Object(m.a)(Object(m.a)({},t),{},{children:function(e){var t=e.items;return Object(c.jsx)(y.a,{className:a.list,children:t.map((function(e){e.key;var t=e.path,a=Object(x.a)(e,["key","path"]);return Object(c.jsx)(T,Object(m.a)({},a),t)}))})}}))})},L=Object(o.a)((function(e){return{categoryRoot:{padding:e.spacing(1)},filterContainer:{textAlign:"left"}}})),w=function(e){var t=Object(p.g)(),a=L(),i=Object(j.b)("cat-filter","chapter"),o=Object(n.a)(i,2),s=o[0],g=o[1],h=r.a.useState([]),v=Object(n.a)(h,2),m=v[0],x=v[1],y=Object(d.d)((function(e){return e.kuralIndexMap})),k=y.section,C=y.literature,N=y.chapter,S=y.index,I=Object(j.h)(),T=Object(n.a)(I,3),R=T[1],w=T[2],A=r.a.useCallback((function(e,t){return w(t).map((function(a,n){return{key:a.id.toString(),label:a.value,index:n,path:"".concat(e,"/").concat(t,"/").concat(a.id)}}))}),[w]),F=r.a.useCallback((function(e){return R(e).map((function(t,a){return{key:t.id.toString(),label:t.value,index:a,path:"".concat(e,"/").concat(t.id),nodes:A(e,t.id)}}))}),[A,R]),M=t.location.pathname.replace(new RegExp("".concat(f.a.LIST_CATEGORY,"(/)?")),"");r.a.useEffect((function(){m.length&&u.a.debug("category change: replace route =>",m[0].path)}),[m,t]),r.a.useEffect((function(){var e=[];switch(s){case"section":e=Object.values(k).map((function(e,t){return{key:e.id.toString(),label:e.value,index:t,path:"".concat(e.id),nodes:F(e.id)}}));break;case"literature":e=Object.values(C).map((function(e,t){var a=Object(b.u)(S,e.id);return{key:e.id.toString(),label:e.value,index:t,path:"".concat(a,"/").concat(e.id),nodes:A(a,e.id)}}));break;case"chapter":e=Object.values(N).map((function(e,t){var a=Object(b.t)(S,e.id),n=Object(b.u)(S,a);return{key:e.id.toString(),label:e.value,index:t,path:"".concat(n,"/").concat(a,"/").concat(e.id)}}))}x(e)}),[F,s,k,C,N,A,S]);return Object(c.jsxs)("div",{className:Object(l.a)(a.categoryRoot,e.className),children:[Object(c.jsx)("div",{className:a.filterContainer,children:Object(c.jsx)(O,{value:s,onSelect:g})}),Object(c.jsx)(E,{initialActiveKey:M,initialFocusKey:M,initialOpenNodes:function(){var e=M.split("/").map((function(e){return M.substring(0,M.indexOf(e)+e.length)}));return 2===e.length&&e[0]===e[1]&&(e[1]="".concat(e[0],"/").concat(e[1])),e}(),onClickItem:function(e){if(t.replace("".concat(f.a.LIST_CATEGORY,"/").concat(e.path)),!e.hasNodes){var a="".concat(f.a.LIST_DETAIL,"/").concat(e.path);u.a.debug("change route =>",a),t.push(a)}},data:m,hasSearch:!1})]})};t.default=w}}]);
//# sourceMappingURL=8.322423e7.chunk.js.map